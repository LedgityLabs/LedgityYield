import { mapMaybePromise } from './map-maybe-promise.js';
export function iterateAsync(iterable, callback, results) {
    const iterator = iterable[Symbol.iterator]();
    function iterate() {
        const { done: endOfIterator, value } = iterator.next();
        if (endOfIterator) {
            return;
        }
        return mapMaybePromise(callback(value), result => {
            if (result) {
                results?.push(result);
            }
            return iterate();
        });
    }
    return iterate();
}
