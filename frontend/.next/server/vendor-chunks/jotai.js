"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/jotai";
exports.ids = ["vendor-chunks/jotai"];
exports.modules = {

/***/ "(ssr)/../node_modules/jotai/esm/react.mjs":
/*!*******************************************!*\
  !*** ../node_modules/jotai/esm/react.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Provider: () => (/* binding */ Provider),\n/* harmony export */   useAtom: () => (/* binding */ useAtom),\n/* harmony export */   useAtomValue: () => (/* binding */ useAtomValue),\n/* harmony export */   useSetAtom: () => (/* binding */ useSetAtom),\n/* harmony export */   useStore: () => (/* binding */ useStore)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jotai/vanilla */ \"(ssr)/../node_modules/jotai/esm/vanilla.mjs\");\n/* __next_internal_client_entry_do_not_use__ Provider,useAtom,useAtomValue,useSetAtom,useStore auto */ \n\nconst StoreContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nconst useStore = (options)=>{\n    const store = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(StoreContext);\n    return (options == null ? void 0 : options.store) || store || (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__.getDefaultStore)();\n};\nconst Provider = ({ children, store })=>{\n    const storeRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n    if (!store && !storeRef.current) {\n        storeRef.current = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__.createStore)();\n    }\n    return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(StoreContext.Provider, {\n        value: store || storeRef.current\n    }, children);\n};\nconst isPromiseLike = (x)=>typeof (x == null ? void 0 : x.then) === \"function\";\nconst use = react__WEBPACK_IMPORTED_MODULE_0__.use || ((promise)=>{\n    if (promise.status === \"pending\") {\n        throw promise;\n    } else if (promise.status === \"fulfilled\") {\n        return promise.value;\n    } else if (promise.status === \"rejected\") {\n        throw promise.reason;\n    } else {\n        promise.status = \"pending\";\n        promise.then((v)=>{\n            promise.status = \"fulfilled\";\n            promise.value = v;\n        }, (e)=>{\n            promise.status = \"rejected\";\n            promise.reason = e;\n        });\n        throw promise;\n    }\n});\nfunction useAtomValue(atom, options) {\n    const store = useStore(options);\n    const [[valueFromReducer, storeFromReducer, atomFromReducer], rerender] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)((prev)=>{\n        const nextValue = store.get(atom);\n        if (Object.is(prev[0], nextValue) && prev[1] === store && prev[2] === atom) {\n            return prev;\n        }\n        return [\n            nextValue,\n            store,\n            atom\n        ];\n    }, void 0, ()=>[\n            store.get(atom),\n            store,\n            atom\n        ]);\n    let value = valueFromReducer;\n    if (storeFromReducer !== store || atomFromReducer !== atom) {\n        rerender();\n        value = store.get(atom);\n    }\n    const delay = options == null ? void 0 : options.delay;\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const unsub = store.sub(atom, ()=>{\n            if (typeof delay === \"number\") {\n                setTimeout(rerender, delay);\n                return;\n            }\n            rerender();\n        });\n        rerender();\n        return unsub;\n    }, [\n        store,\n        atom,\n        delay\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(value);\n    return isPromiseLike(value) ? use(value) : value;\n}\nfunction useSetAtom(atom, options) {\n    const store = useStore(options);\n    const setAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((...args)=>{\n        if (( false ? 0 : void 0) !== \"production\" && !(\"write\" in atom)) {\n            throw new Error(\"not writable atom\");\n        }\n        return store.set(atom, ...args);\n    }, [\n        store,\n        atom\n    ]);\n    return setAtom;\n}\nfunction useAtom(atom, options) {\n    return [\n        useAtomValue(atom, options),\n        // We do wrong type assertion here, which results in throwing an error.\n        useSetAtom(atom, options)\n    ];\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS9yZWFjdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozt1R0FDMEk7QUFDN0U7QUFFN0QsTUFBTVcsNkJBQWVWLG9EQUFhQSxDQUNoQyxLQUFLO0FBRVAsTUFBTVcsV0FBVyxDQUFDQztJQUNoQixNQUFNQyxRQUFRWixpREFBVUEsQ0FBQ1M7SUFDekIsT0FBTyxDQUFDRSxXQUFXLE9BQU8sS0FBSyxJQUFJQSxRQUFRQyxLQUFLLEtBQUtBLFNBQVNMLDhEQUFlQTtBQUMvRTtBQUNBLE1BQU1NLFdBQVcsQ0FBQyxFQUNoQkMsUUFBUSxFQUNSRixLQUFLLEVBQ047SUFDQyxNQUFNRyxXQUFXZCw2Q0FBTUE7SUFDdkIsSUFBSSxDQUFDVyxTQUFTLENBQUNHLFNBQVNDLE9BQU8sRUFBRTtRQUMvQkQsU0FBU0MsT0FBTyxHQUFHUiwwREFBV0E7SUFDaEM7SUFDQSxxQkFBT04sb0RBQWFBLENBQ2xCTyxhQUFhSSxRQUFRLEVBQ3JCO1FBQ0VJLE9BQU9MLFNBQVNHLFNBQVNDLE9BQU87SUFDbEMsR0FDQUY7QUFFSjtBQUVBLE1BQU1JLGdCQUFnQixDQUFDQyxJQUFNLE9BQVFBLENBQUFBLEtBQUssT0FBTyxLQUFLLElBQUlBLEVBQUVDLElBQUksTUFBTTtBQUN0RSxNQUFNQyxNQUFNdkIsc0NBQWdCLElBQUssRUFBQ3dCO0lBQ2hDLElBQUlBLFFBQVFDLE1BQU0sS0FBSyxXQUFXO1FBQ2hDLE1BQU1EO0lBQ1IsT0FBTyxJQUFJQSxRQUFRQyxNQUFNLEtBQUssYUFBYTtRQUN6QyxPQUFPRCxRQUFRTCxLQUFLO0lBQ3RCLE9BQU8sSUFBSUssUUFBUUMsTUFBTSxLQUFLLFlBQVk7UUFDeEMsTUFBTUQsUUFBUUUsTUFBTTtJQUN0QixPQUFPO1FBQ0xGLFFBQVFDLE1BQU0sR0FBRztRQUNqQkQsUUFBUUYsSUFBSSxDQUNWLENBQUNLO1lBQ0NILFFBQVFDLE1BQU0sR0FBRztZQUNqQkQsUUFBUUwsS0FBSyxHQUFHUTtRQUNsQixHQUNBLENBQUNDO1lBQ0NKLFFBQVFDLE1BQU0sR0FBRztZQUNqQkQsUUFBUUUsTUFBTSxHQUFHRTtRQUNuQjtRQUVGLE1BQU1KO0lBQ1I7QUFDRjtBQUNBLFNBQVNLLGFBQWFDLElBQUksRUFBRWpCLE9BQU87SUFDakMsTUFBTUMsUUFBUUYsU0FBU0M7SUFDdkIsTUFBTSxDQUFDLENBQUNrQixrQkFBa0JDLGtCQUFrQkMsZ0JBQWdCLEVBQUVDLFNBQVMsR0FBRzdCLGlEQUFVQSxDQUNsRixDQUFDOEI7UUFDQyxNQUFNQyxZQUFZdEIsTUFBTXVCLEdBQUcsQ0FBQ1A7UUFDNUIsSUFBSVEsT0FBT0MsRUFBRSxDQUFDSixJQUFJLENBQUMsRUFBRSxFQUFFQyxjQUFjRCxJQUFJLENBQUMsRUFBRSxLQUFLckIsU0FBU3FCLElBQUksQ0FBQyxFQUFFLEtBQUtMLE1BQU07WUFDMUUsT0FBT0s7UUFDVDtRQUNBLE9BQU87WUFBQ0M7WUFBV3RCO1lBQU9nQjtTQUFLO0lBQ2pDLEdBQ0EsS0FBSyxHQUNMLElBQU07WUFBQ2hCLE1BQU11QixHQUFHLENBQUNQO1lBQU9oQjtZQUFPZ0I7U0FBSztJQUV0QyxJQUFJWCxRQUFRWTtJQUNaLElBQUlDLHFCQUFxQmxCLFNBQVNtQixvQkFBb0JILE1BQU07UUFDMURJO1FBQ0FmLFFBQVFMLE1BQU11QixHQUFHLENBQUNQO0lBQ3BCO0lBQ0EsTUFBTVUsUUFBUTNCLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVEyQixLQUFLO0lBQ3REbEMsZ0RBQVNBLENBQUM7UUFDUixNQUFNbUMsUUFBUTNCLE1BQU00QixHQUFHLENBQUNaLE1BQU07WUFDNUIsSUFBSSxPQUFPVSxVQUFVLFVBQVU7Z0JBQzdCRyxXQUFXVCxVQUFVTTtnQkFDckI7WUFDRjtZQUNBTjtRQUNGO1FBQ0FBO1FBQ0EsT0FBT087SUFDVCxHQUFHO1FBQUMzQjtRQUFPZ0I7UUFBTVU7S0FBTTtJQUN2QmpDLG9EQUFhQSxDQUFDWTtJQUNkLE9BQU9DLGNBQWNELFNBQVNJLElBQUlKLFNBQVNBO0FBQzdDO0FBRUEsU0FBU3lCLFdBQVdkLElBQUksRUFBRWpCLE9BQU87SUFDL0IsTUFBTUMsUUFBUUYsU0FBU0M7SUFDdkIsTUFBTWdDLFVBQVVyQyxrREFBV0EsQ0FDekIsQ0FBQyxHQUFHc0M7UUFDRixJQUFJLENBQUMsTUFBZSxHQUFHLENBQW9CLEdBQUcsS0FBSyxPQUFPLGdCQUFnQixDQUFFLFlBQVdoQixJQUFHLEdBQUk7WUFDNUYsTUFBTSxJQUFJbUIsTUFBTTtRQUNsQjtRQUNBLE9BQU9uQyxNQUFNb0MsR0FBRyxDQUFDcEIsU0FBU2dCO0lBQzVCLEdBQ0E7UUFBQ2hDO1FBQU9nQjtLQUFLO0lBRWYsT0FBT2U7QUFDVDtBQUVBLFNBQVNNLFFBQVFyQixJQUFJLEVBQUVqQixPQUFPO0lBQzVCLE9BQU87UUFDTGdCLGFBQWFDLE1BQU1qQjtRQUNuQix1RUFBdUU7UUFDdkUrQixXQUFXZCxNQUFNakI7S0FDbEI7QUFDSDtBQUVpRSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlZGdpdHkteWllbGQtZnJvbnRlbmQvLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS9yZWFjdC5tanM/Mjg4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5pbXBvcnQgUmVhY3RFeHBvcnRzLCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVJlZiwgY3JlYXRlRWxlbWVudCwgdXNlUmVkdWNlciwgdXNlRWZmZWN0LCB1c2VEZWJ1Z1ZhbHVlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldERlZmF1bHRTdG9yZSwgY3JlYXRlU3RvcmUgfSBmcm9tICdqb3RhaS92YW5pbGxhJztcblxuY29uc3QgU3RvcmVDb250ZXh0ID0gY3JlYXRlQ29udGV4dChcbiAgdm9pZCAwXG4pO1xuY29uc3QgdXNlU3RvcmUgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBzdG9yZSA9IHVzZUNvbnRleHQoU3RvcmVDb250ZXh0KTtcbiAgcmV0dXJuIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnN0b3JlKSB8fCBzdG9yZSB8fCBnZXREZWZhdWx0U3RvcmUoKTtcbn07XG5jb25zdCBQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuLFxuICBzdG9yZVxufSkgPT4ge1xuICBjb25zdCBzdG9yZVJlZiA9IHVzZVJlZigpO1xuICBpZiAoIXN0b3JlICYmICFzdG9yZVJlZi5jdXJyZW50KSB7XG4gICAgc3RvcmVSZWYuY3VycmVudCA9IGNyZWF0ZVN0b3JlKCk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoXG4gICAgU3RvcmVDb250ZXh0LlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiBzdG9yZSB8fCBzdG9yZVJlZi5jdXJyZW50XG4gICAgfSxcbiAgICBjaGlsZHJlblxuICApO1xufTtcblxuY29uc3QgaXNQcm9taXNlTGlrZSA9ICh4KSA9PiB0eXBlb2YgKHggPT0gbnVsbCA/IHZvaWQgMCA6IHgudGhlbikgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IHVzZSA9IFJlYWN0RXhwb3J0cy51c2UgfHwgKChwcm9taXNlKSA9PiB7XG4gIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpIHtcbiAgICB0aHJvdyBwcm9taXNlO1xuICB9IGVsc2UgaWYgKHByb21pc2Uuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgcmV0dXJuIHByb21pc2UudmFsdWU7XG4gIH0gZWxzZSBpZiAocHJvbWlzZS5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIikge1xuICAgIHRocm93IHByb21pc2UucmVhc29uO1xuICB9IGVsc2Uge1xuICAgIHByb21pc2Uuc3RhdHVzID0gXCJwZW5kaW5nXCI7XG4gICAgcHJvbWlzZS50aGVuKFxuICAgICAgKHYpID0+IHtcbiAgICAgICAgcHJvbWlzZS5zdGF0dXMgPSBcImZ1bGZpbGxlZFwiO1xuICAgICAgICBwcm9taXNlLnZhbHVlID0gdjtcbiAgICAgIH0sXG4gICAgICAoZSkgPT4ge1xuICAgICAgICBwcm9taXNlLnN0YXR1cyA9IFwicmVqZWN0ZWRcIjtcbiAgICAgICAgcHJvbWlzZS5yZWFzb24gPSBlO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhyb3cgcHJvbWlzZTtcbiAgfVxufSk7XG5mdW5jdGlvbiB1c2VBdG9tVmFsdWUoYXRvbSwgb3B0aW9ucykge1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKG9wdGlvbnMpO1xuICBjb25zdCBbW3ZhbHVlRnJvbVJlZHVjZXIsIHN0b3JlRnJvbVJlZHVjZXIsIGF0b21Gcm9tUmVkdWNlcl0sIHJlcmVuZGVyXSA9IHVzZVJlZHVjZXIoXG4gICAgKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5leHRWYWx1ZSA9IHN0b3JlLmdldChhdG9tKTtcbiAgICAgIGlmIChPYmplY3QuaXMocHJldlswXSwgbmV4dFZhbHVlKSAmJiBwcmV2WzFdID09PSBzdG9yZSAmJiBwcmV2WzJdID09PSBhdG9tKSB7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtuZXh0VmFsdWUsIHN0b3JlLCBhdG9tXTtcbiAgICB9LFxuICAgIHZvaWQgMCxcbiAgICAoKSA9PiBbc3RvcmUuZ2V0KGF0b20pLCBzdG9yZSwgYXRvbV1cbiAgKTtcbiAgbGV0IHZhbHVlID0gdmFsdWVGcm9tUmVkdWNlcjtcbiAgaWYgKHN0b3JlRnJvbVJlZHVjZXIgIT09IHN0b3JlIHx8IGF0b21Gcm9tUmVkdWNlciAhPT0gYXRvbSkge1xuICAgIHJlcmVuZGVyKCk7XG4gICAgdmFsdWUgPSBzdG9yZS5nZXQoYXRvbSk7XG4gIH1cbiAgY29uc3QgZGVsYXkgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmRlbGF5O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3ViKGF0b20sICgpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZGVsYXkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgc2V0VGltZW91dChyZXJlbmRlciwgZGVsYXkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXJlbmRlcigpO1xuICAgIH0pO1xuICAgIHJlcmVuZGVyKCk7XG4gICAgcmV0dXJuIHVuc3ViO1xuICB9LCBbc3RvcmUsIGF0b20sIGRlbGF5XSk7XG4gIHVzZURlYnVnVmFsdWUodmFsdWUpO1xuICByZXR1cm4gaXNQcm9taXNlTGlrZSh2YWx1ZSkgPyB1c2UodmFsdWUpIDogdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHVzZVNldEF0b20oYXRvbSwgb3B0aW9ucykge1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKG9wdGlvbnMpO1xuICBjb25zdCBzZXRBdG9tID0gdXNlQ2FsbGJhY2soXG4gICAgKC4uLmFyZ3MpID0+IHtcbiAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhKFwid3JpdGVcIiBpbiBhdG9tKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3Qgd3JpdGFibGUgYXRvbVwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdG9yZS5zZXQoYXRvbSwgLi4uYXJncyk7XG4gICAgfSxcbiAgICBbc3RvcmUsIGF0b21dXG4gICk7XG4gIHJldHVybiBzZXRBdG9tO1xufVxuXG5mdW5jdGlvbiB1c2VBdG9tKGF0b20sIG9wdGlvbnMpIHtcbiAgcmV0dXJuIFtcbiAgICB1c2VBdG9tVmFsdWUoYXRvbSwgb3B0aW9ucyksXG4gICAgLy8gV2UgZG8gd3JvbmcgdHlwZSBhc3NlcnRpb24gaGVyZSwgd2hpY2ggcmVzdWx0cyBpbiB0aHJvd2luZyBhbiBlcnJvci5cbiAgICB1c2VTZXRBdG9tKGF0b20sIG9wdGlvbnMpXG4gIF07XG59XG5cbmV4cG9ydCB7IFByb3ZpZGVyLCB1c2VBdG9tLCB1c2VBdG9tVmFsdWUsIHVzZVNldEF0b20sIHVzZVN0b3JlIH07XG4iXSwibmFtZXMiOlsiUmVhY3RFeHBvcnRzIiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VSZWYiLCJjcmVhdGVFbGVtZW50IiwidXNlUmVkdWNlciIsInVzZUVmZmVjdCIsInVzZURlYnVnVmFsdWUiLCJ1c2VDYWxsYmFjayIsImdldERlZmF1bHRTdG9yZSIsImNyZWF0ZVN0b3JlIiwiU3RvcmVDb250ZXh0IiwidXNlU3RvcmUiLCJvcHRpb25zIiwic3RvcmUiLCJQcm92aWRlciIsImNoaWxkcmVuIiwic3RvcmVSZWYiLCJjdXJyZW50IiwidmFsdWUiLCJpc1Byb21pc2VMaWtlIiwieCIsInRoZW4iLCJ1c2UiLCJwcm9taXNlIiwic3RhdHVzIiwicmVhc29uIiwidiIsImUiLCJ1c2VBdG9tVmFsdWUiLCJhdG9tIiwidmFsdWVGcm9tUmVkdWNlciIsInN0b3JlRnJvbVJlZHVjZXIiLCJhdG9tRnJvbVJlZHVjZXIiLCJyZXJlbmRlciIsInByZXYiLCJuZXh0VmFsdWUiLCJnZXQiLCJPYmplY3QiLCJpcyIsImRlbGF5IiwidW5zdWIiLCJzdWIiLCJzZXRUaW1lb3V0IiwidXNlU2V0QXRvbSIsInNldEF0b20iLCJhcmdzIiwiZW52IiwiTU9ERSIsIkVycm9yIiwic2V0IiwidXNlQXRvbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/jotai/esm/react.mjs\n");

/***/ }),

/***/ "(ssr)/../node_modules/jotai/esm/react/utils.mjs":
/*!*************************************************!*\
  !*** ../node_modules/jotai/esm/react/utils.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAtomCallback: () => (/* binding */ useAtomCallback),\n/* harmony export */   useHydrateAtoms: () => (/* binding */ useHydrateAtoms),\n/* harmony export */   useReducerAtom: () => (/* binding */ useReducerAtom),\n/* harmony export */   useResetAtom: () => (/* binding */ useResetAtom)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var jotai_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jotai/react */ \"(ssr)/../node_modules/jotai/esm/react.mjs\");\n/* harmony import */ var jotai_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jotai/vanilla/utils */ \"(ssr)/../node_modules/jotai/esm/vanilla/utils.mjs\");\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jotai/vanilla */ \"(ssr)/../node_modules/jotai/esm/vanilla.mjs\");\n/* __next_internal_client_entry_do_not_use__ useAtomCallback,useHydrateAtoms,useReducerAtom,useResetAtom auto */ \n\n\n\nfunction useResetAtom(anAtom, options) {\n    const setAtom = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom)(anAtom, options);\n    const resetAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>setAtom(jotai_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__.RESET), [\n        setAtom\n    ]);\n    return resetAtom;\n}\nfunction useReducerAtom(anAtom, reducer, options) {\n    if (( false ? 0 : void 0) !== \"production\") {\n        console.warn(\"[DEPRECATED] useReducerAtom is deprecated and will be removed in the future. Please create your own version using the recipe. https://github.com/pmndrs/jotai/pull/2467\");\n    }\n    const [state, setState] = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useAtom)(anAtom, options);\n    const dispatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((action)=>{\n        setState((prev)=>reducer(prev, action));\n    }, [\n        setState,\n        reducer\n    ]);\n    return [\n        state,\n        dispatch\n    ];\n}\nfunction useAtomCallback(callback, options) {\n    const anAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_3__.atom)(null, (get, set, ...args)=>callback(get, set, ...args)), [\n        callback\n    ]);\n    return (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom)(anAtom, options);\n}\nconst hydratedMap = /* @__PURE__ */ new WeakMap();\nfunction useHydrateAtoms(values, options) {\n    const store = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useStore)(options);\n    const hydratedSet = getHydratedSet(store);\n    for (const [atom, value] of values){\n        if (!hydratedSet.has(atom) || (options == null ? void 0 : options.dangerouslyForceHydrate)) {\n            hydratedSet.add(atom);\n            store.set(atom, value);\n        }\n    }\n}\nconst getHydratedSet = (store)=>{\n    let hydratedSet = hydratedMap.get(store);\n    if (!hydratedSet) {\n        hydratedSet = /* @__PURE__ */ new WeakSet();\n        hydratedMap.set(store, hydratedSet);\n    }\n    return hydratedSet;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS9yZWFjdC91dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7aUhBQzZDO0FBQ2U7QUFDaEI7QUFDUDtBQUVyQyxTQUFTTyxhQUFhQyxNQUFNLEVBQUVDLE9BQU87SUFDbkMsTUFBTUMsVUFBVVIsdURBQVVBLENBQUNNLFFBQVFDO0lBQ25DLE1BQU1FLFlBQVlYLGtEQUFXQSxDQUFDLElBQU1VLFFBQVFMLHNEQUFLQSxHQUFHO1FBQUNLO0tBQVE7SUFDN0QsT0FBT0M7QUFDVDtBQUVBLFNBQVNDLGVBQWVKLE1BQU0sRUFBRUssT0FBTyxFQUFFSixPQUFPO0lBQzlDLElBQUksQ0FBQyxNQUFlLEdBQUcsQ0FBb0IsR0FBRyxLQUFLLE9BQU8sY0FBYztRQUN0RU8sUUFBUUMsSUFBSSxDQUNWO0lBRUo7SUFDQSxNQUFNLENBQUNDLE9BQU9DLFNBQVMsR0FBR2hCLG9EQUFPQSxDQUFDSyxRQUFRQztJQUMxQyxNQUFNVyxXQUFXcEIsa0RBQVdBLENBQzFCLENBQUNxQjtRQUNDRixTQUFTLENBQUNHLE9BQVNULFFBQVFTLE1BQU1EO0lBQ25DLEdBQ0E7UUFBQ0Y7UUFBVU47S0FBUTtJQUVyQixPQUFPO1FBQUNLO1FBQU9FO0tBQVM7QUFDMUI7QUFFQSxTQUFTRyxnQkFBZ0JDLFFBQVEsRUFBRWYsT0FBTztJQUN4QyxNQUFNRCxTQUFTUCw4Q0FBT0EsQ0FDcEIsSUFBTUssbURBQUlBLENBQUMsTUFBTSxDQUFDbUIsS0FBS0MsS0FBSyxHQUFHQyxPQUFTSCxTQUFTQyxLQUFLQyxRQUFRQyxRQUM5RDtRQUFDSDtLQUFTO0lBRVosT0FBT3RCLHVEQUFVQSxDQUFDTSxRQUFRQztBQUM1QjtBQUVBLE1BQU1tQixjQUFjLGFBQWEsR0FBRyxJQUFJQztBQUN4QyxTQUFTQyxnQkFBZ0JDLE1BQU0sRUFBRXRCLE9BQU87SUFDdEMsTUFBTXVCLFFBQVE1QixxREFBUUEsQ0FBQ0s7SUFDdkIsTUFBTXdCLGNBQWNDLGVBQWVGO0lBQ25DLEtBQUssTUFBTSxDQUFDMUIsTUFBTTZCLE1BQU0sSUFBSUosT0FBUTtRQUNsQyxJQUFJLENBQUNFLFlBQVlHLEdBQUcsQ0FBQzlCLFNBQVVHLENBQUFBLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVE0Qix1QkFBdUIsR0FBRztZQUMxRkosWUFBWUssR0FBRyxDQUFDaEM7WUFDaEIwQixNQUFNTixHQUFHLENBQUNwQixNQUFNNkI7UUFDbEI7SUFDRjtBQUNGO0FBQ0EsTUFBTUQsaUJBQWlCLENBQUNGO0lBQ3RCLElBQUlDLGNBQWNMLFlBQVlILEdBQUcsQ0FBQ087SUFDbEMsSUFBSSxDQUFDQyxhQUFhO1FBQ2hCQSxjQUFjLGFBQWEsR0FBRyxJQUFJTTtRQUNsQ1gsWUFBWUYsR0FBRyxDQUFDTSxPQUFPQztJQUN6QjtJQUNBLE9BQU9BO0FBQ1Q7QUFFMEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWRnaXR5LXlpZWxkLWZyb250ZW5kLy4uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vcmVhY3QvdXRpbHMubWpzPzIzMWEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXRBdG9tLCB1c2VBdG9tLCB1c2VTdG9yZSB9IGZyb20gJ2pvdGFpL3JlYWN0JztcbmltcG9ydCB7IFJFU0VUIH0gZnJvbSAnam90YWkvdmFuaWxsYS91dGlscyc7XG5pbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWkvdmFuaWxsYSc7XG5cbmZ1bmN0aW9uIHVzZVJlc2V0QXRvbShhbkF0b20sIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2V0QXRvbSA9IHVzZVNldEF0b20oYW5BdG9tLCBvcHRpb25zKTtcbiAgY29uc3QgcmVzZXRBdG9tID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0QXRvbShSRVNFVCksIFtzZXRBdG9tXSk7XG4gIHJldHVybiByZXNldEF0b207XG59XG5cbmZ1bmN0aW9uIHVzZVJlZHVjZXJBdG9tKGFuQXRvbSwgcmVkdWNlciwgb3B0aW9ucykge1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIltERVBSRUNBVEVEXSB1c2VSZWR1Y2VyQXRvbSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gUGxlYXNlIGNyZWF0ZSB5b3VyIG93biB2ZXJzaW9uIHVzaW5nIHRoZSByZWNpcGUuIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvam90YWkvcHVsbC8yNDY3XCJcbiAgICApO1xuICB9XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlQXRvbShhbkF0b20sIG9wdGlvbnMpO1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUNhbGxiYWNrKFxuICAgIChhY3Rpb24pID0+IHtcbiAgICAgIHNldFN0YXRlKChwcmV2KSA9PiByZWR1Y2VyKHByZXYsIGFjdGlvbikpO1xuICAgIH0sXG4gICAgW3NldFN0YXRlLCByZWR1Y2VyXVxuICApO1xuICByZXR1cm4gW3N0YXRlLCBkaXNwYXRjaF07XG59XG5cbmZ1bmN0aW9uIHVzZUF0b21DYWxsYmFjayhjYWxsYmFjaywgb3B0aW9ucykge1xuICBjb25zdCBhbkF0b20gPSB1c2VNZW1vKFxuICAgICgpID0+IGF0b20obnVsbCwgKGdldCwgc2V0LCAuLi5hcmdzKSA9PiBjYWxsYmFjayhnZXQsIHNldCwgLi4uYXJncykpLFxuICAgIFtjYWxsYmFja11cbiAgKTtcbiAgcmV0dXJuIHVzZVNldEF0b20oYW5BdG9tLCBvcHRpb25zKTtcbn1cblxuY29uc3QgaHlkcmF0ZWRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHVzZUh5ZHJhdGVBdG9tcyh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZShvcHRpb25zKTtcbiAgY29uc3QgaHlkcmF0ZWRTZXQgPSBnZXRIeWRyYXRlZFNldChzdG9yZSk7XG4gIGZvciAoY29uc3QgW2F0b20sIHZhbHVlXSBvZiB2YWx1ZXMpIHtcbiAgICBpZiAoIWh5ZHJhdGVkU2V0LmhhcyhhdG9tKSB8fCAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5kYW5nZXJvdXNseUZvcmNlSHlkcmF0ZSkpIHtcbiAgICAgIGh5ZHJhdGVkU2V0LmFkZChhdG9tKTtcbiAgICAgIHN0b3JlLnNldChhdG9tLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5jb25zdCBnZXRIeWRyYXRlZFNldCA9IChzdG9yZSkgPT4ge1xuICBsZXQgaHlkcmF0ZWRTZXQgPSBoeWRyYXRlZE1hcC5nZXQoc3RvcmUpO1xuICBpZiAoIWh5ZHJhdGVkU2V0KSB7XG4gICAgaHlkcmF0ZWRTZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTtcbiAgICBoeWRyYXRlZE1hcC5zZXQoc3RvcmUsIGh5ZHJhdGVkU2V0KTtcbiAgfVxuICByZXR1cm4gaHlkcmF0ZWRTZXQ7XG59O1xuXG5leHBvcnQgeyB1c2VBdG9tQ2FsbGJhY2ssIHVzZUh5ZHJhdGVBdG9tcywgdXNlUmVkdWNlckF0b20sIHVzZVJlc2V0QXRvbSB9O1xuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVNldEF0b20iLCJ1c2VBdG9tIiwidXNlU3RvcmUiLCJSRVNFVCIsImF0b20iLCJ1c2VSZXNldEF0b20iLCJhbkF0b20iLCJvcHRpb25zIiwic2V0QXRvbSIsInJlc2V0QXRvbSIsInVzZVJlZHVjZXJBdG9tIiwicmVkdWNlciIsImVudiIsIk1PREUiLCJjb25zb2xlIiwid2FybiIsInN0YXRlIiwic2V0U3RhdGUiLCJkaXNwYXRjaCIsImFjdGlvbiIsInByZXYiLCJ1c2VBdG9tQ2FsbGJhY2siLCJjYWxsYmFjayIsImdldCIsInNldCIsImFyZ3MiLCJoeWRyYXRlZE1hcCIsIldlYWtNYXAiLCJ1c2VIeWRyYXRlQXRvbXMiLCJ2YWx1ZXMiLCJzdG9yZSIsImh5ZHJhdGVkU2V0IiwiZ2V0SHlkcmF0ZWRTZXQiLCJ2YWx1ZSIsImhhcyIsImRhbmdlcm91c2x5Rm9yY2VIeWRyYXRlIiwiYWRkIiwiV2Vha1NldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/jotai/esm/react/utils.mjs\n");

/***/ }),

/***/ "(ssr)/../node_modules/jotai/esm/vanilla.mjs":
/*!*********************************************!*\
  !*** ../node_modules/jotai/esm/vanilla.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   atom: () => (/* binding */ atom),\n/* harmony export */   createStore: () => (/* binding */ createStore),\n/* harmony export */   getDefaultStore: () => (/* binding */ getDefaultStore)\n/* harmony export */ });\nlet keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString() {\n      return ( false ? 0 : void 0) !== \"production\" && this.debugLabel ? key + \":\" + this.debugLabel : key;\n    }\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = defaultRead;\n    config.write = defaultWrite;\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\nfunction defaultRead(get) {\n  return get(this);\n}\nfunction defaultWrite(get, set, arg) {\n  return set(\n    this,\n    typeof arg === \"function\" ? arg(get(this)) : arg\n  );\n}\n\nconst isSelfAtom = (atom, a) => atom.unstable_is ? atom.unstable_is(a) : a === atom;\nconst hasInitialValue = (atom) => \"init\" in atom;\nconst isActuallyWritableAtom = (atom) => !!atom.write;\nconst CONTINUE_PROMISE = Symbol(\n  ( false ? 0 : void 0) !== \"production\" ? \"CONTINUE_PROMISE\" : \"\"\n);\nconst PENDING = \"pending\";\nconst FULFILLED = \"fulfilled\";\nconst REJECTED = \"rejected\";\nconst isContinuablePromise = (promise) => typeof promise === \"object\" && promise !== null && CONTINUE_PROMISE in promise;\nconst continuablePromiseMap = /* @__PURE__ */ new WeakMap();\nconst createContinuablePromise = (promise, abort, complete) => {\n  if (!continuablePromiseMap.has(promise)) {\n    let continuePromise;\n    const p = new Promise((resolve, reject) => {\n      let curr = promise;\n      const onFulfilled = (me) => (v) => {\n        if (curr === me) {\n          p.status = FULFILLED;\n          p.value = v;\n          resolve(v);\n          complete();\n        }\n      };\n      const onRejected = (me) => (e) => {\n        if (curr === me) {\n          p.status = REJECTED;\n          p.reason = e;\n          reject(e);\n          complete();\n        }\n      };\n      promise.then(onFulfilled(promise), onRejected(promise));\n      continuePromise = (nextPromise, nextAbort) => {\n        if (nextPromise) {\n          continuablePromiseMap.set(nextPromise, p);\n          curr = nextPromise;\n          nextPromise.then(onFulfilled(nextPromise), onRejected(nextPromise));\n          abort();\n          abort = nextAbort;\n        }\n      };\n    });\n    p.status = PENDING;\n    p[CONTINUE_PROMISE] = continuePromise;\n    continuablePromiseMap.set(promise, p);\n  }\n  return continuablePromiseMap.get(promise);\n};\nconst isPromiseLike = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nconst isAtomStateInitialized = (atomState) => \"v\" in atomState || \"e\" in atomState;\nconst returnAtomValue = (atomState) => {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  if (( false ? 0 : void 0) !== \"production\" && !(\"v\" in atomState)) {\n    throw new Error(\"[Bug] atom state is not initialized\");\n  }\n  return atomState.v;\n};\nconst getPendingContinuablePromise = (atomState) => {\n  const value = atomState.v;\n  if (isContinuablePromise(value) && value.status === PENDING) {\n    return value;\n  }\n  return null;\n};\nconst addPendingContinuablePromiseToDependency = (atom, promise, dependencyAtomState) => {\n  if (!dependencyAtomState.p.has(atom)) {\n    dependencyAtomState.p.add(atom);\n    promise.then(\n      () => {\n        dependencyAtomState.p.delete(atom);\n      },\n      () => {\n        dependencyAtomState.p.delete(atom);\n      }\n    );\n  }\n};\nconst addDependency = (pending, atom, atomState, a, aState) => {\n  var _a;\n  if (( false ? 0 : void 0) !== \"production\" && a === atom) {\n    throw new Error(\"[Bug] atom cannot depend on itself\");\n  }\n  atomState.d.set(a, aState.n);\n  const continuablePromise = getPendingContinuablePromise(atomState);\n  if (continuablePromise) {\n    addPendingContinuablePromiseToDependency(atom, continuablePromise, aState);\n  }\n  (_a = aState.m) == null ? void 0 : _a.t.add(atom);\n  if (pending) {\n    addPendingDependent(pending, a, atom);\n  }\n};\nconst createPending = () => [/* @__PURE__ */ new Map(), /* @__PURE__ */ new Map(), /* @__PURE__ */ new Set()];\nconst addPendingAtom = (pending, atom, atomState) => {\n  if (!pending[0].has(atom)) {\n    pending[0].set(atom, /* @__PURE__ */ new Set());\n  }\n  pending[1].set(atom, atomState);\n};\nconst addPendingDependent = (pending, atom, dependent) => {\n  const dependents = pending[0].get(atom);\n  if (dependents) {\n    dependents.add(dependent);\n  }\n};\nconst getPendingDependents = (pending, atom) => pending[0].get(atom);\nconst addPendingFunction = (pending, fn) => {\n  pending[2].add(fn);\n};\nconst flushPending = (pending) => {\n  while (pending[1].size || pending[2].size) {\n    pending[0].clear();\n    const atomStates = new Set(pending[1].values());\n    pending[1].clear();\n    const functions = new Set(pending[2]);\n    pending[2].clear();\n    atomStates.forEach((atomState) => {\n      var _a;\n      return (_a = atomState.m) == null ? void 0 : _a.l.forEach((l) => l());\n    });\n    functions.forEach((fn) => fn());\n  }\n};\nconst buildStore = (getAtomState) => {\n  let debugMountedAtoms;\n  if (( false ? 0 : void 0) !== \"production\") {\n    debugMountedAtoms = /* @__PURE__ */ new Set();\n  }\n  const setAtomStateValueOrPromise = (atom, atomState, valueOrPromise, abortPromise = () => {\n  }, completePromise = () => {\n  }) => {\n    const hasPrevValue = \"v\" in atomState;\n    const prevValue = atomState.v;\n    const pendingPromise = getPendingContinuablePromise(atomState);\n    if (isPromiseLike(valueOrPromise)) {\n      if (pendingPromise) {\n        if (pendingPromise !== valueOrPromise) {\n          pendingPromise[CONTINUE_PROMISE](valueOrPromise, abortPromise);\n          ++atomState.n;\n        }\n      } else {\n        const continuablePromise = createContinuablePromise(\n          valueOrPromise,\n          abortPromise,\n          completePromise\n        );\n        if (continuablePromise.status === PENDING) {\n          for (const a of atomState.d.keys()) {\n            addPendingContinuablePromiseToDependency(\n              atom,\n              continuablePromise,\n              getAtomState(a, atomState)\n            );\n          }\n        }\n        atomState.v = continuablePromise;\n        delete atomState.e;\n      }\n    } else {\n      if (pendingPromise) {\n        pendingPromise[CONTINUE_PROMISE](\n          Promise.resolve(valueOrPromise),\n          abortPromise\n        );\n      }\n      atomState.v = valueOrPromise;\n      delete atomState.e;\n    }\n    if (!hasPrevValue || !Object.is(prevValue, atomState.v)) {\n      ++atomState.n;\n    }\n  };\n  const readAtomState = (pending, atom, atomState, force) => {\n    if (!(force == null ? void 0 : force(atom)) && isAtomStateInitialized(atomState)) {\n      if (atomState.m) {\n        return atomState;\n      }\n      if (Array.from(atomState.d).every(\n        ([a, n]) => (\n          // Recursively, read the atom state of the dependency, and\n          // check if the atom epoch number is unchanged\n          readAtomState(pending, a, getAtomState(a, atomState), force).n === n\n        )\n      )) {\n        return atomState;\n      }\n    }\n    atomState.d.clear();\n    let isSync = true;\n    const getter = (a) => {\n      if (isSelfAtom(atom, a)) {\n        const aState2 = getAtomState(a, atomState);\n        if (!isAtomStateInitialized(aState2)) {\n          if (hasInitialValue(a)) {\n            setAtomStateValueOrPromise(a, aState2, a.init);\n          } else {\n            throw new Error(\"no atom init\");\n          }\n        }\n        return returnAtomValue(aState2);\n      }\n      const aState = readAtomState(\n        pending,\n        a,\n        getAtomState(a, atomState),\n        force\n      );\n      if (isSync) {\n        addDependency(pending, atom, atomState, a, aState);\n      } else {\n        const pending2 = createPending();\n        addDependency(pending2, atom, atomState, a, aState);\n        mountDependencies(pending2, atom, atomState);\n        flushPending(pending2);\n      }\n      return returnAtomValue(aState);\n    };\n    let controller;\n    let setSelf;\n    const options = {\n      get signal() {\n        if (!controller) {\n          controller = new AbortController();\n        }\n        return controller.signal;\n      },\n      get setSelf() {\n        if (( false ? 0 : void 0) !== \"production\" && !isActuallyWritableAtom(atom)) {\n          console.warn(\"setSelf function cannot be used with read-only atom\");\n        }\n        if (!setSelf && isActuallyWritableAtom(atom)) {\n          setSelf = (...args) => {\n            if (( false ? 0 : void 0) !== \"production\" && isSync) {\n              console.warn(\"setSelf function cannot be called in sync\");\n            }\n            if (!isSync) {\n              return writeAtom(atom, ...args);\n            }\n          };\n        }\n        return setSelf;\n      }\n    };\n    try {\n      const valueOrPromise = atom.read(getter, options);\n      setAtomStateValueOrPromise(\n        atom,\n        atomState,\n        valueOrPromise,\n        () => controller == null ? void 0 : controller.abort(),\n        () => {\n          if (atomState.m) {\n            const pending2 = createPending();\n            mountDependencies(pending2, atom, atomState);\n            flushPending(pending2);\n          }\n        }\n      );\n      return atomState;\n    } catch (error) {\n      delete atomState.v;\n      atomState.e = error;\n      ++atomState.n;\n      return atomState;\n    } finally {\n      isSync = false;\n    }\n  };\n  const readAtom = (atom) => returnAtomValue(readAtomState(void 0, atom, getAtomState(atom)));\n  const getDependents = (pending, atom, atomState) => {\n    var _a, _b;\n    const dependents = /* @__PURE__ */ new Map();\n    for (const a of ((_a = atomState.m) == null ? void 0 : _a.t) || []) {\n      dependents.set(a, getAtomState(a, atomState));\n    }\n    for (const atomWithPendingContinuablePromise of atomState.p) {\n      dependents.set(\n        atomWithPendingContinuablePromise,\n        getAtomState(atomWithPendingContinuablePromise, atomState)\n      );\n    }\n    (_b = getPendingDependents(pending, atom)) == null ? void 0 : _b.forEach((dependent) => {\n      dependents.set(dependent, getAtomState(dependent, atomState));\n    });\n    return dependents;\n  };\n  const recomputeDependents = (pending, atom, atomState) => {\n    const topsortedAtoms = [];\n    const markedAtoms = /* @__PURE__ */ new Set();\n    const visit = (a, aState) => {\n      if (markedAtoms.has(a)) {\n        return;\n      }\n      markedAtoms.add(a);\n      for (const [d, s] of getDependents(pending, a, aState)) {\n        if (a !== d) {\n          visit(d, s);\n        }\n      }\n      topsortedAtoms.push([a, aState, aState.n]);\n    };\n    visit(atom, atomState);\n    const changedAtoms = /* @__PURE__ */ new Set([atom]);\n    const isMarked = (a) => markedAtoms.has(a);\n    for (let i = topsortedAtoms.length - 1; i >= 0; --i) {\n      const [a, aState, prevEpochNumber] = topsortedAtoms[i];\n      let hasChangedDeps = false;\n      for (const dep of aState.d.keys()) {\n        if (dep !== a && changedAtoms.has(dep)) {\n          hasChangedDeps = true;\n          break;\n        }\n      }\n      if (hasChangedDeps) {\n        readAtomState(pending, a, aState, isMarked);\n        mountDependencies(pending, a, aState);\n        if (prevEpochNumber !== aState.n) {\n          addPendingAtom(pending, a, aState);\n          changedAtoms.add(a);\n        }\n      }\n      markedAtoms.delete(a);\n    }\n  };\n  const writeAtomState = (pending, atom, atomState, ...args) => {\n    const getter = (a) => returnAtomValue(readAtomState(pending, a, getAtomState(a, atomState)));\n    const setter = (a, ...args2) => {\n      const aState = getAtomState(a, atomState);\n      let r;\n      if (isSelfAtom(atom, a)) {\n        if (!hasInitialValue(a)) {\n          throw new Error(\"atom not writable\");\n        }\n        const hasPrevValue = \"v\" in aState;\n        const prevValue = aState.v;\n        const v = args2[0];\n        setAtomStateValueOrPromise(a, aState, v);\n        mountDependencies(pending, a, aState);\n        if (!hasPrevValue || !Object.is(prevValue, aState.v)) {\n          addPendingAtom(pending, a, aState);\n          recomputeDependents(pending, a, aState);\n        }\n      } else {\n        r = writeAtomState(pending, a, aState, ...args2);\n      }\n      flushPending(pending);\n      return r;\n    };\n    const result = atom.write(getter, setter, ...args);\n    return result;\n  };\n  const writeAtom = (atom, ...args) => {\n    const pending = createPending();\n    const result = writeAtomState(pending, atom, getAtomState(atom), ...args);\n    flushPending(pending);\n    return result;\n  };\n  const mountDependencies = (pending, atom, atomState) => {\n    if (atomState.m && !getPendingContinuablePromise(atomState)) {\n      for (const a of atomState.d.keys()) {\n        if (!atomState.m.d.has(a)) {\n          const aMounted = mountAtom(pending, a, getAtomState(a, atomState));\n          aMounted.t.add(atom);\n          atomState.m.d.add(a);\n        }\n      }\n      for (const a of atomState.m.d || []) {\n        if (!atomState.d.has(a)) {\n          atomState.m.d.delete(a);\n          const aMounted = unmountAtom(pending, a, getAtomState(a, atomState));\n          aMounted == null ? void 0 : aMounted.t.delete(atom);\n        }\n      }\n    }\n  };\n  const mountAtom = (pending, atom, atomState) => {\n    if (!atomState.m) {\n      readAtomState(pending, atom, atomState);\n      for (const a of atomState.d.keys()) {\n        const aMounted = mountAtom(pending, a, getAtomState(a, atomState));\n        aMounted.t.add(atom);\n      }\n      atomState.m = {\n        l: /* @__PURE__ */ new Set(),\n        d: new Set(atomState.d.keys()),\n        t: /* @__PURE__ */ new Set()\n      };\n      if (( false ? 0 : void 0) !== \"production\") {\n        debugMountedAtoms.add(atom);\n      }\n      if (isActuallyWritableAtom(atom) && atom.onMount) {\n        const mounted = atomState.m;\n        const { onMount } = atom;\n        addPendingFunction(pending, () => {\n          const onUnmount = onMount(\n            (...args) => writeAtomState(pending, atom, atomState, ...args)\n          );\n          if (onUnmount) {\n            mounted.u = onUnmount;\n          }\n        });\n      }\n    }\n    return atomState.m;\n  };\n  const unmountAtom = (pending, atom, atomState) => {\n    if (atomState.m && !atomState.m.l.size && !Array.from(atomState.m.t).some(\n      (a) => {\n        var _a;\n        return (_a = getAtomState(a, atomState).m) == null ? void 0 : _a.d.has(atom);\n      }\n    )) {\n      const onUnmount = atomState.m.u;\n      if (onUnmount) {\n        addPendingFunction(pending, onUnmount);\n      }\n      delete atomState.m;\n      if (( false ? 0 : void 0) !== \"production\") {\n        debugMountedAtoms.delete(atom);\n      }\n      for (const a of atomState.d.keys()) {\n        const aMounted = unmountAtom(pending, a, getAtomState(a, atomState));\n        aMounted == null ? void 0 : aMounted.t.delete(atom);\n      }\n      const pendingPromise = getPendingContinuablePromise(atomState);\n      if (pendingPromise) {\n        pendingPromise[CONTINUE_PROMISE](void 0, () => {\n        });\n      }\n      return void 0;\n    }\n    return atomState.m;\n  };\n  const subscribeAtom = (atom, listener) => {\n    const pending = createPending();\n    const atomState = getAtomState(atom);\n    const mounted = mountAtom(pending, atom, atomState);\n    flushPending(pending);\n    const listeners = mounted.l;\n    listeners.add(listener);\n    return () => {\n      listeners.delete(listener);\n      const pending2 = createPending();\n      unmountAtom(pending2, atom, atomState);\n      flushPending(pending2);\n    };\n  };\n  const unstable_derive = (fn) => buildStore(...fn(getAtomState));\n  const store = {\n    get: readAtom,\n    set: writeAtom,\n    sub: subscribeAtom,\n    unstable_derive\n  };\n  if (( false ? 0 : void 0) !== \"production\") {\n    const devStore = {\n      // store dev methods (these are tentative and subject to change without notice)\n      dev4_get_internal_weak_map: () => ({\n        get: (atom) => {\n          const atomState = getAtomState(atom);\n          if (atomState.n === 0) {\n            return void 0;\n          }\n          return atomState;\n        }\n      }),\n      dev4_get_mounted_atoms: () => debugMountedAtoms,\n      dev4_restore_atoms: (values) => {\n        const pending = createPending();\n        for (const [atom, value] of values) {\n          if (hasInitialValue(atom)) {\n            const atomState = getAtomState(atom);\n            const hasPrevValue = \"v\" in atomState;\n            const prevValue = atomState.v;\n            setAtomStateValueOrPromise(atom, atomState, value);\n            mountDependencies(pending, atom, atomState);\n            if (!hasPrevValue || !Object.is(prevValue, atomState.v)) {\n              addPendingAtom(pending, atom, atomState);\n              recomputeDependents(pending, atom, atomState);\n            }\n          }\n        }\n        flushPending(pending);\n      }\n    };\n    Object.assign(store, devStore);\n  }\n  return store;\n};\nconst createStore = () => {\n  const atomStateMap = /* @__PURE__ */ new WeakMap();\n  const getAtomState = (atom) => {\n    let atomState = atomStateMap.get(atom);\n    if (!atomState) {\n      atomState = { d: /* @__PURE__ */ new Map(), p: /* @__PURE__ */ new Set(), n: 0 };\n      atomStateMap.set(atom, atomState);\n    }\n    return atomState;\n  };\n  return buildStore(getAtomState);\n};\nlet defaultStore;\nconst getDefaultStore = () => {\n  if (!defaultStore) {\n    defaultStore = createStore();\n    if (( false ? 0 : void 0) !== \"production\") {\n      globalThis.__JOTAI_DEFAULT_STORE__ || (globalThis.__JOTAI_DEFAULT_STORE__ = defaultStore);\n      if (globalThis.__JOTAI_DEFAULT_STORE__ !== defaultStore) {\n        console.warn(\n          \"Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044\"\n        );\n      }\n    }\n  }\n  return defaultStore;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS92YW5pbGxhLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0EscUJBQXFCLFdBQVc7QUFDaEM7QUFDQTtBQUNBLGNBQWMsTUFBZSxHQUFHLENBQW9CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsTUFBZSxHQUFHLENBQW9CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sTUFBZSxHQUFHLENBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sTUFBZSxHQUFHLENBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFlLEdBQUcsQ0FBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsYUFBYSxNQUFlLEdBQUcsQ0FBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBZSxHQUFHLENBQW9CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFlLEdBQUcsQ0FBb0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBZSxHQUFHLENBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFlLEdBQUcsQ0FBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE1BQWUsR0FBRyxDQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWRnaXR5LXlpZWxkLWZyb250ZW5kLy4uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS5tanM/YjljMyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQga2V5Q291bnQgPSAwO1xuZnVuY3Rpb24gYXRvbShyZWFkLCB3cml0ZSkge1xuICBjb25zdCBrZXkgPSBgYXRvbSR7KytrZXlDb3VudH1gO1xuICBjb25zdCBjb25maWcgPSB7XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgdGhpcy5kZWJ1Z0xhYmVsID8ga2V5ICsgXCI6XCIgKyB0aGlzLmRlYnVnTGFiZWwgOiBrZXk7XG4gICAgfVxuICB9O1xuICBpZiAodHlwZW9mIHJlYWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGNvbmZpZy5yZWFkID0gcmVhZDtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcuaW5pdCA9IHJlYWQ7XG4gICAgY29uZmlnLnJlYWQgPSBkZWZhdWx0UmVhZDtcbiAgICBjb25maWcud3JpdGUgPSBkZWZhdWx0V3JpdGU7XG4gIH1cbiAgaWYgKHdyaXRlKSB7XG4gICAgY29uZmlnLndyaXRlID0gd3JpdGU7XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cbmZ1bmN0aW9uIGRlZmF1bHRSZWFkKGdldCkge1xuICByZXR1cm4gZ2V0KHRoaXMpO1xufVxuZnVuY3Rpb24gZGVmYXVsdFdyaXRlKGdldCwgc2V0LCBhcmcpIHtcbiAgcmV0dXJuIHNldChcbiAgICB0aGlzLFxuICAgIHR5cGVvZiBhcmcgPT09IFwiZnVuY3Rpb25cIiA/IGFyZyhnZXQodGhpcykpIDogYXJnXG4gICk7XG59XG5cbmNvbnN0IGlzU2VsZkF0b20gPSAoYXRvbSwgYSkgPT4gYXRvbS51bnN0YWJsZV9pcyA/IGF0b20udW5zdGFibGVfaXMoYSkgOiBhID09PSBhdG9tO1xuY29uc3QgaGFzSW5pdGlhbFZhbHVlID0gKGF0b20pID0+IFwiaW5pdFwiIGluIGF0b207XG5jb25zdCBpc0FjdHVhbGx5V3JpdGFibGVBdG9tID0gKGF0b20pID0+ICEhYXRvbS53cml0ZTtcbmNvbnN0IENPTlRJTlVFX1BST01JU0UgPSBTeW1ib2woXG4gIChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiID8gXCJDT05USU5VRV9QUk9NSVNFXCIgOiBcIlwiXG4pO1xuY29uc3QgUEVORElORyA9IFwicGVuZGluZ1wiO1xuY29uc3QgRlVMRklMTEVEID0gXCJmdWxmaWxsZWRcIjtcbmNvbnN0IFJFSkVDVEVEID0gXCJyZWplY3RlZFwiO1xuY29uc3QgaXNDb250aW51YWJsZVByb21pc2UgPSAocHJvbWlzZSkgPT4gdHlwZW9mIHByb21pc2UgPT09IFwib2JqZWN0XCIgJiYgcHJvbWlzZSAhPT0gbnVsbCAmJiBDT05USU5VRV9QUk9NSVNFIGluIHByb21pc2U7XG5jb25zdCBjb250aW51YWJsZVByb21pc2VNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IGNyZWF0ZUNvbnRpbnVhYmxlUHJvbWlzZSA9IChwcm9taXNlLCBhYm9ydCwgY29tcGxldGUpID0+IHtcbiAgaWYgKCFjb250aW51YWJsZVByb21pc2VNYXAuaGFzKHByb21pc2UpKSB7XG4gICAgbGV0IGNvbnRpbnVlUHJvbWlzZTtcbiAgICBjb25zdCBwID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGN1cnIgPSBwcm9taXNlO1xuICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSAobWUpID0+ICh2KSA9PiB7XG4gICAgICAgIGlmIChjdXJyID09PSBtZSkge1xuICAgICAgICAgIHAuc3RhdHVzID0gRlVMRklMTEVEO1xuICAgICAgICAgIHAudmFsdWUgPSB2O1xuICAgICAgICAgIHJlc29sdmUodik7XG4gICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IG9uUmVqZWN0ZWQgPSAobWUpID0+IChlKSA9PiB7XG4gICAgICAgIGlmIChjdXJyID09PSBtZSkge1xuICAgICAgICAgIHAuc3RhdHVzID0gUkVKRUNURUQ7XG4gICAgICAgICAgcC5yZWFzb24gPSBlO1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcHJvbWlzZS50aGVuKG9uRnVsZmlsbGVkKHByb21pc2UpLCBvblJlamVjdGVkKHByb21pc2UpKTtcbiAgICAgIGNvbnRpbnVlUHJvbWlzZSA9IChuZXh0UHJvbWlzZSwgbmV4dEFib3J0KSA9PiB7XG4gICAgICAgIGlmIChuZXh0UHJvbWlzZSkge1xuICAgICAgICAgIGNvbnRpbnVhYmxlUHJvbWlzZU1hcC5zZXQobmV4dFByb21pc2UsIHApO1xuICAgICAgICAgIGN1cnIgPSBuZXh0UHJvbWlzZTtcbiAgICAgICAgICBuZXh0UHJvbWlzZS50aGVuKG9uRnVsZmlsbGVkKG5leHRQcm9taXNlKSwgb25SZWplY3RlZChuZXh0UHJvbWlzZSkpO1xuICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgYWJvcnQgPSBuZXh0QWJvcnQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gICAgcC5zdGF0dXMgPSBQRU5ESU5HO1xuICAgIHBbQ09OVElOVUVfUFJPTUlTRV0gPSBjb250aW51ZVByb21pc2U7XG4gICAgY29udGludWFibGVQcm9taXNlTWFwLnNldChwcm9taXNlLCBwKTtcbiAgfVxuICByZXR1cm4gY29udGludWFibGVQcm9taXNlTWFwLmdldChwcm9taXNlKTtcbn07XG5jb25zdCBpc1Byb21pc2VMaWtlID0gKHgpID0+IHR5cGVvZiAoeCA9PSBudWxsID8gdm9pZCAwIDogeC50aGVuKSA9PT0gXCJmdW5jdGlvblwiO1xuY29uc3QgaXNBdG9tU3RhdGVJbml0aWFsaXplZCA9IChhdG9tU3RhdGUpID0+IFwidlwiIGluIGF0b21TdGF0ZSB8fCBcImVcIiBpbiBhdG9tU3RhdGU7XG5jb25zdCByZXR1cm5BdG9tVmFsdWUgPSAoYXRvbVN0YXRlKSA9PiB7XG4gIGlmIChcImVcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICB0aHJvdyBhdG9tU3RhdGUuZTtcbiAgfVxuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIShcInZcIiBpbiBhdG9tU3RhdGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiW0J1Z10gYXRvbSBzdGF0ZSBpcyBub3QgaW5pdGlhbGl6ZWRcIik7XG4gIH1cbiAgcmV0dXJuIGF0b21TdGF0ZS52O1xufTtcbmNvbnN0IGdldFBlbmRpbmdDb250aW51YWJsZVByb21pc2UgPSAoYXRvbVN0YXRlKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gYXRvbVN0YXRlLnY7XG4gIGlmIChpc0NvbnRpbnVhYmxlUHJvbWlzZSh2YWx1ZSkgJiYgdmFsdWUuc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcbmNvbnN0IGFkZFBlbmRpbmdDb250aW51YWJsZVByb21pc2VUb0RlcGVuZGVuY3kgPSAoYXRvbSwgcHJvbWlzZSwgZGVwZW5kZW5jeUF0b21TdGF0ZSkgPT4ge1xuICBpZiAoIWRlcGVuZGVuY3lBdG9tU3RhdGUucC5oYXMoYXRvbSkpIHtcbiAgICBkZXBlbmRlbmN5QXRvbVN0YXRlLnAuYWRkKGF0b20pO1xuICAgIHByb21pc2UudGhlbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgZGVwZW5kZW5jeUF0b21TdGF0ZS5wLmRlbGV0ZShhdG9tKTtcbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRlcGVuZGVuY3lBdG9tU3RhdGUucC5kZWxldGUoYXRvbSk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxufTtcbmNvbnN0IGFkZERlcGVuZGVuY3kgPSAocGVuZGluZywgYXRvbSwgYXRvbVN0YXRlLCBhLCBhU3RhdGUpID0+IHtcbiAgdmFyIF9hO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgYSA9PT0gYXRvbSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIltCdWddIGF0b20gY2Fubm90IGRlcGVuZCBvbiBpdHNlbGZcIik7XG4gIH1cbiAgYXRvbVN0YXRlLmQuc2V0KGEsIGFTdGF0ZS5uKTtcbiAgY29uc3QgY29udGludWFibGVQcm9taXNlID0gZ2V0UGVuZGluZ0NvbnRpbnVhYmxlUHJvbWlzZShhdG9tU3RhdGUpO1xuICBpZiAoY29udGludWFibGVQcm9taXNlKSB7XG4gICAgYWRkUGVuZGluZ0NvbnRpbnVhYmxlUHJvbWlzZVRvRGVwZW5kZW5jeShhdG9tLCBjb250aW51YWJsZVByb21pc2UsIGFTdGF0ZSk7XG4gIH1cbiAgKF9hID0gYVN0YXRlLm0pID09IG51bGwgPyB2b2lkIDAgOiBfYS50LmFkZChhdG9tKTtcbiAgaWYgKHBlbmRpbmcpIHtcbiAgICBhZGRQZW5kaW5nRGVwZW5kZW50KHBlbmRpbmcsIGEsIGF0b20pO1xuICB9XG59O1xuY29uc3QgY3JlYXRlUGVuZGluZyA9ICgpID0+IFsvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXTtcbmNvbnN0IGFkZFBlbmRpbmdBdG9tID0gKHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSkgPT4ge1xuICBpZiAoIXBlbmRpbmdbMF0uaGFzKGF0b20pKSB7XG4gICAgcGVuZGluZ1swXS5zZXQoYXRvbSwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gIH1cbiAgcGVuZGluZ1sxXS5zZXQoYXRvbSwgYXRvbVN0YXRlKTtcbn07XG5jb25zdCBhZGRQZW5kaW5nRGVwZW5kZW50ID0gKHBlbmRpbmcsIGF0b20sIGRlcGVuZGVudCkgPT4ge1xuICBjb25zdCBkZXBlbmRlbnRzID0gcGVuZGluZ1swXS5nZXQoYXRvbSk7XG4gIGlmIChkZXBlbmRlbnRzKSB7XG4gICAgZGVwZW5kZW50cy5hZGQoZGVwZW5kZW50KTtcbiAgfVxufTtcbmNvbnN0IGdldFBlbmRpbmdEZXBlbmRlbnRzID0gKHBlbmRpbmcsIGF0b20pID0+IHBlbmRpbmdbMF0uZ2V0KGF0b20pO1xuY29uc3QgYWRkUGVuZGluZ0Z1bmN0aW9uID0gKHBlbmRpbmcsIGZuKSA9PiB7XG4gIHBlbmRpbmdbMl0uYWRkKGZuKTtcbn07XG5jb25zdCBmbHVzaFBlbmRpbmcgPSAocGVuZGluZykgPT4ge1xuICB3aGlsZSAocGVuZGluZ1sxXS5zaXplIHx8IHBlbmRpbmdbMl0uc2l6ZSkge1xuICAgIHBlbmRpbmdbMF0uY2xlYXIoKTtcbiAgICBjb25zdCBhdG9tU3RhdGVzID0gbmV3IFNldChwZW5kaW5nWzFdLnZhbHVlcygpKTtcbiAgICBwZW5kaW5nWzFdLmNsZWFyKCk7XG4gICAgY29uc3QgZnVuY3Rpb25zID0gbmV3IFNldChwZW5kaW5nWzJdKTtcbiAgICBwZW5kaW5nWzJdLmNsZWFyKCk7XG4gICAgYXRvbVN0YXRlcy5mb3JFYWNoKChhdG9tU3RhdGUpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiAoX2EgPSBhdG9tU3RhdGUubSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmwuZm9yRWFjaCgobCkgPT4gbCgpKTtcbiAgICB9KTtcbiAgICBmdW5jdGlvbnMuZm9yRWFjaCgoZm4pID0+IGZuKCkpO1xuICB9XG59O1xuY29uc3QgYnVpbGRTdG9yZSA9IChnZXRBdG9tU3RhdGUpID0+IHtcbiAgbGV0IGRlYnVnTW91bnRlZEF0b21zO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBkZWJ1Z01vdW50ZWRBdG9tcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIH1cbiAgY29uc3Qgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2UgPSAoYXRvbSwgYXRvbVN0YXRlLCB2YWx1ZU9yUHJvbWlzZSwgYWJvcnRQcm9taXNlID0gKCkgPT4ge1xuICB9LCBjb21wbGV0ZVByb21pc2UgPSAoKSA9PiB7XG4gIH0pID0+IHtcbiAgICBjb25zdCBoYXNQcmV2VmFsdWUgPSBcInZcIiBpbiBhdG9tU3RhdGU7XG4gICAgY29uc3QgcHJldlZhbHVlID0gYXRvbVN0YXRlLnY7XG4gICAgY29uc3QgcGVuZGluZ1Byb21pc2UgPSBnZXRQZW5kaW5nQ29udGludWFibGVQcm9taXNlKGF0b21TdGF0ZSk7XG4gICAgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWVPclByb21pc2UpKSB7XG4gICAgICBpZiAocGVuZGluZ1Byb21pc2UpIHtcbiAgICAgICAgaWYgKHBlbmRpbmdQcm9taXNlICE9PSB2YWx1ZU9yUHJvbWlzZSkge1xuICAgICAgICAgIHBlbmRpbmdQcm9taXNlW0NPTlRJTlVFX1BST01JU0VdKHZhbHVlT3JQcm9taXNlLCBhYm9ydFByb21pc2UpO1xuICAgICAgICAgICsrYXRvbVN0YXRlLm47XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvbnRpbnVhYmxlUHJvbWlzZSA9IGNyZWF0ZUNvbnRpbnVhYmxlUHJvbWlzZShcbiAgICAgICAgICB2YWx1ZU9yUHJvbWlzZSxcbiAgICAgICAgICBhYm9ydFByb21pc2UsXG4gICAgICAgICAgY29tcGxldGVQcm9taXNlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjb250aW51YWJsZVByb21pc2Uuc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBhIG9mIGF0b21TdGF0ZS5kLmtleXMoKSkge1xuICAgICAgICAgICAgYWRkUGVuZGluZ0NvbnRpbnVhYmxlUHJvbWlzZVRvRGVwZW5kZW5jeShcbiAgICAgICAgICAgICAgYXRvbSxcbiAgICAgICAgICAgICAgY29udGludWFibGVQcm9taXNlLFxuICAgICAgICAgICAgICBnZXRBdG9tU3RhdGUoYSwgYXRvbVN0YXRlKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXRvbVN0YXRlLnYgPSBjb250aW51YWJsZVByb21pc2U7XG4gICAgICAgIGRlbGV0ZSBhdG9tU3RhdGUuZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBlbmRpbmdQcm9taXNlKSB7XG4gICAgICAgIHBlbmRpbmdQcm9taXNlW0NPTlRJTlVFX1BST01JU0VdKFxuICAgICAgICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZU9yUHJvbWlzZSksXG4gICAgICAgICAgYWJvcnRQcm9taXNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBhdG9tU3RhdGUudiA9IHZhbHVlT3JQcm9taXNlO1xuICAgICAgZGVsZXRlIGF0b21TdGF0ZS5lO1xuICAgIH1cbiAgICBpZiAoIWhhc1ByZXZWYWx1ZSB8fCAhT2JqZWN0LmlzKHByZXZWYWx1ZSwgYXRvbVN0YXRlLnYpKSB7XG4gICAgICArK2F0b21TdGF0ZS5uO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVhZEF0b21TdGF0ZSA9IChwZW5kaW5nLCBhdG9tLCBhdG9tU3RhdGUsIGZvcmNlKSA9PiB7XG4gICAgaWYgKCEoZm9yY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGZvcmNlKGF0b20pKSAmJiBpc0F0b21TdGF0ZUluaXRpYWxpemVkKGF0b21TdGF0ZSkpIHtcbiAgICAgIGlmIChhdG9tU3RhdGUubSkge1xuICAgICAgICByZXR1cm4gYXRvbVN0YXRlO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmZyb20oYXRvbVN0YXRlLmQpLmV2ZXJ5KFxuICAgICAgICAoW2EsIG5dKSA9PiAoXG4gICAgICAgICAgLy8gUmVjdXJzaXZlbHksIHJlYWQgdGhlIGF0b20gc3RhdGUgb2YgdGhlIGRlcGVuZGVuY3ksIGFuZFxuICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBhdG9tIGVwb2NoIG51bWJlciBpcyB1bmNoYW5nZWRcbiAgICAgICAgICByZWFkQXRvbVN0YXRlKHBlbmRpbmcsIGEsIGdldEF0b21TdGF0ZShhLCBhdG9tU3RhdGUpLCBmb3JjZSkubiA9PT0gblxuICAgICAgICApXG4gICAgICApKSB7XG4gICAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgICB9XG4gICAgfVxuICAgIGF0b21TdGF0ZS5kLmNsZWFyKCk7XG4gICAgbGV0IGlzU3luYyA9IHRydWU7XG4gICAgY29uc3QgZ2V0dGVyID0gKGEpID0+IHtcbiAgICAgIGlmIChpc1NlbGZBdG9tKGF0b20sIGEpKSB7XG4gICAgICAgIGNvbnN0IGFTdGF0ZTIgPSBnZXRBdG9tU3RhdGUoYSwgYXRvbVN0YXRlKTtcbiAgICAgICAgaWYgKCFpc0F0b21TdGF0ZUluaXRpYWxpemVkKGFTdGF0ZTIpKSB7XG4gICAgICAgICAgaWYgKGhhc0luaXRpYWxWYWx1ZShhKSkge1xuICAgICAgICAgICAgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2UoYSwgYVN0YXRlMiwgYS5pbml0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm8gYXRvbSBpbml0XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0dXJuQXRvbVZhbHVlKGFTdGF0ZTIpO1xuICAgICAgfVxuICAgICAgY29uc3QgYVN0YXRlID0gcmVhZEF0b21TdGF0ZShcbiAgICAgICAgcGVuZGluZyxcbiAgICAgICAgYSxcbiAgICAgICAgZ2V0QXRvbVN0YXRlKGEsIGF0b21TdGF0ZSksXG4gICAgICAgIGZvcmNlXG4gICAgICApO1xuICAgICAgaWYgKGlzU3luYykge1xuICAgICAgICBhZGREZXBlbmRlbmN5KHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSwgYSwgYVN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBlbmRpbmcyID0gY3JlYXRlUGVuZGluZygpO1xuICAgICAgICBhZGREZXBlbmRlbmN5KHBlbmRpbmcyLCBhdG9tLCBhdG9tU3RhdGUsIGEsIGFTdGF0ZSk7XG4gICAgICAgIG1vdW50RGVwZW5kZW5jaWVzKHBlbmRpbmcyLCBhdG9tLCBhdG9tU3RhdGUpO1xuICAgICAgICBmbHVzaFBlbmRpbmcocGVuZGluZzIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldHVybkF0b21WYWx1ZShhU3RhdGUpO1xuICAgIH07XG4gICAgbGV0IGNvbnRyb2xsZXI7XG4gICAgbGV0IHNldFNlbGY7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGdldCBzaWduYWwoKSB7XG4gICAgICAgIGlmICghY29udHJvbGxlcikge1xuICAgICAgICAgIGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuc2lnbmFsO1xuICAgICAgfSxcbiAgICAgIGdldCBzZXRTZWxmKCkge1xuICAgICAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIWlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJzZXRTZWxmIGZ1bmN0aW9uIGNhbm5vdCBiZSB1c2VkIHdpdGggcmVhZC1vbmx5IGF0b21cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZXRTZWxmICYmIGlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkpIHtcbiAgICAgICAgICBzZXRTZWxmID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiAmJiBpc1N5bmMpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwic2V0U2VsZiBmdW5jdGlvbiBjYW5ub3QgYmUgY2FsbGVkIGluIHN5bmNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzU3luYykge1xuICAgICAgICAgICAgICByZXR1cm4gd3JpdGVBdG9tKGF0b20sIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldFNlbGY7XG4gICAgICB9XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFsdWVPclByb21pc2UgPSBhdG9tLnJlYWQoZ2V0dGVyLCBvcHRpb25zKTtcbiAgICAgIHNldEF0b21TdGF0ZVZhbHVlT3JQcm9taXNlKFxuICAgICAgICBhdG9tLFxuICAgICAgICBhdG9tU3RhdGUsXG4gICAgICAgIHZhbHVlT3JQcm9taXNlLFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyID09IG51bGwgPyB2b2lkIDAgOiBjb250cm9sbGVyLmFib3J0KCksXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBpZiAoYXRvbVN0YXRlLm0pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmcyID0gY3JlYXRlUGVuZGluZygpO1xuICAgICAgICAgICAgbW91bnREZXBlbmRlbmNpZXMocGVuZGluZzIsIGF0b20sIGF0b21TdGF0ZSk7XG4gICAgICAgICAgICBmbHVzaFBlbmRpbmcocGVuZGluZzIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlbGV0ZSBhdG9tU3RhdGUudjtcbiAgICAgIGF0b21TdGF0ZS5lID0gZXJyb3I7XG4gICAgICArK2F0b21TdGF0ZS5uO1xuICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNTeW5jID0gZmFsc2U7XG4gICAgfVxuICB9O1xuICBjb25zdCByZWFkQXRvbSA9IChhdG9tKSA9PiByZXR1cm5BdG9tVmFsdWUocmVhZEF0b21TdGF0ZSh2b2lkIDAsIGF0b20sIGdldEF0b21TdGF0ZShhdG9tKSkpO1xuICBjb25zdCBnZXREZXBlbmRlbnRzID0gKHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgZGVwZW5kZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBhIG9mICgoX2EgPSBhdG9tU3RhdGUubSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnQpIHx8IFtdKSB7XG4gICAgICBkZXBlbmRlbnRzLnNldChhLCBnZXRBdG9tU3RhdGUoYSwgYXRvbVN0YXRlKSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYXRvbVdpdGhQZW5kaW5nQ29udGludWFibGVQcm9taXNlIG9mIGF0b21TdGF0ZS5wKSB7XG4gICAgICBkZXBlbmRlbnRzLnNldChcbiAgICAgICAgYXRvbVdpdGhQZW5kaW5nQ29udGludWFibGVQcm9taXNlLFxuICAgICAgICBnZXRBdG9tU3RhdGUoYXRvbVdpdGhQZW5kaW5nQ29udGludWFibGVQcm9taXNlLCBhdG9tU3RhdGUpXG4gICAgICApO1xuICAgIH1cbiAgICAoX2IgPSBnZXRQZW5kaW5nRGVwZW5kZW50cyhwZW5kaW5nLCBhdG9tKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmZvckVhY2goKGRlcGVuZGVudCkgPT4ge1xuICAgICAgZGVwZW5kZW50cy5zZXQoZGVwZW5kZW50LCBnZXRBdG9tU3RhdGUoZGVwZW5kZW50LCBhdG9tU3RhdGUpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVwZW5kZW50cztcbiAgfTtcbiAgY29uc3QgcmVjb21wdXRlRGVwZW5kZW50cyA9IChwZW5kaW5nLCBhdG9tLCBhdG9tU3RhdGUpID0+IHtcbiAgICBjb25zdCB0b3Bzb3J0ZWRBdG9tcyA9IFtdO1xuICAgIGNvbnN0IG1hcmtlZEF0b21zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBjb25zdCB2aXNpdCA9IChhLCBhU3RhdGUpID0+IHtcbiAgICAgIGlmIChtYXJrZWRBdG9tcy5oYXMoYSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbWFya2VkQXRvbXMuYWRkKGEpO1xuICAgICAgZm9yIChjb25zdCBbZCwgc10gb2YgZ2V0RGVwZW5kZW50cyhwZW5kaW5nLCBhLCBhU3RhdGUpKSB7XG4gICAgICAgIGlmIChhICE9PSBkKSB7XG4gICAgICAgICAgdmlzaXQoZCwgcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRvcHNvcnRlZEF0b21zLnB1c2goW2EsIGFTdGF0ZSwgYVN0YXRlLm5dKTtcbiAgICB9O1xuICAgIHZpc2l0KGF0b20sIGF0b21TdGF0ZSk7XG4gICAgY29uc3QgY2hhbmdlZEF0b21zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW2F0b21dKTtcbiAgICBjb25zdCBpc01hcmtlZCA9IChhKSA9PiBtYXJrZWRBdG9tcy5oYXMoYSk7XG4gICAgZm9yIChsZXQgaSA9IHRvcHNvcnRlZEF0b21zLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBjb25zdCBbYSwgYVN0YXRlLCBwcmV2RXBvY2hOdW1iZXJdID0gdG9wc29ydGVkQXRvbXNbaV07XG4gICAgICBsZXQgaGFzQ2hhbmdlZERlcHMgPSBmYWxzZTtcbiAgICAgIGZvciAoY29uc3QgZGVwIG9mIGFTdGF0ZS5kLmtleXMoKSkge1xuICAgICAgICBpZiAoZGVwICE9PSBhICYmIGNoYW5nZWRBdG9tcy5oYXMoZGVwKSkge1xuICAgICAgICAgIGhhc0NoYW5nZWREZXBzID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGhhc0NoYW5nZWREZXBzKSB7XG4gICAgICAgIHJlYWRBdG9tU3RhdGUocGVuZGluZywgYSwgYVN0YXRlLCBpc01hcmtlZCk7XG4gICAgICAgIG1vdW50RGVwZW5kZW5jaWVzKHBlbmRpbmcsIGEsIGFTdGF0ZSk7XG4gICAgICAgIGlmIChwcmV2RXBvY2hOdW1iZXIgIT09IGFTdGF0ZS5uKSB7XG4gICAgICAgICAgYWRkUGVuZGluZ0F0b20ocGVuZGluZywgYSwgYVN0YXRlKTtcbiAgICAgICAgICBjaGFuZ2VkQXRvbXMuYWRkKGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBtYXJrZWRBdG9tcy5kZWxldGUoYSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB3cml0ZUF0b21TdGF0ZSA9IChwZW5kaW5nLCBhdG9tLCBhdG9tU3RhdGUsIC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBnZXR0ZXIgPSAoYSkgPT4gcmV0dXJuQXRvbVZhbHVlKHJlYWRBdG9tU3RhdGUocGVuZGluZywgYSwgZ2V0QXRvbVN0YXRlKGEsIGF0b21TdGF0ZSkpKTtcbiAgICBjb25zdCBzZXR0ZXIgPSAoYSwgLi4uYXJnczIpID0+IHtcbiAgICAgIGNvbnN0IGFTdGF0ZSA9IGdldEF0b21TdGF0ZShhLCBhdG9tU3RhdGUpO1xuICAgICAgbGV0IHI7XG4gICAgICBpZiAoaXNTZWxmQXRvbShhdG9tLCBhKSkge1xuICAgICAgICBpZiAoIWhhc0luaXRpYWxWYWx1ZShhKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImF0b20gbm90IHdyaXRhYmxlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc1ByZXZWYWx1ZSA9IFwidlwiIGluIGFTdGF0ZTtcbiAgICAgICAgY29uc3QgcHJldlZhbHVlID0gYVN0YXRlLnY7XG4gICAgICAgIGNvbnN0IHYgPSBhcmdzMlswXTtcbiAgICAgICAgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2UoYSwgYVN0YXRlLCB2KTtcbiAgICAgICAgbW91bnREZXBlbmRlbmNpZXMocGVuZGluZywgYSwgYVN0YXRlKTtcbiAgICAgICAgaWYgKCFoYXNQcmV2VmFsdWUgfHwgIU9iamVjdC5pcyhwcmV2VmFsdWUsIGFTdGF0ZS52KSkge1xuICAgICAgICAgIGFkZFBlbmRpbmdBdG9tKHBlbmRpbmcsIGEsIGFTdGF0ZSk7XG4gICAgICAgICAgcmVjb21wdXRlRGVwZW5kZW50cyhwZW5kaW5nLCBhLCBhU3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByID0gd3JpdGVBdG9tU3RhdGUocGVuZGluZywgYSwgYVN0YXRlLCAuLi5hcmdzMik7XG4gICAgICB9XG4gICAgICBmbHVzaFBlbmRpbmcocGVuZGluZyk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuICAgIGNvbnN0IHJlc3VsdCA9IGF0b20ud3JpdGUoZ2V0dGVyLCBzZXR0ZXIsIC4uLmFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGNvbnN0IHdyaXRlQXRvbSA9IChhdG9tLCAuLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgcGVuZGluZyA9IGNyZWF0ZVBlbmRpbmcoKTtcbiAgICBjb25zdCByZXN1bHQgPSB3cml0ZUF0b21TdGF0ZShwZW5kaW5nLCBhdG9tLCBnZXRBdG9tU3RhdGUoYXRvbSksIC4uLmFyZ3MpO1xuICAgIGZsdXNoUGVuZGluZyhwZW5kaW5nKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBjb25zdCBtb3VudERlcGVuZGVuY2llcyA9IChwZW5kaW5nLCBhdG9tLCBhdG9tU3RhdGUpID0+IHtcbiAgICBpZiAoYXRvbVN0YXRlLm0gJiYgIWdldFBlbmRpbmdDb250aW51YWJsZVByb21pc2UoYXRvbVN0YXRlKSkge1xuICAgICAgZm9yIChjb25zdCBhIG9mIGF0b21TdGF0ZS5kLmtleXMoKSkge1xuICAgICAgICBpZiAoIWF0b21TdGF0ZS5tLmQuaGFzKGEpKSB7XG4gICAgICAgICAgY29uc3QgYU1vdW50ZWQgPSBtb3VudEF0b20ocGVuZGluZywgYSwgZ2V0QXRvbVN0YXRlKGEsIGF0b21TdGF0ZSkpO1xuICAgICAgICAgIGFNb3VudGVkLnQuYWRkKGF0b20pO1xuICAgICAgICAgIGF0b21TdGF0ZS5tLmQuYWRkKGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgYXRvbVN0YXRlLm0uZCB8fCBbXSkge1xuICAgICAgICBpZiAoIWF0b21TdGF0ZS5kLmhhcyhhKSkge1xuICAgICAgICAgIGF0b21TdGF0ZS5tLmQuZGVsZXRlKGEpO1xuICAgICAgICAgIGNvbnN0IGFNb3VudGVkID0gdW5tb3VudEF0b20ocGVuZGluZywgYSwgZ2V0QXRvbVN0YXRlKGEsIGF0b21TdGF0ZSkpO1xuICAgICAgICAgIGFNb3VudGVkID09IG51bGwgPyB2b2lkIDAgOiBhTW91bnRlZC50LmRlbGV0ZShhdG9tKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRBdG9tID0gKHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSkgPT4ge1xuICAgIGlmICghYXRvbVN0YXRlLm0pIHtcbiAgICAgIHJlYWRBdG9tU3RhdGUocGVuZGluZywgYXRvbSwgYXRvbVN0YXRlKTtcbiAgICAgIGZvciAoY29uc3QgYSBvZiBhdG9tU3RhdGUuZC5rZXlzKCkpIHtcbiAgICAgICAgY29uc3QgYU1vdW50ZWQgPSBtb3VudEF0b20ocGVuZGluZywgYSwgZ2V0QXRvbVN0YXRlKGEsIGF0b21TdGF0ZSkpO1xuICAgICAgICBhTW91bnRlZC50LmFkZChhdG9tKTtcbiAgICAgIH1cbiAgICAgIGF0b21TdGF0ZS5tID0ge1xuICAgICAgICBsOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLFxuICAgICAgICBkOiBuZXcgU2V0KGF0b21TdGF0ZS5kLmtleXMoKSksXG4gICAgICAgIHQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KClcbiAgICAgIH07XG4gICAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgZGVidWdNb3VudGVkQXRvbXMuYWRkKGF0b20pO1xuICAgICAgfVxuICAgICAgaWYgKGlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkgJiYgYXRvbS5vbk1vdW50KSB7XG4gICAgICAgIGNvbnN0IG1vdW50ZWQgPSBhdG9tU3RhdGUubTtcbiAgICAgICAgY29uc3QgeyBvbk1vdW50IH0gPSBhdG9tO1xuICAgICAgICBhZGRQZW5kaW5nRnVuY3Rpb24ocGVuZGluZywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9uVW5tb3VudCA9IG9uTW91bnQoXG4gICAgICAgICAgICAoLi4uYXJncykgPT4gd3JpdGVBdG9tU3RhdGUocGVuZGluZywgYXRvbSwgYXRvbVN0YXRlLCAuLi5hcmdzKVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKG9uVW5tb3VudCkge1xuICAgICAgICAgICAgbW91bnRlZC51ID0gb25Vbm1vdW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhdG9tU3RhdGUubTtcbiAgfTtcbiAgY29uc3QgdW5tb3VudEF0b20gPSAocGVuZGluZywgYXRvbSwgYXRvbVN0YXRlKSA9PiB7XG4gICAgaWYgKGF0b21TdGF0ZS5tICYmICFhdG9tU3RhdGUubS5sLnNpemUgJiYgIUFycmF5LmZyb20oYXRvbVN0YXRlLm0udCkuc29tZShcbiAgICAgIChhKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IGdldEF0b21TdGF0ZShhLCBhdG9tU3RhdGUpLm0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5kLmhhcyhhdG9tKTtcbiAgICAgIH1cbiAgICApKSB7XG4gICAgICBjb25zdCBvblVubW91bnQgPSBhdG9tU3RhdGUubS51O1xuICAgICAgaWYgKG9uVW5tb3VudCkge1xuICAgICAgICBhZGRQZW5kaW5nRnVuY3Rpb24ocGVuZGluZywgb25Vbm1vdW50KTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBhdG9tU3RhdGUubTtcbiAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBkZWJ1Z01vdW50ZWRBdG9tcy5kZWxldGUoYXRvbSk7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgYXRvbVN0YXRlLmQua2V5cygpKSB7XG4gICAgICAgIGNvbnN0IGFNb3VudGVkID0gdW5tb3VudEF0b20ocGVuZGluZywgYSwgZ2V0QXRvbVN0YXRlKGEsIGF0b21TdGF0ZSkpO1xuICAgICAgICBhTW91bnRlZCA9PSBudWxsID8gdm9pZCAwIDogYU1vdW50ZWQudC5kZWxldGUoYXRvbSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwZW5kaW5nUHJvbWlzZSA9IGdldFBlbmRpbmdDb250aW51YWJsZVByb21pc2UoYXRvbVN0YXRlKTtcbiAgICAgIGlmIChwZW5kaW5nUHJvbWlzZSkge1xuICAgICAgICBwZW5kaW5nUHJvbWlzZVtDT05USU5VRV9QUk9NSVNFXSh2b2lkIDAsICgpID0+IHtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gYXRvbVN0YXRlLm07XG4gIH07XG4gIGNvbnN0IHN1YnNjcmliZUF0b20gPSAoYXRvbSwgbGlzdGVuZXIpID0+IHtcbiAgICBjb25zdCBwZW5kaW5nID0gY3JlYXRlUGVuZGluZygpO1xuICAgIGNvbnN0IGF0b21TdGF0ZSA9IGdldEF0b21TdGF0ZShhdG9tKTtcbiAgICBjb25zdCBtb3VudGVkID0gbW91bnRBdG9tKHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSk7XG4gICAgZmx1c2hQZW5kaW5nKHBlbmRpbmcpO1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IG1vdW50ZWQubDtcbiAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgICBjb25zdCBwZW5kaW5nMiA9IGNyZWF0ZVBlbmRpbmcoKTtcbiAgICAgIHVubW91bnRBdG9tKHBlbmRpbmcyLCBhdG9tLCBhdG9tU3RhdGUpO1xuICAgICAgZmx1c2hQZW5kaW5nKHBlbmRpbmcyKTtcbiAgICB9O1xuICB9O1xuICBjb25zdCB1bnN0YWJsZV9kZXJpdmUgPSAoZm4pID0+IGJ1aWxkU3RvcmUoLi4uZm4oZ2V0QXRvbVN0YXRlKSk7XG4gIGNvbnN0IHN0b3JlID0ge1xuICAgIGdldDogcmVhZEF0b20sXG4gICAgc2V0OiB3cml0ZUF0b20sXG4gICAgc3ViOiBzdWJzY3JpYmVBdG9tLFxuICAgIHVuc3RhYmxlX2Rlcml2ZVxuICB9O1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zdCBkZXZTdG9yZSA9IHtcbiAgICAgIC8vIHN0b3JlIGRldiBtZXRob2RzICh0aGVzZSBhcmUgdGVudGF0aXZlIGFuZCBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZSlcbiAgICAgIGRldjRfZ2V0X2ludGVybmFsX3dlYWtfbWFwOiAoKSA9PiAoe1xuICAgICAgICBnZXQ6IChhdG9tKSA9PiB7XG4gICAgICAgICAgY29uc3QgYXRvbVN0YXRlID0gZ2V0QXRvbVN0YXRlKGF0b20pO1xuICAgICAgICAgIGlmIChhdG9tU3RhdGUubiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBkZXY0X2dldF9tb3VudGVkX2F0b21zOiAoKSA9PiBkZWJ1Z01vdW50ZWRBdG9tcyxcbiAgICAgIGRldjRfcmVzdG9yZV9hdG9tczogKHZhbHVlcykgPT4ge1xuICAgICAgICBjb25zdCBwZW5kaW5nID0gY3JlYXRlUGVuZGluZygpO1xuICAgICAgICBmb3IgKGNvbnN0IFthdG9tLCB2YWx1ZV0gb2YgdmFsdWVzKSB7XG4gICAgICAgICAgaWYgKGhhc0luaXRpYWxWYWx1ZShhdG9tKSkge1xuICAgICAgICAgICAgY29uc3QgYXRvbVN0YXRlID0gZ2V0QXRvbVN0YXRlKGF0b20pO1xuICAgICAgICAgICAgY29uc3QgaGFzUHJldlZhbHVlID0gXCJ2XCIgaW4gYXRvbVN0YXRlO1xuICAgICAgICAgICAgY29uc3QgcHJldlZhbHVlID0gYXRvbVN0YXRlLnY7XG4gICAgICAgICAgICBzZXRBdG9tU3RhdGVWYWx1ZU9yUHJvbWlzZShhdG9tLCBhdG9tU3RhdGUsIHZhbHVlKTtcbiAgICAgICAgICAgIG1vdW50RGVwZW5kZW5jaWVzKHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWhhc1ByZXZWYWx1ZSB8fCAhT2JqZWN0LmlzKHByZXZWYWx1ZSwgYXRvbVN0YXRlLnYpKSB7XG4gICAgICAgICAgICAgIGFkZFBlbmRpbmdBdG9tKHBlbmRpbmcsIGF0b20sIGF0b21TdGF0ZSk7XG4gICAgICAgICAgICAgIHJlY29tcHV0ZURlcGVuZGVudHMocGVuZGluZywgYXRvbSwgYXRvbVN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmx1c2hQZW5kaW5nKHBlbmRpbmcpO1xuICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbihzdG9yZSwgZGV2U3RvcmUpO1xuICB9XG4gIHJldHVybiBzdG9yZTtcbn07XG5jb25zdCBjcmVhdGVTdG9yZSA9ICgpID0+IHtcbiAgY29uc3QgYXRvbVN0YXRlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gIGNvbnN0IGdldEF0b21TdGF0ZSA9IChhdG9tKSA9PiB7XG4gICAgbGV0IGF0b21TdGF0ZSA9IGF0b21TdGF0ZU1hcC5nZXQoYXRvbSk7XG4gICAgaWYgKCFhdG9tU3RhdGUpIHtcbiAgICAgIGF0b21TdGF0ZSA9IHsgZDogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgcDogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSwgbjogMCB9O1xuICAgICAgYXRvbVN0YXRlTWFwLnNldChhdG9tLCBhdG9tU3RhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gYXRvbVN0YXRlO1xuICB9O1xuICByZXR1cm4gYnVpbGRTdG9yZShnZXRBdG9tU3RhdGUpO1xufTtcbmxldCBkZWZhdWx0U3RvcmU7XG5jb25zdCBnZXREZWZhdWx0U3RvcmUgPSAoKSA9PiB7XG4gIGlmICghZGVmYXVsdFN0b3JlKSB7XG4gICAgZGVmYXVsdFN0b3JlID0gY3JlYXRlU3RvcmUoKTtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIGdsb2JhbFRoaXMuX19KT1RBSV9ERUZBVUxUX1NUT1JFX18gfHwgKGdsb2JhbFRoaXMuX19KT1RBSV9ERUZBVUxUX1NUT1JFX18gPSBkZWZhdWx0U3RvcmUpO1xuICAgICAgaWYgKGdsb2JhbFRoaXMuX19KT1RBSV9ERUZBVUxUX1NUT1JFX18gIT09IGRlZmF1bHRTdG9yZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJEZXRlY3RlZCBtdWx0aXBsZSBKb3RhaSBpbnN0YW5jZXMuIEl0IG1heSBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW9yIHdpdGggdGhlIGRlZmF1bHQgc3RvcmUuIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvam90YWkvZGlzY3Vzc2lvbnMvMjA0NFwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWZhdWx0U3RvcmU7XG59O1xuXG5leHBvcnQgeyBhdG9tLCBjcmVhdGVTdG9yZSwgZ2V0RGVmYXVsdFN0b3JlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/jotai/esm/vanilla.mjs\n");

/***/ }),

/***/ "(ssr)/../node_modules/jotai/esm/vanilla/utils.mjs":
/*!***************************************************!*\
  !*** ../node_modules/jotai/esm/vanilla/utils.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESET: () => (/* binding */ RESET),\n/* harmony export */   atomFamily: () => (/* binding */ atomFamily),\n/* harmony export */   atomWithDefault: () => (/* binding */ atomWithDefault),\n/* harmony export */   atomWithLazy: () => (/* binding */ atomWithLazy),\n/* harmony export */   atomWithObservable: () => (/* binding */ atomWithObservable),\n/* harmony export */   atomWithReducer: () => (/* binding */ atomWithReducer),\n/* harmony export */   atomWithRefresh: () => (/* binding */ atomWithRefresh),\n/* harmony export */   atomWithReset: () => (/* binding */ atomWithReset),\n/* harmony export */   atomWithStorage: () => (/* binding */ atomWithStorage),\n/* harmony export */   createJSONStorage: () => (/* binding */ createJSONStorage),\n/* harmony export */   freezeAtom: () => (/* binding */ freezeAtom),\n/* harmony export */   freezeAtomCreator: () => (/* binding */ freezeAtomCreator),\n/* harmony export */   loadable: () => (/* binding */ loadable),\n/* harmony export */   selectAtom: () => (/* binding */ selectAtom),\n/* harmony export */   splitAtom: () => (/* binding */ splitAtom),\n/* harmony export */   unstable_withStorageValidator: () => (/* binding */ withStorageValidator),\n/* harmony export */   unwrap: () => (/* binding */ unwrap)\n/* harmony export */ });\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jotai/vanilla */ \"(ssr)/../node_modules/jotai/esm/vanilla.mjs\");\n\n\nconst RESET = Symbol(\n  ( false ? 0 : void 0) !== \"production\" ? \"RESET\" : \"\"\n);\n\nfunction atomWithReset(initialValue) {\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    initialValue,\n    (get, set, update) => {\n      const nextValue = typeof update === \"function\" ? update(get(anAtom)) : update;\n      set(anAtom, nextValue === RESET ? initialValue : nextValue);\n    }\n  );\n  return anAtom;\n}\n\nfunction atomWithReducer(initialValue, reducer) {\n  return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(initialValue, function(get, set, action) {\n    set(this, reducer(get(this), action));\n  });\n}\n\nfunction atomFamily(initializeAtom, areEqual) {\n  let shouldRemove = null;\n  const atoms = /* @__PURE__ */ new Map();\n  const listeners = /* @__PURE__ */ new Set();\n  const createAtom = (param) => {\n    let item;\n    if (areEqual === void 0) {\n      item = atoms.get(param);\n    } else {\n      for (const [key, value] of atoms) {\n        if (areEqual(key, param)) {\n          item = value;\n          break;\n        }\n      }\n    }\n    if (item !== void 0) {\n      if (shouldRemove == null ? void 0 : shouldRemove(item[1], param)) {\n        createAtom.remove(param);\n      } else {\n        return item[0];\n      }\n    }\n    const newAtom = initializeAtom(param);\n    atoms.set(param, [newAtom, Date.now()]);\n    notifyListeners(\"CREATE\", param, newAtom);\n    return newAtom;\n  };\n  function notifyListeners(type, param, atom) {\n    for (const listener of listeners) {\n      listener({ type, param, atom });\n    }\n  }\n  createAtom.unstable_listen = (callback) => {\n    listeners.add(callback);\n    return () => {\n      listeners.delete(callback);\n    };\n  };\n  createAtom.getParams = () => atoms.keys();\n  createAtom.remove = (param) => {\n    if (areEqual === void 0) {\n      if (!atoms.has(param)) return;\n      const [atom] = atoms.get(param);\n      atoms.delete(param);\n      notifyListeners(\"REMOVE\", param, atom);\n    } else {\n      for (const [key, [atom]] of atoms) {\n        if (areEqual(key, param)) {\n          atoms.delete(key);\n          notifyListeners(\"REMOVE\", key, atom);\n          break;\n        }\n      }\n    }\n  };\n  createAtom.setShouldRemove = (fn) => {\n    shouldRemove = fn;\n    if (!shouldRemove) return;\n    for (const [key, [atom, createdAt]] of atoms) {\n      if (shouldRemove(createdAt, key)) {\n        atoms.delete(key);\n        notifyListeners(\"REMOVE\", key, atom);\n      }\n    }\n  };\n  return createAtom;\n}\n\nconst getCached$2 = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1$3 = /* @__PURE__ */ new WeakMap();\nconst memo3 = (create, dep1, dep2, dep3) => {\n  const cache2 = getCached$2(() => /* @__PURE__ */ new WeakMap(), cache1$3, dep1);\n  const cache3 = getCached$2(() => /* @__PURE__ */ new WeakMap(), cache2, dep2);\n  return getCached$2(create, cache3, dep3);\n};\nfunction selectAtom(anAtom, selector, equalityFn = Object.is) {\n  return memo3(\n    () => {\n      const EMPTY = Symbol();\n      const selectValue = ([value, prevSlice]) => {\n        if (prevSlice === EMPTY) {\n          return selector(value);\n        }\n        const slice = selector(value, prevSlice);\n        return equalityFn(prevSlice, slice) ? prevSlice : slice;\n      };\n      const derivedAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n        const prev = get(derivedAtom);\n        const value = get(anAtom);\n        return selectValue([value, prev]);\n      });\n      derivedAtom.init = EMPTY;\n      return derivedAtom;\n    },\n    anAtom,\n    selector,\n    equalityFn\n  );\n}\n\nconst frozenAtoms = /* @__PURE__ */ new WeakSet();\nconst deepFreeze = (obj) => {\n  if (typeof obj !== \"object\" || obj === null) return;\n  Object.freeze(obj);\n  const propNames = Object.getOwnPropertyNames(obj);\n  for (const name of propNames) {\n    const value = obj[name];\n    deepFreeze(value);\n  }\n  return obj;\n};\nfunction freezeAtom(anAtom) {\n  if (frozenAtoms.has(anAtom)) {\n    return anAtom;\n  }\n  frozenAtoms.add(anAtom);\n  const origRead = anAtom.read;\n  anAtom.read = function(get, options) {\n    return deepFreeze(origRead.call(this, get, options));\n  };\n  if (\"write\" in anAtom) {\n    const origWrite = anAtom.write;\n    anAtom.write = function(get, set, ...args) {\n      return origWrite.call(\n        this,\n        get,\n        (...setArgs) => {\n          if (setArgs[0] === anAtom) {\n            setArgs[1] = deepFreeze(setArgs[1]);\n          }\n          return set(...setArgs);\n        },\n        ...args\n      );\n    };\n  }\n  return anAtom;\n}\nfunction freezeAtomCreator(createAtom) {\n  if (( false ? 0 : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] freezeAtomCreator is deprecated, define it on users end\"\n    );\n  }\n  return (...args) => freezeAtom(createAtom(...args));\n}\n\nconst getCached$1 = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1$2 = /* @__PURE__ */ new WeakMap();\nconst memo2$1 = (create, dep1, dep2) => {\n  const cache2 = getCached$1(() => /* @__PURE__ */ new WeakMap(), cache1$2, dep1);\n  return getCached$1(create, cache2, dep2);\n};\nconst cacheKeyForEmptyKeyExtractor = {};\nconst isWritable = (atom2) => !!atom2.write;\nconst isFunction = (x) => typeof x === \"function\";\nfunction splitAtom(arrAtom, keyExtractor) {\n  return memo2$1(\n    () => {\n      const mappingCache = /* @__PURE__ */ new WeakMap();\n      const getMapping = (arr, prev) => {\n        let mapping = mappingCache.get(arr);\n        if (mapping) {\n          return mapping;\n        }\n        const prevMapping = prev && mappingCache.get(prev);\n        const atomList = [];\n        const keyList = [];\n        arr.forEach((item, index) => {\n          const key = keyExtractor ? keyExtractor(item) : index;\n          keyList[index] = key;\n          const cachedAtom = prevMapping && prevMapping.atomList[prevMapping.keyList.indexOf(key)];\n          if (cachedAtom) {\n            atomList[index] = cachedAtom;\n            return;\n          }\n          const read = (get) => {\n            const prev2 = get(mappingAtom);\n            const currArr = get(arrAtom);\n            const mapping2 = getMapping(currArr, prev2 == null ? void 0 : prev2.arr);\n            const index2 = mapping2.keyList.indexOf(key);\n            if (index2 < 0 || index2 >= currArr.length) {\n              const prevItem = arr[getMapping(arr).keyList.indexOf(key)];\n              if (prevItem) {\n                return prevItem;\n              }\n              throw new Error(\"splitAtom: index out of bounds for read\");\n            }\n            return currArr[index2];\n          };\n          const write = (get, set, update) => {\n            const prev2 = get(mappingAtom);\n            const arr2 = get(arrAtom);\n            const mapping2 = getMapping(arr2, prev2 == null ? void 0 : prev2.arr);\n            const index2 = mapping2.keyList.indexOf(key);\n            if (index2 < 0 || index2 >= arr2.length) {\n              throw new Error(\"splitAtom: index out of bounds for write\");\n            }\n            const nextItem = isFunction(update) ? update(arr2[index2]) : update;\n            if (!Object.is(arr2[index2], nextItem)) {\n              set(arrAtom, [\n                ...arr2.slice(0, index2),\n                nextItem,\n                ...arr2.slice(index2 + 1)\n              ]);\n            }\n          };\n          atomList[index] = isWritable(arrAtom) ? (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(read, write) : (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(read);\n        });\n        if (prevMapping && prevMapping.keyList.length === keyList.length && prevMapping.keyList.every((x, i) => x === keyList[i])) {\n          mapping = prevMapping;\n        } else {\n          mapping = { arr, atomList, keyList };\n        }\n        mappingCache.set(arr, mapping);\n        return mapping;\n      };\n      const mappingAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n        const prev = get(mappingAtom);\n        const arr = get(arrAtom);\n        const mapping = getMapping(arr, prev == null ? void 0 : prev.arr);\n        return mapping;\n      });\n      if (( false ? 0 : void 0) !== \"production\") {\n        mappingAtom.debugPrivate = true;\n      }\n      mappingAtom.init = void 0;\n      const splittedAtom = isWritable(arrAtom) ? (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get) => get(mappingAtom).atomList,\n        (get, set, action) => {\n          switch (action.type) {\n            case \"remove\": {\n              const index = get(splittedAtom).indexOf(action.atom);\n              if (index >= 0) {\n                const arr = get(arrAtom);\n                set(arrAtom, [\n                  ...arr.slice(0, index),\n                  ...arr.slice(index + 1)\n                ]);\n              }\n              break;\n            }\n            case \"insert\": {\n              const index = action.before ? get(splittedAtom).indexOf(action.before) : get(splittedAtom).length;\n              if (index >= 0) {\n                const arr = get(arrAtom);\n                set(arrAtom, [\n                  ...arr.slice(0, index),\n                  action.value,\n                  ...arr.slice(index)\n                ]);\n              }\n              break;\n            }\n            case \"move\": {\n              const index1 = get(splittedAtom).indexOf(action.atom);\n              const index2 = action.before ? get(splittedAtom).indexOf(action.before) : get(splittedAtom).length;\n              if (index1 >= 0 && index2 >= 0) {\n                const arr = get(arrAtom);\n                if (index1 < index2) {\n                  set(arrAtom, [\n                    ...arr.slice(0, index1),\n                    ...arr.slice(index1 + 1, index2),\n                    arr[index1],\n                    ...arr.slice(index2)\n                  ]);\n                } else {\n                  set(arrAtom, [\n                    ...arr.slice(0, index2),\n                    arr[index1],\n                    ...arr.slice(index2, index1),\n                    ...arr.slice(index1 + 1)\n                  ]);\n                }\n              }\n              break;\n            }\n          }\n        }\n      ) : (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => get(mappingAtom).atomList);\n      return splittedAtom;\n    },\n    arrAtom,\n    keyExtractor || cacheKeyForEmptyKeyExtractor\n  );\n}\n\nfunction atomWithDefault(getDefault) {\n  const EMPTY = Symbol();\n  const overwrittenAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(EMPTY);\n  if (( false ? 0 : void 0) !== \"production\") {\n    overwrittenAtom.debugPrivate = true;\n  }\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get, options) => {\n      const overwritten = get(overwrittenAtom);\n      if (overwritten !== EMPTY) {\n        return overwritten;\n      }\n      return getDefault(get, options);\n    },\n    (get, set, update) => {\n      if (update === RESET) {\n        set(overwrittenAtom, EMPTY);\n      } else if (typeof update === \"function\") {\n        const prevValue = get(anAtom);\n        set(overwrittenAtom, update(prevValue));\n      } else {\n        set(overwrittenAtom, update);\n      }\n    }\n  );\n  return anAtom;\n}\n\nconst isPromiseLike = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nfunction withStorageValidator(validator) {\n  return (unknownStorage) => {\n    const storage = {\n      ...unknownStorage,\n      getItem: (key, initialValue) => {\n        const validate = (value2) => {\n          if (!validator(value2)) {\n            return initialValue;\n          }\n          return value2;\n        };\n        const value = unknownStorage.getItem(key, initialValue);\n        if (isPromiseLike(value)) {\n          return value.then(validate);\n        }\n        return validate(value);\n      }\n    };\n    return storage;\n  };\n}\nfunction createJSONStorage(getStringStorage = () => {\n  try {\n    return window.localStorage;\n  } catch (e) {\n    if (( false ? 0 : void 0) !== \"production\") {\n      if (typeof window !== \"undefined\") {\n        console.warn(e);\n      }\n    }\n    return void 0;\n  }\n}, options) {\n  var _a;\n  let lastStr;\n  let lastValue;\n  const storage = {\n    getItem: (key, initialValue) => {\n      var _a2, _b;\n      const parse = (str2) => {\n        str2 = str2 || \"\";\n        if (lastStr !== str2) {\n          try {\n            lastValue = JSON.parse(str2, options == null ? void 0 : options.reviver);\n          } catch (e) {\n            return initialValue;\n          }\n          lastStr = str2;\n        }\n        return lastValue;\n      };\n      const str = (_b = (_a2 = getStringStorage()) == null ? void 0 : _a2.getItem(key)) != null ? _b : null;\n      if (isPromiseLike(str)) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (key, newValue) => {\n      var _a2;\n      return (_a2 = getStringStorage()) == null ? void 0 : _a2.setItem(\n        key,\n        JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n      );\n    },\n    removeItem: (key) => {\n      var _a2;\n      return (_a2 = getStringStorage()) == null ? void 0 : _a2.removeItem(key);\n    }\n  };\n  const createHandleSubscribe = (subscriber2) => (key, callback, initialValue) => subscriber2(key, (v) => {\n    let newValue;\n    try {\n      newValue = JSON.parse(v || \"\");\n    } catch (e) {\n      newValue = initialValue;\n    }\n    callback(newValue);\n  });\n  let subscriber;\n  try {\n    subscriber = (_a = getStringStorage()) == null ? void 0 : _a.subscribe;\n  } catch (e) {\n  }\n  if (!subscriber && typeof window !== \"undefined\" && typeof window.addEventListener === \"function\" && window.Storage) {\n    subscriber = (key, callback) => {\n      if (!(getStringStorage() instanceof window.Storage)) {\n        return () => {\n        };\n      }\n      const storageEventCallback = (e) => {\n        if (e.storageArea === getStringStorage() && e.key === key) {\n          callback(e.newValue);\n        }\n      };\n      window.addEventListener(\"storage\", storageEventCallback);\n      return () => {\n        window.removeEventListener(\"storage\", storageEventCallback);\n      };\n    };\n  }\n  if (subscriber) {\n    storage.subscribe = createHandleSubscribe(subscriber);\n  }\n  return storage;\n}\nconst defaultStorage = createJSONStorage();\nfunction atomWithStorage(key, initialValue, storage = defaultStorage, options) {\n  const getOnInit = options == null ? void 0 : options.getOnInit;\n  const baseAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    getOnInit ? storage.getItem(key, initialValue) : initialValue\n  );\n  if (( false ? 0 : void 0) !== \"production\") {\n    baseAtom.debugPrivate = true;\n  }\n  baseAtom.onMount = (setAtom) => {\n    setAtom(storage.getItem(key, initialValue));\n    let unsub;\n    if (storage.subscribe) {\n      unsub = storage.subscribe(key, setAtom, initialValue);\n    }\n    return unsub;\n  };\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get) => get(baseAtom),\n    (get, set, update) => {\n      const nextValue = typeof update === \"function\" ? update(get(baseAtom)) : update;\n      if (nextValue === RESET) {\n        set(baseAtom, initialValue);\n        return storage.removeItem(key);\n      }\n      if (nextValue instanceof Promise) {\n        return nextValue.then((resolvedValue) => {\n          set(baseAtom, resolvedValue);\n          return storage.setItem(key, resolvedValue);\n        });\n      }\n      set(baseAtom, nextValue);\n      return storage.setItem(key, nextValue);\n    }\n  );\n  return anAtom;\n}\n\nfunction atomWithObservable(getObservable, options) {\n  const returnResultData = (result) => {\n    if (\"e\" in result) {\n      throw result.e;\n    }\n    return result.d;\n  };\n  const observableResultAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n    var _a;\n    let observable = getObservable(get);\n    const itself = (_a = observable[Symbol.observable]) == null ? void 0 : _a.call(observable);\n    if (itself) {\n      observable = itself;\n    }\n    let resolve;\n    const makePending = () => new Promise((r) => {\n      resolve = r;\n    });\n    const initialResult = options && \"initialValue\" in options ? {\n      d: typeof options.initialValue === \"function\" ? options.initialValue() : options.initialValue\n    } : makePending();\n    let setResult;\n    let lastResult;\n    const listener = (result) => {\n      lastResult = result;\n      resolve == null ? void 0 : resolve(result);\n      setResult == null ? void 0 : setResult(result);\n    };\n    let subscription;\n    let timer;\n    const isNotMounted = () => !setResult;\n    const start = () => {\n      if (subscription) {\n        clearTimeout(timer);\n        subscription.unsubscribe();\n      }\n      subscription = observable.subscribe({\n        next: (d) => listener({ d }),\n        error: (e) => listener({ e }),\n        complete: () => {\n        }\n      });\n      if (isNotMounted() && (options == null ? void 0 : options.unstable_timeout)) {\n        timer = setTimeout(() => {\n          if (subscription) {\n            subscription.unsubscribe();\n            subscription = void 0;\n          }\n        }, options.unstable_timeout);\n      }\n    };\n    start();\n    const resultAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(lastResult || initialResult);\n    if (( false ? 0 : void 0) !== \"production\") {\n      resultAtom.debugPrivate = true;\n    }\n    resultAtom.onMount = (update) => {\n      setResult = update;\n      if (lastResult) {\n        update(lastResult);\n      }\n      if (subscription) {\n        clearTimeout(timer);\n      } else {\n        start();\n      }\n      return () => {\n        setResult = void 0;\n        if (subscription) {\n          subscription.unsubscribe();\n          subscription = void 0;\n        }\n      };\n    };\n    return [resultAtom, observable, makePending, start, isNotMounted];\n  });\n  if (( false ? 0 : void 0) !== \"production\") {\n    observableResultAtom.debugPrivate = true;\n  }\n  const observableAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get) => {\n      const [resultAtom] = get(observableResultAtom);\n      const result = get(resultAtom);\n      if (result instanceof Promise) {\n        return result.then(returnResultData);\n      }\n      return returnResultData(result);\n    },\n    (get, set, data) => {\n      const [resultAtom, observable, makePending, start, isNotMounted] = get(observableResultAtom);\n      if (\"next\" in observable) {\n        if (isNotMounted()) {\n          set(resultAtom, makePending());\n          start();\n        }\n        observable.next(data);\n      } else {\n        throw new Error(\"observable is not subject\");\n      }\n    }\n  );\n  return observableAtom;\n}\n\nconst cache1$1 = /* @__PURE__ */ new WeakMap();\nconst memo1 = (create, dep1) => (cache1$1.has(dep1) ? cache1$1 : cache1$1.set(dep1, create())).get(dep1);\nconst isPromise$1 = (x) => x instanceof Promise;\nconst LOADING = { state: \"loading\" };\nfunction loadable(anAtom) {\n  return memo1(() => {\n    const loadableCache = /* @__PURE__ */ new WeakMap();\n    const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n    if (( false ? 0 : void 0) !== \"production\") {\n      refreshAtom.debugPrivate = true;\n    }\n    const derivedAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n      (get, { setSelf }) => {\n        get(refreshAtom);\n        let value;\n        try {\n          value = get(anAtom);\n        } catch (error) {\n          return { state: \"hasError\", error };\n        }\n        if (!isPromise$1(value)) {\n          return { state: \"hasData\", data: value };\n        }\n        const promise = value;\n        const cached1 = loadableCache.get(promise);\n        if (cached1) {\n          return cached1;\n        }\n        if (promise.status === \"fulfilled\") {\n          loadableCache.set(promise, { state: \"hasData\", data: promise.value });\n        } else if (promise.status === \"rejected\") {\n          loadableCache.set(promise, {\n            state: \"hasError\",\n            error: promise.reason\n          });\n        } else {\n          promise.then(\n            (data) => {\n              loadableCache.set(promise, { state: \"hasData\", data });\n            },\n            (error) => {\n              loadableCache.set(promise, { state: \"hasError\", error });\n            }\n          ).finally(setSelf);\n        }\n        const cached2 = loadableCache.get(promise);\n        if (cached2) {\n          return cached2;\n        }\n        loadableCache.set(promise, LOADING);\n        return LOADING;\n      },\n      (_get, set) => {\n        set(refreshAtom, (c) => c + 1);\n      }\n    );\n    if (( false ? 0 : void 0) !== \"production\") {\n      derivedAtom.debugPrivate = true;\n    }\n    return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => get(derivedAtom));\n  }, anAtom);\n}\n\nconst getCached = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1 = /* @__PURE__ */ new WeakMap();\nconst memo2 = (create, dep1, dep2) => {\n  const cache2 = getCached(() => /* @__PURE__ */ new WeakMap(), cache1, dep1);\n  return getCached(create, cache2, dep2);\n};\nconst isPromise = (x) => x instanceof Promise;\nconst defaultFallback = () => void 0;\nfunction unwrap(anAtom, fallback = defaultFallback) {\n  return memo2(\n    () => {\n      const promiseErrorCache = /* @__PURE__ */ new WeakMap();\n      const promiseResultCache = /* @__PURE__ */ new WeakMap();\n      const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n      if (( false ? 0 : void 0) !== \"production\") {\n        refreshAtom.debugPrivate = true;\n      }\n      const promiseAndValueAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get, { setSelf }) => {\n          get(refreshAtom);\n          const prev = get(promiseAndValueAtom);\n          const promise = get(anAtom);\n          if (!isPromise(promise)) {\n            return { v: promise };\n          }\n          if (promise !== (prev == null ? void 0 : prev.p)) {\n            if (promise.status === \"fulfilled\") {\n              promiseResultCache.set(promise, promise.value);\n            } else if (promise.status === \"rejected\") {\n              promiseErrorCache.set(promise, promise.reason);\n            } else {\n              promise.then(\n                (v) => promiseResultCache.set(promise, v),\n                (e) => promiseErrorCache.set(promise, e)\n              ).finally(setSelf);\n            }\n          }\n          if (promiseErrorCache.has(promise)) {\n            throw promiseErrorCache.get(promise);\n          }\n          if (promiseResultCache.has(promise)) {\n            return {\n              p: promise,\n              v: promiseResultCache.get(promise)\n            };\n          }\n          if (prev && \"v\" in prev) {\n            return { p: promise, f: fallback(prev.v), v: prev.v };\n          }\n          return { p: promise, f: fallback() };\n        },\n        (_get, set) => {\n          set(refreshAtom, (c) => c + 1);\n        }\n      );\n      promiseAndValueAtom.init = void 0;\n      if (( false ? 0 : void 0) !== \"production\") {\n        promiseAndValueAtom.debugPrivate = true;\n      }\n      return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get) => {\n          const state = get(promiseAndValueAtom);\n          if (\"f\" in state) {\n            return state.f;\n          }\n          return state.v;\n        },\n        (_get, set, ...args) => set(anAtom, ...args)\n      );\n    },\n    anAtom,\n    fallback\n  );\n}\n\nfunction atomWithRefresh(read, write) {\n  const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n  if (( false ? 0 : void 0) !== \"production\") {\n    refreshAtom.debugPrivate = true;\n  }\n  return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get, options) => {\n      get(refreshAtom);\n      return read(get, options);\n    },\n    (get, set, ...args) => {\n      if (args.length === 0) {\n        set(refreshAtom, (c) => c + 1);\n      } else if (write) {\n        return write(get, set, ...args);\n      }\n    }\n  );\n}\n\nfunction atomWithLazy(makeInitial) {\n  const a = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(void 0);\n  delete a.init;\n  Object.defineProperty(a, \"init\", {\n    get() {\n      return makeInitial();\n    }\n  });\n  return a;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS92YW5pbGxhL3V0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUM7O0FBRXJDO0FBQ0EsR0FBRyxNQUFlLEdBQUcsQ0FBb0I7QUFDekM7O0FBRUE7QUFDQSxpQkFBaUIsbURBQUk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVMsbURBQUk7QUFDYjtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtREFBSTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFlLEdBQUcsQ0FBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxtREFBSSxnQkFBZ0IsbURBQUk7QUFDMUUsU0FBUztBQUNUO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1EQUFJO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFdBQVcsTUFBZSxHQUFHLENBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtREFBSTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbURBQUk7QUFDZDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMEJBQTBCLG1EQUFJO0FBQzlCLE9BQU8sTUFBZSxHQUFHLENBQW9CO0FBQzdDO0FBQ0E7QUFDQSxpQkFBaUIsbURBQUk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLE1BQWUsR0FBRyxDQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1EQUFJO0FBQ3ZCO0FBQ0E7QUFDQSxPQUFPLE1BQWUsR0FBRyxDQUFvQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtREFBSTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1EQUFJO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLEdBQUc7QUFDbkMsaUNBQWlDLEdBQUc7QUFDcEM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1EQUFJO0FBQzNCLFNBQVMsTUFBZSxHQUFHLENBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILE9BQU8sTUFBZSxHQUFHLENBQW9CO0FBQzdDO0FBQ0E7QUFDQSx5QkFBeUIsbURBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtREFBSTtBQUM1QixTQUFTLE1BQWUsR0FBRyxDQUFvQjtBQUMvQztBQUNBO0FBQ0Esd0JBQXdCLG1EQUFJO0FBQzVCLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx1Q0FBdUM7QUFDOUUsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1Y7QUFDQTtBQUNBLDJDQUEyQyx3QkFBd0I7QUFDbkUsYUFBYTtBQUNiO0FBQ0EsMkNBQTJDLDBCQUEwQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE1BQWUsR0FBRyxDQUFvQjtBQUMvQztBQUNBO0FBQ0EsV0FBVyxtREFBSTtBQUNmLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtREFBSTtBQUM5QixXQUFXLE1BQWUsR0FBRyxDQUFvQjtBQUNqRDtBQUNBO0FBQ0Esa0NBQWtDLG1EQUFJO0FBQ3RDLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsbUJBQW1CO0FBQ25CLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFlLEdBQUcsQ0FBb0I7QUFDakQ7QUFDQTtBQUNBLGFBQWEsbURBQUk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsbURBQUk7QUFDMUIsT0FBTyxNQUFlLEdBQUcsQ0FBb0I7QUFDN0M7QUFDQTtBQUNBLFNBQVMsbURBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLG1EQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFb1MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWRnaXR5LXlpZWxkLWZyb250ZW5kLy4uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS91dGlscy5tanM/YzEzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWkvdmFuaWxsYSc7XG5cbmNvbnN0IFJFU0VUID0gU3ltYm9sKFxuICAoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiA/IFwiUkVTRVRcIiA6IFwiXCJcbik7XG5cbmZ1bmN0aW9uIGF0b21XaXRoUmVzZXQoaW5pdGlhbFZhbHVlKSB7XG4gIGNvbnN0IGFuQXRvbSA9IGF0b20oXG4gICAgaW5pdGlhbFZhbHVlLFxuICAgIChnZXQsIHNldCwgdXBkYXRlKSA9PiB7XG4gICAgICBjb25zdCBuZXh0VmFsdWUgPSB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUoZ2V0KGFuQXRvbSkpIDogdXBkYXRlO1xuICAgICAgc2V0KGFuQXRvbSwgbmV4dFZhbHVlID09PSBSRVNFVCA/IGluaXRpYWxWYWx1ZSA6IG5leHRWYWx1ZSk7XG4gICAgfVxuICApO1xuICByZXR1cm4gYW5BdG9tO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aFJlZHVjZXIoaW5pdGlhbFZhbHVlLCByZWR1Y2VyKSB7XG4gIHJldHVybiBhdG9tKGluaXRpYWxWYWx1ZSwgZnVuY3Rpb24oZ2V0LCBzZXQsIGFjdGlvbikge1xuICAgIHNldCh0aGlzLCByZWR1Y2VyKGdldCh0aGlzKSwgYWN0aW9uKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhdG9tRmFtaWx5KGluaXRpYWxpemVBdG9tLCBhcmVFcXVhbCkge1xuICBsZXQgc2hvdWxkUmVtb3ZlID0gbnVsbDtcbiAgY29uc3QgYXRvbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBjcmVhdGVBdG9tID0gKHBhcmFtKSA9PiB7XG4gICAgbGV0IGl0ZW07XG4gICAgaWYgKGFyZUVxdWFsID09PSB2b2lkIDApIHtcbiAgICAgIGl0ZW0gPSBhdG9tcy5nZXQocGFyYW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBhdG9tcykge1xuICAgICAgICBpZiAoYXJlRXF1YWwoa2V5LCBwYXJhbSkpIHtcbiAgICAgICAgICBpdGVtID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0ZW0gIT09IHZvaWQgMCkge1xuICAgICAgaWYgKHNob3VsZFJlbW92ZSA9PSBudWxsID8gdm9pZCAwIDogc2hvdWxkUmVtb3ZlKGl0ZW1bMV0sIHBhcmFtKSkge1xuICAgICAgICBjcmVhdGVBdG9tLnJlbW92ZShwYXJhbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXRlbVswXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV3QXRvbSA9IGluaXRpYWxpemVBdG9tKHBhcmFtKTtcbiAgICBhdG9tcy5zZXQocGFyYW0sIFtuZXdBdG9tLCBEYXRlLm5vdygpXSk7XG4gICAgbm90aWZ5TGlzdGVuZXJzKFwiQ1JFQVRFXCIsIHBhcmFtLCBuZXdBdG9tKTtcbiAgICByZXR1cm4gbmV3QXRvbTtcbiAgfTtcbiAgZnVuY3Rpb24gbm90aWZ5TGlzdGVuZXJzKHR5cGUsIHBhcmFtLCBhdG9tKSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVyKHsgdHlwZSwgcGFyYW0sIGF0b20gfSk7XG4gICAgfVxuICB9XG4gIGNyZWF0ZUF0b20udW5zdGFibGVfbGlzdGVuID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgbGlzdGVuZXJzLmFkZChjYWxsYmFjayk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxpc3RlbmVycy5kZWxldGUoY2FsbGJhY2spO1xuICAgIH07XG4gIH07XG4gIGNyZWF0ZUF0b20uZ2V0UGFyYW1zID0gKCkgPT4gYXRvbXMua2V5cygpO1xuICBjcmVhdGVBdG9tLnJlbW92ZSA9IChwYXJhbSkgPT4ge1xuICAgIGlmIChhcmVFcXVhbCA9PT0gdm9pZCAwKSB7XG4gICAgICBpZiAoIWF0b21zLmhhcyhwYXJhbSkpIHJldHVybjtcbiAgICAgIGNvbnN0IFthdG9tXSA9IGF0b21zLmdldChwYXJhbSk7XG4gICAgICBhdG9tcy5kZWxldGUocGFyYW0pO1xuICAgICAgbm90aWZ5TGlzdGVuZXJzKFwiUkVNT1ZFXCIsIHBhcmFtLCBhdG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBba2V5LCBbYXRvbV1dIG9mIGF0b21zKSB7XG4gICAgICAgIGlmIChhcmVFcXVhbChrZXksIHBhcmFtKSkge1xuICAgICAgICAgIGF0b21zLmRlbGV0ZShrZXkpO1xuICAgICAgICAgIG5vdGlmeUxpc3RlbmVycyhcIlJFTU9WRVwiLCBrZXksIGF0b20pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjcmVhdGVBdG9tLnNldFNob3VsZFJlbW92ZSA9IChmbikgPT4ge1xuICAgIHNob3VsZFJlbW92ZSA9IGZuO1xuICAgIGlmICghc2hvdWxkUmVtb3ZlKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBba2V5LCBbYXRvbSwgY3JlYXRlZEF0XV0gb2YgYXRvbXMpIHtcbiAgICAgIGlmIChzaG91bGRSZW1vdmUoY3JlYXRlZEF0LCBrZXkpKSB7XG4gICAgICAgIGF0b21zLmRlbGV0ZShrZXkpO1xuICAgICAgICBub3RpZnlMaXN0ZW5lcnMoXCJSRU1PVkVcIiwga2V5LCBhdG9tKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBjcmVhdGVBdG9tO1xufVxuXG5jb25zdCBnZXRDYWNoZWQkMiA9IChjLCBtLCBrKSA9PiAobS5oYXMoaykgPyBtIDogbS5zZXQoaywgYygpKSkuZ2V0KGspO1xuY29uc3QgY2FjaGUxJDMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1lbW8zID0gKGNyZWF0ZSwgZGVwMSwgZGVwMiwgZGVwMykgPT4ge1xuICBjb25zdCBjYWNoZTIgPSBnZXRDYWNoZWQkMigoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgY2FjaGUxJDMsIGRlcDEpO1xuICBjb25zdCBjYWNoZTMgPSBnZXRDYWNoZWQkMigoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgY2FjaGUyLCBkZXAyKTtcbiAgcmV0dXJuIGdldENhY2hlZCQyKGNyZWF0ZSwgY2FjaGUzLCBkZXAzKTtcbn07XG5mdW5jdGlvbiBzZWxlY3RBdG9tKGFuQXRvbSwgc2VsZWN0b3IsIGVxdWFsaXR5Rm4gPSBPYmplY3QuaXMpIHtcbiAgcmV0dXJuIG1lbW8zKFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IEVNUFRZID0gU3ltYm9sKCk7XG4gICAgICBjb25zdCBzZWxlY3RWYWx1ZSA9IChbdmFsdWUsIHByZXZTbGljZV0pID0+IHtcbiAgICAgICAgaWYgKHByZXZTbGljZSA9PT0gRU1QVFkpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNsaWNlID0gc2VsZWN0b3IodmFsdWUsIHByZXZTbGljZSk7XG4gICAgICAgIHJldHVybiBlcXVhbGl0eUZuKHByZXZTbGljZSwgc2xpY2UpID8gcHJldlNsaWNlIDogc2xpY2U7XG4gICAgICB9O1xuICAgICAgY29uc3QgZGVyaXZlZEF0b20gPSBhdG9tKChnZXQpID0+IHtcbiAgICAgICAgY29uc3QgcHJldiA9IGdldChkZXJpdmVkQXRvbSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0KGFuQXRvbSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RWYWx1ZShbdmFsdWUsIHByZXZdKTtcbiAgICAgIH0pO1xuICAgICAgZGVyaXZlZEF0b20uaW5pdCA9IEVNUFRZO1xuICAgICAgcmV0dXJuIGRlcml2ZWRBdG9tO1xuICAgIH0sXG4gICAgYW5BdG9tLFxuICAgIHNlbGVjdG9yLFxuICAgIGVxdWFsaXR5Rm5cbiAgKTtcbn1cblxuY29uc3QgZnJvemVuQXRvbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTtcbmNvbnN0IGRlZXBGcmVlemUgPSAob2JqKSA9PiB7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuO1xuICBPYmplY3QuZnJlZXplKG9iaik7XG4gIGNvbnN0IHByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaik7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBwcm9wTmFtZXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IG9ialtuYW1lXTtcbiAgICBkZWVwRnJlZXplKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbmZ1bmN0aW9uIGZyZWV6ZUF0b20oYW5BdG9tKSB7XG4gIGlmIChmcm96ZW5BdG9tcy5oYXMoYW5BdG9tKSkge1xuICAgIHJldHVybiBhbkF0b207XG4gIH1cbiAgZnJvemVuQXRvbXMuYWRkKGFuQXRvbSk7XG4gIGNvbnN0IG9yaWdSZWFkID0gYW5BdG9tLnJlYWQ7XG4gIGFuQXRvbS5yZWFkID0gZnVuY3Rpb24oZ2V0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRlZXBGcmVlemUob3JpZ1JlYWQuY2FsbCh0aGlzLCBnZXQsIG9wdGlvbnMpKTtcbiAgfTtcbiAgaWYgKFwid3JpdGVcIiBpbiBhbkF0b20pIHtcbiAgICBjb25zdCBvcmlnV3JpdGUgPSBhbkF0b20ud3JpdGU7XG4gICAgYW5BdG9tLndyaXRlID0gZnVuY3Rpb24oZ2V0LCBzZXQsIC4uLmFyZ3MpIHtcbiAgICAgIHJldHVybiBvcmlnV3JpdGUuY2FsbChcbiAgICAgICAgdGhpcyxcbiAgICAgICAgZ2V0LFxuICAgICAgICAoLi4uc2V0QXJncykgPT4ge1xuICAgICAgICAgIGlmIChzZXRBcmdzWzBdID09PSBhbkF0b20pIHtcbiAgICAgICAgICAgIHNldEFyZ3NbMV0gPSBkZWVwRnJlZXplKHNldEFyZ3NbMV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc2V0KC4uLnNldEFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICAuLi5hcmdzXG4gICAgICApO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGFuQXRvbTtcbn1cbmZ1bmN0aW9uIGZyZWV6ZUF0b21DcmVhdG9yKGNyZWF0ZUF0b20pIHtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJbREVQUkVDQVRFRF0gZnJlZXplQXRvbUNyZWF0b3IgaXMgZGVwcmVjYXRlZCwgZGVmaW5lIGl0IG9uIHVzZXJzIGVuZFwiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gKC4uLmFyZ3MpID0+IGZyZWV6ZUF0b20oY3JlYXRlQXRvbSguLi5hcmdzKSk7XG59XG5cbmNvbnN0IGdldENhY2hlZCQxID0gKGMsIG0sIGspID0+IChtLmhhcyhrKSA/IG0gOiBtLnNldChrLCBjKCkpKS5nZXQoayk7XG5jb25zdCBjYWNoZTEkMiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgbWVtbzIkMSA9IChjcmVhdGUsIGRlcDEsIGRlcDIpID0+IHtcbiAgY29uc3QgY2FjaGUyID0gZ2V0Q2FjaGVkJDEoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGNhY2hlMSQyLCBkZXAxKTtcbiAgcmV0dXJuIGdldENhY2hlZCQxKGNyZWF0ZSwgY2FjaGUyLCBkZXAyKTtcbn07XG5jb25zdCBjYWNoZUtleUZvckVtcHR5S2V5RXh0cmFjdG9yID0ge307XG5jb25zdCBpc1dyaXRhYmxlID0gKGF0b20yKSA9PiAhIWF0b20yLndyaXRlO1xuY29uc3QgaXNGdW5jdGlvbiA9ICh4KSA9PiB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gc3BsaXRBdG9tKGFyckF0b20sIGtleUV4dHJhY3Rvcikge1xuICByZXR1cm4gbWVtbzIkMShcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBtYXBwaW5nQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgICAgIGNvbnN0IGdldE1hcHBpbmcgPSAoYXJyLCBwcmV2KSA9PiB7XG4gICAgICAgIGxldCBtYXBwaW5nID0gbWFwcGluZ0NhY2hlLmdldChhcnIpO1xuICAgICAgICBpZiAobWFwcGluZykge1xuICAgICAgICAgIHJldHVybiBtYXBwaW5nO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZNYXBwaW5nID0gcHJldiAmJiBtYXBwaW5nQ2FjaGUuZ2V0KHByZXYpO1xuICAgICAgICBjb25zdCBhdG9tTGlzdCA9IFtdO1xuICAgICAgICBjb25zdCBrZXlMaXN0ID0gW107XG4gICAgICAgIGFyci5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGtleSA9IGtleUV4dHJhY3RvciA/IGtleUV4dHJhY3RvcihpdGVtKSA6IGluZGV4O1xuICAgICAgICAgIGtleUxpc3RbaW5kZXhdID0ga2V5O1xuICAgICAgICAgIGNvbnN0IGNhY2hlZEF0b20gPSBwcmV2TWFwcGluZyAmJiBwcmV2TWFwcGluZy5hdG9tTGlzdFtwcmV2TWFwcGluZy5rZXlMaXN0LmluZGV4T2Yoa2V5KV07XG4gICAgICAgICAgaWYgKGNhY2hlZEF0b20pIHtcbiAgICAgICAgICAgIGF0b21MaXN0W2luZGV4XSA9IGNhY2hlZEF0b207XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHJlYWQgPSAoZ2V0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmV2MiA9IGdldChtYXBwaW5nQXRvbSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyQXJyID0gZ2V0KGFyckF0b20pO1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZzIgPSBnZXRNYXBwaW5nKGN1cnJBcnIsIHByZXYyID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Mi5hcnIpO1xuICAgICAgICAgICAgY29uc3QgaW5kZXgyID0gbWFwcGluZzIua2V5TGlzdC5pbmRleE9mKGtleSk7XG4gICAgICAgICAgICBpZiAoaW5kZXgyIDwgMCB8fCBpbmRleDIgPj0gY3VyckFyci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc3QgcHJldkl0ZW0gPSBhcnJbZ2V0TWFwcGluZyhhcnIpLmtleUxpc3QuaW5kZXhPZihrZXkpXTtcbiAgICAgICAgICAgICAgaWYgKHByZXZJdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXZJdGVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInNwbGl0QXRvbTogaW5kZXggb3V0IG9mIGJvdW5kcyBmb3IgcmVhZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyQXJyW2luZGV4Ml07XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCB3cml0ZSA9IChnZXQsIHNldCwgdXBkYXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmV2MiA9IGdldChtYXBwaW5nQXRvbSk7XG4gICAgICAgICAgICBjb25zdCBhcnIyID0gZ2V0KGFyckF0b20pO1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZzIgPSBnZXRNYXBwaW5nKGFycjIsIHByZXYyID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Mi5hcnIpO1xuICAgICAgICAgICAgY29uc3QgaW5kZXgyID0gbWFwcGluZzIua2V5TGlzdC5pbmRleE9mKGtleSk7XG4gICAgICAgICAgICBpZiAoaW5kZXgyIDwgMCB8fCBpbmRleDIgPj0gYXJyMi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwic3BsaXRBdG9tOiBpbmRleCBvdXQgb2YgYm91bmRzIGZvciB3cml0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5leHRJdGVtID0gaXNGdW5jdGlvbih1cGRhdGUpID8gdXBkYXRlKGFycjJbaW5kZXgyXSkgOiB1cGRhdGU7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5pcyhhcnIyW2luZGV4Ml0sIG5leHRJdGVtKSkge1xuICAgICAgICAgICAgICBzZXQoYXJyQXRvbSwgW1xuICAgICAgICAgICAgICAgIC4uLmFycjIuc2xpY2UoMCwgaW5kZXgyKSxcbiAgICAgICAgICAgICAgICBuZXh0SXRlbSxcbiAgICAgICAgICAgICAgICAuLi5hcnIyLnNsaWNlKGluZGV4MiArIDEpXG4gICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgYXRvbUxpc3RbaW5kZXhdID0gaXNXcml0YWJsZShhcnJBdG9tKSA/IGF0b20ocmVhZCwgd3JpdGUpIDogYXRvbShyZWFkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChwcmV2TWFwcGluZyAmJiBwcmV2TWFwcGluZy5rZXlMaXN0Lmxlbmd0aCA9PT0ga2V5TGlzdC5sZW5ndGggJiYgcHJldk1hcHBpbmcua2V5TGlzdC5ldmVyeSgoeCwgaSkgPT4geCA9PT0ga2V5TGlzdFtpXSkpIHtcbiAgICAgICAgICBtYXBwaW5nID0gcHJldk1hcHBpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFwcGluZyA9IHsgYXJyLCBhdG9tTGlzdCwga2V5TGlzdCB9O1xuICAgICAgICB9XG4gICAgICAgIG1hcHBpbmdDYWNoZS5zZXQoYXJyLCBtYXBwaW5nKTtcbiAgICAgICAgcmV0dXJuIG1hcHBpbmc7XG4gICAgICB9O1xuICAgICAgY29uc3QgbWFwcGluZ0F0b20gPSBhdG9tKChnZXQpID0+IHtcbiAgICAgICAgY29uc3QgcHJldiA9IGdldChtYXBwaW5nQXRvbSk7XG4gICAgICAgIGNvbnN0IGFyciA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgY29uc3QgbWFwcGluZyA9IGdldE1hcHBpbmcoYXJyLCBwcmV2ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2LmFycik7XG4gICAgICAgIHJldHVybiBtYXBwaW5nO1xuICAgICAgfSk7XG4gICAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgbWFwcGluZ0F0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIG1hcHBpbmdBdG9tLmluaXQgPSB2b2lkIDA7XG4gICAgICBjb25zdCBzcGxpdHRlZEF0b20gPSBpc1dyaXRhYmxlKGFyckF0b20pID8gYXRvbShcbiAgICAgICAgKGdldCkgPT4gZ2V0KG1hcHBpbmdBdG9tKS5hdG9tTGlzdCxcbiAgICAgICAgKGdldCwgc2V0LCBhY3Rpb24pID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwicmVtb3ZlXCI6IHtcbiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGFjdGlvbi5hdG9tKTtcbiAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgICAgICAgICAgc2V0KGFyckF0b20sIFtcbiAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZSgwLCBpbmRleCksXG4gICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoaW5kZXggKyAxKVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImluc2VydFwiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYWN0aW9uLmJlZm9yZSA/IGdldChzcGxpdHRlZEF0b20pLmluZGV4T2YoYWN0aW9uLmJlZm9yZSkgOiBnZXQoc3BsaXR0ZWRBdG9tKS5sZW5ndGg7XG4gICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyID0gZ2V0KGFyckF0b20pO1xuICAgICAgICAgICAgICAgIHNldChhcnJBdG9tLCBbXG4gICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoMCwgaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4KVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIm1vdmVcIjoge1xuICAgICAgICAgICAgICBjb25zdCBpbmRleDEgPSBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGFjdGlvbi5hdG9tKTtcbiAgICAgICAgICAgICAgY29uc3QgaW5kZXgyID0gYWN0aW9uLmJlZm9yZSA/IGdldChzcGxpdHRlZEF0b20pLmluZGV4T2YoYWN0aW9uLmJlZm9yZSkgOiBnZXQoc3BsaXR0ZWRBdG9tKS5sZW5ndGg7XG4gICAgICAgICAgICAgIGlmIChpbmRleDEgPj0gMCAmJiBpbmRleDIgPj0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXgxIDwgaW5kZXgyKSB7XG4gICAgICAgICAgICAgICAgICBzZXQoYXJyQXRvbSwgW1xuICAgICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoMCwgaW5kZXgxKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4MSArIDEsIGluZGV4MiksXG4gICAgICAgICAgICAgICAgICAgIGFycltpbmRleDFdLFxuICAgICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoaW5kZXgyKVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNldChhcnJBdG9tLCBbXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZSgwLCBpbmRleDIpLFxuICAgICAgICAgICAgICAgICAgICBhcnJbaW5kZXgxXSxcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4MiwgaW5kZXgxKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4MSArIDEpXG4gICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApIDogYXRvbSgoZ2V0KSA9PiBnZXQobWFwcGluZ0F0b20pLmF0b21MaXN0KTtcbiAgICAgIHJldHVybiBzcGxpdHRlZEF0b207XG4gICAgfSxcbiAgICBhcnJBdG9tLFxuICAgIGtleUV4dHJhY3RvciB8fCBjYWNoZUtleUZvckVtcHR5S2V5RXh0cmFjdG9yXG4gICk7XG59XG5cbmZ1bmN0aW9uIGF0b21XaXRoRGVmYXVsdChnZXREZWZhdWx0KSB7XG4gIGNvbnN0IEVNUFRZID0gU3ltYm9sKCk7XG4gIGNvbnN0IG92ZXJ3cml0dGVuQXRvbSA9IGF0b20oRU1QVFkpO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBvdmVyd3JpdHRlbkF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgfVxuICBjb25zdCBhbkF0b20gPSBhdG9tKFxuICAgIChnZXQsIG9wdGlvbnMpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJ3cml0dGVuID0gZ2V0KG92ZXJ3cml0dGVuQXRvbSk7XG4gICAgICBpZiAob3ZlcndyaXR0ZW4gIT09IEVNUFRZKSB7XG4gICAgICAgIHJldHVybiBvdmVyd3JpdHRlbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZXREZWZhdWx0KGdldCwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgaWYgKHVwZGF0ZSA9PT0gUkVTRVQpIHtcbiAgICAgICAgc2V0KG92ZXJ3cml0dGVuQXRvbSwgRU1QVFkpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgcHJldlZhbHVlID0gZ2V0KGFuQXRvbSk7XG4gICAgICAgIHNldChvdmVyd3JpdHRlbkF0b20sIHVwZGF0ZShwcmV2VmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldChvdmVyd3JpdHRlbkF0b20sIHVwZGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gYW5BdG9tO1xufVxuXG5jb25zdCBpc1Byb21pc2VMaWtlID0gKHgpID0+IHR5cGVvZiAoeCA9PSBudWxsID8gdm9pZCAwIDogeC50aGVuKSA9PT0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gd2l0aFN0b3JhZ2VWYWxpZGF0b3IodmFsaWRhdG9yKSB7XG4gIHJldHVybiAodW5rbm93blN0b3JhZ2UpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlID0ge1xuICAgICAgLi4udW5rbm93blN0b3JhZ2UsXG4gICAgICBnZXRJdGVtOiAoa2V5LCBpbml0aWFsVmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGUgPSAodmFsdWUyKSA9PiB7XG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlMjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB1bmtub3duU3RvcmFnZS5nZXRJdGVtKGtleSwgaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlLnRoZW4odmFsaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gc3RvcmFnZTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUpTT05TdG9yYWdlKGdldFN0cmluZ1N0b3JhZ2UgPSAoKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufSwgb3B0aW9ucykge1xuICB2YXIgX2E7XG4gIGxldCBsYXN0U3RyO1xuICBsZXQgbGFzdFZhbHVlO1xuICBjb25zdCBzdG9yYWdlID0ge1xuICAgIGdldEl0ZW06IChrZXksIGluaXRpYWxWYWx1ZSkgPT4ge1xuICAgICAgdmFyIF9hMiwgX2I7XG4gICAgICBjb25zdCBwYXJzZSA9IChzdHIyKSA9PiB7XG4gICAgICAgIHN0cjIgPSBzdHIyIHx8IFwiXCI7XG4gICAgICAgIGlmIChsYXN0U3RyICE9PSBzdHIyKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxhc3RWYWx1ZSA9IEpTT04ucGFyc2Uoc3RyMiwgb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5yZXZpdmVyKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbFZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0U3RyID0gc3RyMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFzdFZhbHVlO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IHN0ciA9IChfYiA9IChfYTIgPSBnZXRTdHJpbmdTdG9yYWdlKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZ2V0SXRlbShrZXkpKSAhPSBudWxsID8gX2IgOiBudWxsO1xuICAgICAgaWYgKGlzUHJvbWlzZUxpa2Uoc3RyKSkge1xuICAgICAgICByZXR1cm4gc3RyLnRoZW4ocGFyc2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlKHN0cik7XG4gICAgfSxcbiAgICBzZXRJdGVtOiAoa2V5LCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoX2EyID0gZ2V0U3RyaW5nU3RvcmFnZSgpKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnNldEl0ZW0oXG4gICAgICAgIGtleSxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUsIG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMucmVwbGFjZXIpXG4gICAgICApO1xuICAgIH0sXG4gICAgcmVtb3ZlSXRlbTogKGtleSkgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoX2EyID0gZ2V0U3RyaW5nU3RvcmFnZSgpKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUhhbmRsZVN1YnNjcmliZSA9IChzdWJzY3JpYmVyMikgPT4gKGtleSwgY2FsbGJhY2ssIGluaXRpYWxWYWx1ZSkgPT4gc3Vic2NyaWJlcjIoa2V5LCAodikgPT4ge1xuICAgIGxldCBuZXdWYWx1ZTtcbiAgICB0cnkge1xuICAgICAgbmV3VmFsdWUgPSBKU09OLnBhcnNlKHYgfHwgXCJcIik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbmV3VmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgfVxuICAgIGNhbGxiYWNrKG5ld1ZhbHVlKTtcbiAgfSk7XG4gIGxldCBzdWJzY3JpYmVyO1xuICB0cnkge1xuICAgIHN1YnNjcmliZXIgPSAoX2EgPSBnZXRTdHJpbmdTdG9yYWdlKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBpZiAoIXN1YnNjcmliZXIgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIiAmJiB3aW5kb3cuU3RvcmFnZSkge1xuICAgIHN1YnNjcmliZXIgPSAoa2V5LCBjYWxsYmFjaykgPT4ge1xuICAgICAgaWYgKCEoZ2V0U3RyaW5nU3RvcmFnZSgpIGluc3RhbmNlb2Ygd2luZG93LlN0b3JhZ2UpKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBzdG9yYWdlRXZlbnRDYWxsYmFjayA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnN0b3JhZ2VBcmVhID09PSBnZXRTdHJpbmdTdG9yYWdlKCkgJiYgZS5rZXkgPT09IGtleSkge1xuICAgICAgICAgIGNhbGxiYWNrKGUubmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHN0b3JhZ2VFdmVudENhbGxiYWNrKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBzdG9yYWdlRXZlbnRDYWxsYmFjayk7XG4gICAgICB9O1xuICAgIH07XG4gIH1cbiAgaWYgKHN1YnNjcmliZXIpIHtcbiAgICBzdG9yYWdlLnN1YnNjcmliZSA9IGNyZWF0ZUhhbmRsZVN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgfVxuICByZXR1cm4gc3RvcmFnZTtcbn1cbmNvbnN0IGRlZmF1bHRTdG9yYWdlID0gY3JlYXRlSlNPTlN0b3JhZ2UoKTtcbmZ1bmN0aW9uIGF0b21XaXRoU3RvcmFnZShrZXksIGluaXRpYWxWYWx1ZSwgc3RvcmFnZSA9IGRlZmF1bHRTdG9yYWdlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGdldE9uSW5pdCA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZ2V0T25Jbml0O1xuICBjb25zdCBiYXNlQXRvbSA9IGF0b20oXG4gICAgZ2V0T25Jbml0ID8gc3RvcmFnZS5nZXRJdGVtKGtleSwgaW5pdGlhbFZhbHVlKSA6IGluaXRpYWxWYWx1ZVxuICApO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBiYXNlQXRvbS5kZWJ1Z1ByaXZhdGUgPSB0cnVlO1xuICB9XG4gIGJhc2VBdG9tLm9uTW91bnQgPSAoc2V0QXRvbSkgPT4ge1xuICAgIHNldEF0b20oc3RvcmFnZS5nZXRJdGVtKGtleSwgaW5pdGlhbFZhbHVlKSk7XG4gICAgbGV0IHVuc3ViO1xuICAgIGlmIChzdG9yYWdlLnN1YnNjcmliZSkge1xuICAgICAgdW5zdWIgPSBzdG9yYWdlLnN1YnNjcmliZShrZXksIHNldEF0b20sIGluaXRpYWxWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB1bnN1YjtcbiAgfTtcbiAgY29uc3QgYW5BdG9tID0gYXRvbShcbiAgICAoZ2V0KSA9PiBnZXQoYmFzZUF0b20pLFxuICAgIChnZXQsIHNldCwgdXBkYXRlKSA9PiB7XG4gICAgICBjb25zdCBuZXh0VmFsdWUgPSB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUoZ2V0KGJhc2VBdG9tKSkgOiB1cGRhdGU7XG4gICAgICBpZiAobmV4dFZhbHVlID09PSBSRVNFVCkge1xuICAgICAgICBzZXQoYmFzZUF0b20sIGluaXRpYWxWYWx1ZSk7XG4gICAgICAgIHJldHVybiBzdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiBuZXh0VmFsdWUudGhlbigocmVzb2x2ZWRWYWx1ZSkgPT4ge1xuICAgICAgICAgIHNldChiYXNlQXRvbSwgcmVzb2x2ZWRWYWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIHN0b3JhZ2Uuc2V0SXRlbShrZXksIHJlc29sdmVkVmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNldChiYXNlQXRvbSwgbmV4dFZhbHVlKTtcbiAgICAgIHJldHVybiBzdG9yYWdlLnNldEl0ZW0oa2V5LCBuZXh0VmFsdWUpO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGFuQXRvbTtcbn1cblxuZnVuY3Rpb24gYXRvbVdpdGhPYnNlcnZhYmxlKGdldE9ic2VydmFibGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgcmV0dXJuUmVzdWx0RGF0YSA9IChyZXN1bHQpID0+IHtcbiAgICBpZiAoXCJlXCIgaW4gcmVzdWx0KSB7XG4gICAgICB0aHJvdyByZXN1bHQuZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5kO1xuICB9O1xuICBjb25zdCBvYnNlcnZhYmxlUmVzdWx0QXRvbSA9IGF0b20oKGdldCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBsZXQgb2JzZXJ2YWJsZSA9IGdldE9ic2VydmFibGUoZ2V0KTtcbiAgICBjb25zdCBpdHNlbGYgPSAoX2EgPSBvYnNlcnZhYmxlW1N5bWJvbC5vYnNlcnZhYmxlXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwob2JzZXJ2YWJsZSk7XG4gICAgaWYgKGl0c2VsZikge1xuICAgICAgb2JzZXJ2YWJsZSA9IGl0c2VsZjtcbiAgICB9XG4gICAgbGV0IHJlc29sdmU7XG4gICAgY29uc3QgbWFrZVBlbmRpbmcgPSAoKSA9PiBuZXcgUHJvbWlzZSgocikgPT4ge1xuICAgICAgcmVzb2x2ZSA9IHI7XG4gICAgfSk7XG4gICAgY29uc3QgaW5pdGlhbFJlc3VsdCA9IG9wdGlvbnMgJiYgXCJpbml0aWFsVmFsdWVcIiBpbiBvcHRpb25zID8ge1xuICAgICAgZDogdHlwZW9mIG9wdGlvbnMuaW5pdGlhbFZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBvcHRpb25zLmluaXRpYWxWYWx1ZSgpIDogb3B0aW9ucy5pbml0aWFsVmFsdWVcbiAgICB9IDogbWFrZVBlbmRpbmcoKTtcbiAgICBsZXQgc2V0UmVzdWx0O1xuICAgIGxldCBsYXN0UmVzdWx0O1xuICAgIGNvbnN0IGxpc3RlbmVyID0gKHJlc3VsdCkgPT4ge1xuICAgICAgbGFzdFJlc3VsdCA9IHJlc3VsdDtcbiAgICAgIHJlc29sdmUgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc29sdmUocmVzdWx0KTtcbiAgICAgIHNldFJlc3VsdCA9PSBudWxsID8gdm9pZCAwIDogc2V0UmVzdWx0KHJlc3VsdCk7XG4gICAgfTtcbiAgICBsZXQgc3Vic2NyaXB0aW9uO1xuICAgIGxldCB0aW1lcjtcbiAgICBjb25zdCBpc05vdE1vdW50ZWQgPSAoKSA9PiAhc2V0UmVzdWx0O1xuICAgIGNvbnN0IHN0YXJ0ID0gKCkgPT4ge1xuICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICAgIHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKGQpID0+IGxpc3RlbmVyKHsgZCB9KSxcbiAgICAgICAgZXJyb3I6IChlKSA9PiBsaXN0ZW5lcih7IGUgfSksXG4gICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGlzTm90TW91bnRlZCgpICYmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnVuc3RhYmxlX3RpbWVvdXQpKSB7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSB2b2lkIDA7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBvcHRpb25zLnVuc3RhYmxlX3RpbWVvdXQpO1xuICAgICAgfVxuICAgIH07XG4gICAgc3RhcnQoKTtcbiAgICBjb25zdCByZXN1bHRBdG9tID0gYXRvbShsYXN0UmVzdWx0IHx8IGluaXRpYWxSZXN1bHQpO1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgcmVzdWx0QXRvbS5kZWJ1Z1ByaXZhdGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXN1bHRBdG9tLm9uTW91bnQgPSAodXBkYXRlKSA9PiB7XG4gICAgICBzZXRSZXN1bHQgPSB1cGRhdGU7XG4gICAgICBpZiAobGFzdFJlc3VsdCkge1xuICAgICAgICB1cGRhdGUobGFzdFJlc3VsdCk7XG4gICAgICB9XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc2V0UmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIFtyZXN1bHRBdG9tLCBvYnNlcnZhYmxlLCBtYWtlUGVuZGluZywgc3RhcnQsIGlzTm90TW91bnRlZF07XG4gIH0pO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBvYnNlcnZhYmxlUmVzdWx0QXRvbS5kZWJ1Z1ByaXZhdGUgPSB0cnVlO1xuICB9XG4gIGNvbnN0IG9ic2VydmFibGVBdG9tID0gYXRvbShcbiAgICAoZ2V0KSA9PiB7XG4gICAgICBjb25zdCBbcmVzdWx0QXRvbV0gPSBnZXQob2JzZXJ2YWJsZVJlc3VsdEF0b20pO1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0KHJlc3VsdEF0b20pO1xuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKHJldHVyblJlc3VsdERhdGEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldHVyblJlc3VsdERhdGEocmVzdWx0KTtcbiAgICB9LFxuICAgIChnZXQsIHNldCwgZGF0YSkgPT4ge1xuICAgICAgY29uc3QgW3Jlc3VsdEF0b20sIG9ic2VydmFibGUsIG1ha2VQZW5kaW5nLCBzdGFydCwgaXNOb3RNb3VudGVkXSA9IGdldChvYnNlcnZhYmxlUmVzdWx0QXRvbSk7XG4gICAgICBpZiAoXCJuZXh0XCIgaW4gb2JzZXJ2YWJsZSkge1xuICAgICAgICBpZiAoaXNOb3RNb3VudGVkKCkpIHtcbiAgICAgICAgICBzZXQocmVzdWx0QXRvbSwgbWFrZVBlbmRpbmcoKSk7XG4gICAgICAgICAgc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBvYnNlcnZhYmxlLm5leHQoZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvYnNlcnZhYmxlIGlzIG5vdCBzdWJqZWN0XCIpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIG9ic2VydmFibGVBdG9tO1xufVxuXG5jb25zdCBjYWNoZTEkMSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgbWVtbzEgPSAoY3JlYXRlLCBkZXAxKSA9PiAoY2FjaGUxJDEuaGFzKGRlcDEpID8gY2FjaGUxJDEgOiBjYWNoZTEkMS5zZXQoZGVwMSwgY3JlYXRlKCkpKS5nZXQoZGVwMSk7XG5jb25zdCBpc1Byb21pc2UkMSA9ICh4KSA9PiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbmNvbnN0IExPQURJTkcgPSB7IHN0YXRlOiBcImxvYWRpbmdcIiB9O1xuZnVuY3Rpb24gbG9hZGFibGUoYW5BdG9tKSB7XG4gIHJldHVybiBtZW1vMSgoKSA9PiB7XG4gICAgY29uc3QgbG9hZGFibGVDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0IHJlZnJlc2hBdG9tID0gYXRvbSgwKTtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGRlcml2ZWRBdG9tID0gYXRvbShcbiAgICAgIChnZXQsIHsgc2V0U2VsZiB9KSA9PiB7XG4gICAgICAgIGdldChyZWZyZXNoQXRvbSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YWx1ZSA9IGdldChhbkF0b20pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBcImhhc0Vycm9yXCIsIGVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1Byb21pc2UkMSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4geyBzdGF0ZTogXCJoYXNEYXRhXCIsIGRhdGE6IHZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHZhbHVlO1xuICAgICAgICBjb25zdCBjYWNoZWQxID0gbG9hZGFibGVDYWNoZS5nZXQocHJvbWlzZSk7XG4gICAgICAgIGlmIChjYWNoZWQxKSB7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlZDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21pc2Uuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgbG9hZGFibGVDYWNoZS5zZXQocHJvbWlzZSwgeyBzdGF0ZTogXCJoYXNEYXRhXCIsIGRhdGE6IHByb21pc2UudmFsdWUgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvbWlzZS5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIikge1xuICAgICAgICAgIGxvYWRhYmxlQ2FjaGUuc2V0KHByb21pc2UsIHtcbiAgICAgICAgICAgIHN0YXRlOiBcImhhc0Vycm9yXCIsXG4gICAgICAgICAgICBlcnJvcjogcHJvbWlzZS5yZWFzb25cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9taXNlLnRoZW4oXG4gICAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBsb2FkYWJsZUNhY2hlLnNldChwcm9taXNlLCB7IHN0YXRlOiBcImhhc0RhdGFcIiwgZGF0YSB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgbG9hZGFibGVDYWNoZS5zZXQocHJvbWlzZSwgeyBzdGF0ZTogXCJoYXNFcnJvclwiLCBlcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLmZpbmFsbHkoc2V0U2VsZik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FjaGVkMiA9IGxvYWRhYmxlQ2FjaGUuZ2V0KHByb21pc2UpO1xuICAgICAgICBpZiAoY2FjaGVkMikge1xuICAgICAgICAgIHJldHVybiBjYWNoZWQyO1xuICAgICAgICB9XG4gICAgICAgIGxvYWRhYmxlQ2FjaGUuc2V0KHByb21pc2UsIExPQURJTkcpO1xuICAgICAgICByZXR1cm4gTE9BRElORztcbiAgICAgIH0sXG4gICAgICAoX2dldCwgc2V0KSA9PiB7XG4gICAgICAgIHNldChyZWZyZXNoQXRvbSwgKGMpID0+IGMgKyAxKTtcbiAgICAgIH1cbiAgICApO1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgZGVyaXZlZEF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGF0b20oKGdldCkgPT4gZ2V0KGRlcml2ZWRBdG9tKSk7XG4gIH0sIGFuQXRvbSk7XG59XG5cbmNvbnN0IGdldENhY2hlZCA9IChjLCBtLCBrKSA9PiAobS5oYXMoaykgPyBtIDogbS5zZXQoaywgYygpKSkuZ2V0KGspO1xuY29uc3QgY2FjaGUxID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBtZW1vMiA9IChjcmVhdGUsIGRlcDEsIGRlcDIpID0+IHtcbiAgY29uc3QgY2FjaGUyID0gZ2V0Q2FjaGVkKCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBjYWNoZTEsIGRlcDEpO1xuICByZXR1cm4gZ2V0Q2FjaGVkKGNyZWF0ZSwgY2FjaGUyLCBkZXAyKTtcbn07XG5jb25zdCBpc1Byb21pc2UgPSAoeCkgPT4geCBpbnN0YW5jZW9mIFByb21pc2U7XG5jb25zdCBkZWZhdWx0RmFsbGJhY2sgPSAoKSA9PiB2b2lkIDA7XG5mdW5jdGlvbiB1bndyYXAoYW5BdG9tLCBmYWxsYmFjayA9IGRlZmF1bHRGYWxsYmFjaykge1xuICByZXR1cm4gbWVtbzIoXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZUVycm9yQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgICAgIGNvbnN0IHByb21pc2VSZXN1bHRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgICAgY29uc3QgcmVmcmVzaEF0b20gPSBhdG9tKDApO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9taXNlQW5kVmFsdWVBdG9tID0gYXRvbShcbiAgICAgICAgKGdldCwgeyBzZXRTZWxmIH0pID0+IHtcbiAgICAgICAgICBnZXQocmVmcmVzaEF0b20pO1xuICAgICAgICAgIGNvbnN0IHByZXYgPSBnZXQocHJvbWlzZUFuZFZhbHVlQXRvbSk7XG4gICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGdldChhbkF0b20pO1xuICAgICAgICAgIGlmICghaXNQcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2OiBwcm9taXNlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwcm9taXNlICE9PSAocHJldiA9PSBudWxsID8gdm9pZCAwIDogcHJldi5wKSkge1xuICAgICAgICAgICAgaWYgKHByb21pc2Uuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgIHByb21pc2VSZXN1bHRDYWNoZS5zZXQocHJvbWlzZSwgcHJvbWlzZS52YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb21pc2Uuc3RhdHVzID09PSBcInJlamVjdGVkXCIpIHtcbiAgICAgICAgICAgICAgcHJvbWlzZUVycm9yQ2FjaGUuc2V0KHByb21pc2UsIHByb21pc2UucmVhc29uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHByb21pc2UudGhlbihcbiAgICAgICAgICAgICAgICAodikgPT4gcHJvbWlzZVJlc3VsdENhY2hlLnNldChwcm9taXNlLCB2KSxcbiAgICAgICAgICAgICAgICAoZSkgPT4gcHJvbWlzZUVycm9yQ2FjaGUuc2V0KHByb21pc2UsIGUpXG4gICAgICAgICAgICAgICkuZmluYWxseShzZXRTZWxmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHByb21pc2VFcnJvckNhY2hlLmhhcyhwcm9taXNlKSkge1xuICAgICAgICAgICAgdGhyb3cgcHJvbWlzZUVycm9yQ2FjaGUuZ2V0KHByb21pc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvbWlzZVJlc3VsdENhY2hlLmhhcyhwcm9taXNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcDogcHJvbWlzZSxcbiAgICAgICAgICAgICAgdjogcHJvbWlzZVJlc3VsdENhY2hlLmdldChwcm9taXNlKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHByZXYgJiYgXCJ2XCIgaW4gcHJldikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcDogcHJvbWlzZSwgZjogZmFsbGJhY2socHJldi52KSwgdjogcHJldi52IH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IHA6IHByb21pc2UsIGY6IGZhbGxiYWNrKCkgfTtcbiAgICAgICAgfSxcbiAgICAgICAgKF9nZXQsIHNldCkgPT4ge1xuICAgICAgICAgIHNldChyZWZyZXNoQXRvbSwgKGMpID0+IGMgKyAxKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHByb21pc2VBbmRWYWx1ZUF0b20uaW5pdCA9IHZvaWQgMDtcbiAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBwcm9taXNlQW5kVmFsdWVBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXRvbShcbiAgICAgICAgKGdldCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0KHByb21pc2VBbmRWYWx1ZUF0b20pO1xuICAgICAgICAgIGlmIChcImZcIiBpbiBzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmY7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzdGF0ZS52O1xuICAgICAgICB9LFxuICAgICAgICAoX2dldCwgc2V0LCAuLi5hcmdzKSA9PiBzZXQoYW5BdG9tLCAuLi5hcmdzKVxuICAgICAgKTtcbiAgICB9LFxuICAgIGFuQXRvbSxcbiAgICBmYWxsYmFja1xuICApO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aFJlZnJlc2gocmVhZCwgd3JpdGUpIHtcbiAgY29uc3QgcmVmcmVzaEF0b20gPSBhdG9tKDApO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICByZWZyZXNoQXRvbS5kZWJ1Z1ByaXZhdGUgPSB0cnVlO1xuICB9XG4gIHJldHVybiBhdG9tKFxuICAgIChnZXQsIG9wdGlvbnMpID0+IHtcbiAgICAgIGdldChyZWZyZXNoQXRvbSk7XG4gICAgICByZXR1cm4gcmVhZChnZXQsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgKGdldCwgc2V0LCAuLi5hcmdzKSA9PiB7XG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0KHJlZnJlc2hBdG9tLCAoYykgPT4gYyArIDEpO1xuICAgICAgfSBlbHNlIGlmICh3cml0ZSkge1xuICAgICAgICByZXR1cm4gd3JpdGUoZ2V0LCBzZXQsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuZnVuY3Rpb24gYXRvbVdpdGhMYXp5KG1ha2VJbml0aWFsKSB7XG4gIGNvbnN0IGEgPSBhdG9tKHZvaWQgMCk7XG4gIGRlbGV0ZSBhLmluaXQ7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBcImluaXRcIiwge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiBtYWtlSW5pdGlhbCgpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5leHBvcnQgeyBSRVNFVCwgYXRvbUZhbWlseSwgYXRvbVdpdGhEZWZhdWx0LCBhdG9tV2l0aExhenksIGF0b21XaXRoT2JzZXJ2YWJsZSwgYXRvbVdpdGhSZWR1Y2VyLCBhdG9tV2l0aFJlZnJlc2gsIGF0b21XaXRoUmVzZXQsIGF0b21XaXRoU3RvcmFnZSwgY3JlYXRlSlNPTlN0b3JhZ2UsIGZyZWV6ZUF0b20sIGZyZWV6ZUF0b21DcmVhdG9yLCBsb2FkYWJsZSwgc2VsZWN0QXRvbSwgc3BsaXRBdG9tLCB3aXRoU3RvcmFnZVZhbGlkYXRvciBhcyB1bnN0YWJsZV93aXRoU3RvcmFnZVZhbGlkYXRvciwgdW53cmFwIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/jotai/esm/vanilla/utils.mjs\n");

/***/ })

};
;