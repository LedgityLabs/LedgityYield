/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@graphql-inspector";
exports.ids = ["vendor-chunks/@graphql-inspector"];
exports.modules = {

/***/ "(ssr)/../node_modules/@graphql-inspector/core/node_modules/object-inspect/index.js":
/*!************************************************************************************!*\
  !*** ../node_modules/@graphql-inspector/core/node_modules/object-inspect/index.js ***!
  \************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar match = String.prototype.match;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nvar inspectCustom = (__webpack_require__(/*! ./util.inspect */ \"(ssr)/../node_modules/@graphql-inspector/core/node_modules/object-inspect/util.inspect.js\").custom);\nvar inspectSymbol = inspectCustom && isSymbol(inspectCustom) ? inspectCustom : null;\nvar toStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag !== 'undefined' ? Symbol.toStringTag : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true` or `false`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('options \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        return String(obj);\n    }\n    if (typeof obj === 'bigint') {\n        return String(obj) + 'n';\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = seen.slice();\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function') {\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + keys.join(', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? String(obj).replace(/^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + String(obj.nodeName).toLowerCase();\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + String(obj.nodeName).toLowerCase() + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + xs.join(', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + parts.join(', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function') {\n            return obj[inspectSymbol]();\n        } else if (typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        mapForEach.call(obj, function (value, key) {\n            mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n        });\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        setForEach.call(obj, function (value) {\n            setParts.push(inspect(value, obj));\n        });\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? toStr(obj).slice(8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + [].concat(stringTag || [], protoTag || []).join(': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + ys.join(', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return String(s).replace(/\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString(str.slice(0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = str.replace(/(['\\\\])/g, '\\\\$1').replace(/[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + n.toString(16).toUpperCase();\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : entries.join(', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = Array(opts.indent + 1).join(' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: Array(depth + 1).join(baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + xs.join(',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ((/[^\\w$]/).test(key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BncmFwaHFsLWluc3BlY3Rvci9jb3JlL25vZGVfbW9kdWxlcy9vYmplY3QtaW5zcGVjdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLCtJQUFnQztBQUNwRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRyx5QkFBeUI7QUFDM0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FB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QixZQUFZO0FBQzFDLHdFQUF3RSxZQUFZO0FBQ3BGO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xlZGdpdHkteWllbGQtZnJvbnRlbmQvLi4vbm9kZV9tb2R1bGVzL0BncmFwaHFsLWluc3BlY3Rvci9jb3JlL25vZGVfbW9kdWxlcy9vYmplY3QtaW5zcGVjdC9pbmRleC5qcz84Yzk2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBoYXNNYXAgPSB0eXBlb2YgTWFwID09PSAnZnVuY3Rpb24nICYmIE1hcC5wcm90b3R5cGU7XG52YXIgbWFwU2l6ZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIGhhc01hcCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTWFwLnByb3RvdHlwZSwgJ3NpemUnKSA6IG51bGw7XG52YXIgbWFwU2l6ZSA9IGhhc01hcCAmJiBtYXBTaXplRGVzY3JpcHRvciAmJiB0eXBlb2YgbWFwU2l6ZURlc2NyaXB0b3IuZ2V0ID09PSAnZnVuY3Rpb24nID8gbWFwU2l6ZURlc2NyaXB0b3IuZ2V0IDogbnVsbDtcbnZhciBtYXBGb3JFYWNoID0gaGFzTWFwICYmIE1hcC5wcm90b3R5cGUuZm9yRWFjaDtcbnZhciBoYXNTZXQgPSB0eXBlb2YgU2V0ID09PSAnZnVuY3Rpb24nICYmIFNldC5wcm90b3R5cGU7XG52YXIgc2V0U2l6ZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIGhhc1NldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoU2V0LnByb3RvdHlwZSwgJ3NpemUnKSA6IG51bGw7XG52YXIgc2V0U2l6ZSA9IGhhc1NldCAmJiBzZXRTaXplRGVzY3JpcHRvciAmJiB0eXBlb2Ygc2V0U2l6ZURlc2NyaXB0b3IuZ2V0ID09PSAnZnVuY3Rpb24nID8gc2V0U2l6ZURlc2NyaXB0b3IuZ2V0IDogbnVsbDtcbnZhciBzZXRGb3JFYWNoID0gaGFzU2V0ICYmIFNldC5wcm90b3R5cGUuZm9yRWFjaDtcbnZhciBoYXNXZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgPT09ICdmdW5jdGlvbicgJiYgV2Vha01hcC5wcm90b3R5cGU7XG52YXIgd2Vha01hcEhhcyA9IGhhc1dlYWtNYXAgPyBXZWFrTWFwLnByb3RvdHlwZS5oYXMgOiBudWxsO1xudmFyIGhhc1dlYWtTZXQgPSB0eXBlb2YgV2Vha1NldCA9PT0gJ2Z1bmN0aW9uJyAmJiBXZWFrU2V0LnByb3RvdHlwZTtcbnZhciB3ZWFrU2V0SGFzID0gaGFzV2Vha1NldCA/IFdlYWtTZXQucHJvdG90eXBlLmhhcyA6IG51bGw7XG52YXIgaGFzV2Vha1JlZiA9IHR5cGVvZiBXZWFrUmVmID09PSAnZnVuY3Rpb24nICYmIFdlYWtSZWYucHJvdG90eXBlO1xudmFyIHdlYWtSZWZEZXJlZiA9IGhhc1dlYWtSZWYgPyBXZWFrUmVmLnByb3RvdHlwZS5kZXJlZiA6IG51bGw7XG52YXIgYm9vbGVhblZhbHVlT2YgPSBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mO1xudmFyIG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBmdW5jdGlvblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIG1hdGNoID0gU3RyaW5nLnByb3RvdHlwZS5tYXRjaDtcbnZhciBiaWdJbnRWYWx1ZU9mID0gdHlwZW9mIEJpZ0ludCA9PT0gJ2Z1bmN0aW9uJyA/IEJpZ0ludC5wcm90b3R5cGUudmFsdWVPZiA6IG51bGw7XG52YXIgZ09QUyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgc3ltVG9TdHJpbmcgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICdzeW1ib2wnID8gU3ltYm9sLnByb3RvdHlwZS50b1N0cmluZyA6IG51bGw7XG52YXIgaGFzU2hhbW1lZFN5bWJvbHMgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICdvYmplY3QnO1xudmFyIGlzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbnZhciBnUE8gPSAodHlwZW9mIFJlZmxlY3QgPT09ICdmdW5jdGlvbicgPyBSZWZsZWN0LmdldFByb3RvdHlwZU9mIDogT2JqZWN0LmdldFByb3RvdHlwZU9mKSB8fCAoXG4gICAgW10uX19wcm90b19fID09PSBBcnJheS5wcm90b3R5cGUgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b1xuICAgICAgICA/IGZ1bmN0aW9uIChPKSB7XG4gICAgICAgICAgICByZXR1cm4gTy5fX3Byb3RvX187IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG9cbiAgICAgICAgfVxuICAgICAgICA6IG51bGxcbik7XG5cbnZhciBpbnNwZWN0Q3VzdG9tID0gcmVxdWlyZSgnLi91dGlsLmluc3BlY3QnKS5jdXN0b207XG52YXIgaW5zcGVjdFN5bWJvbCA9IGluc3BlY3RDdXN0b20gJiYgaXNTeW1ib2woaW5zcGVjdEN1c3RvbSkgPyBpbnNwZWN0Q3VzdG9tIDogbnVsbDtcbnZhciB0b1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyAhPT0gJ3VuZGVmaW5lZCcgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiBudWxsO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3BlY3RfKG9iaiwgb3B0aW9ucywgZGVwdGgsIHNlZW4pIHtcbiAgICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge307XG5cbiAgICBpZiAoaGFzKG9wdHMsICdxdW90ZVN0eWxlJykgJiYgKG9wdHMucXVvdGVTdHlsZSAhPT0gJ3NpbmdsZScgJiYgb3B0cy5xdW90ZVN0eWxlICE9PSAnZG91YmxlJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uIFwicXVvdGVTdHlsZVwiIG11c3QgYmUgXCJzaW5nbGVcIiBvciBcImRvdWJsZVwiJyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICAgaGFzKG9wdHMsICdtYXhTdHJpbmdMZW5ndGgnKSAmJiAodHlwZW9mIG9wdHMubWF4U3RyaW5nTGVuZ3RoID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyBvcHRzLm1heFN0cmluZ0xlbmd0aCA8IDAgJiYgb3B0cy5tYXhTdHJpbmdMZW5ndGggIT09IEluZmluaXR5XG4gICAgICAgICAgICA6IG9wdHMubWF4U3RyaW5nTGVuZ3RoICE9PSBudWxsXG4gICAgICAgIClcbiAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uIFwibWF4U3RyaW5nTGVuZ3RoXCIsIGlmIHByb3ZpZGVkLCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciwgSW5maW5pdHksIG9yIGBudWxsYCcpO1xuICAgIH1cbiAgICB2YXIgY3VzdG9tSW5zcGVjdCA9IGhhcyhvcHRzLCAnY3VzdG9tSW5zcGVjdCcpID8gb3B0cy5jdXN0b21JbnNwZWN0IDogdHJ1ZTtcbiAgICBpZiAodHlwZW9mIGN1c3RvbUluc3BlY3QgIT09ICdib29sZWFuJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gXCJjdXN0b21JbnNwZWN0XCIsIGlmIHByb3ZpZGVkLCBtdXN0IGJlIGB0cnVlYCBvciBgZmFsc2VgJyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICBoYXMob3B0cywgJ2luZGVudCcpXG4gICAgICAgICYmIG9wdHMuaW5kZW50ICE9PSBudWxsXG4gICAgICAgICYmIG9wdHMuaW5kZW50ICE9PSAnXFx0J1xuICAgICAgICAmJiAhKHBhcnNlSW50KG9wdHMuaW5kZW50LCAxMCkgPT09IG9wdHMuaW5kZW50ICYmIG9wdHMuaW5kZW50ID4gMClcbiAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBcImluZGVudFwiIG11c3QgYmUgXCJcXFxcdFwiLCBhbiBpbnRlZ2VyID4gMCwgb3IgYG51bGxgJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgICB9XG4gICAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJ251bGwnO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBvYmogPyAndHJ1ZScgOiAnZmFsc2UnO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gaW5zcGVjdFN0cmluZyhvYmosIG9wdHMpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKG9iaiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIEluZmluaXR5IC8gb2JqID4gMCA/ICcwJyA6ICctMCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZyhvYmopO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhvYmopICsgJ24nO1xuICAgIH1cblxuICAgIHZhciBtYXhEZXB0aCA9IHR5cGVvZiBvcHRzLmRlcHRoID09PSAndW5kZWZpbmVkJyA/IDUgOiBvcHRzLmRlcHRoO1xuICAgIGlmICh0eXBlb2YgZGVwdGggPT09ICd1bmRlZmluZWQnKSB7IGRlcHRoID0gMDsgfVxuICAgIGlmIChkZXB0aCA+PSBtYXhEZXB0aCAmJiBtYXhEZXB0aCA+IDAgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkob2JqKSA/ICdbQXJyYXldJyA6ICdbT2JqZWN0XSc7XG4gICAgfVxuXG4gICAgdmFyIGluZGVudCA9IGdldEluZGVudChvcHRzLCBkZXB0aCk7XG5cbiAgICBpZiAodHlwZW9mIHNlZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlZW4gPSBbXTtcbiAgICB9IGVsc2UgaWYgKGluZGV4T2Yoc2Vlbiwgb2JqKSA+PSAwKSB7XG4gICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zcGVjdCh2YWx1ZSwgZnJvbSwgbm9JbmRlbnQpIHtcbiAgICAgICAgaWYgKGZyb20pIHtcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuLnNsaWNlKCk7XG4gICAgICAgICAgICBzZWVuLnB1c2goZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vSW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgbmV3T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBkZXB0aDogb3B0cy5kZXB0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChoYXMob3B0cywgJ3F1b3RlU3R5bGUnKSkge1xuICAgICAgICAgICAgICAgIG5ld09wdHMucXVvdGVTdHlsZSA9IG9wdHMucXVvdGVTdHlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnNwZWN0Xyh2YWx1ZSwgbmV3T3B0cywgZGVwdGggKyAxLCBzZWVuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zcGVjdF8odmFsdWUsIG9wdHMsIGRlcHRoICsgMSwgc2Vlbik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBuYW1lT2Yob2JqKTtcbiAgICAgICAgdmFyIGtleXMgPSBhcnJPYmpLZXlzKG9iaiwgaW5zcGVjdCk7XG4gICAgICAgIHJldHVybiAnW0Z1bmN0aW9uJyArIChuYW1lID8gJzogJyArIG5hbWUgOiAnIChhbm9ueW1vdXMpJykgKyAnXScgKyAoa2V5cy5sZW5ndGggPiAwID8gJyB7ICcgKyBrZXlzLmpvaW4oJywgJykgKyAnIH0nIDogJycpO1xuICAgIH1cbiAgICBpZiAoaXNTeW1ib2wob2JqKSkge1xuICAgICAgICB2YXIgc3ltU3RyaW5nID0gaGFzU2hhbW1lZFN5bWJvbHMgPyBTdHJpbmcob2JqKS5yZXBsYWNlKC9eKFN5bWJvbFxcKC4qXFwpKV9bXildKiQvLCAnJDEnKSA6IHN5bVRvU3RyaW5nLmNhbGwob2JqKTtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmICFoYXNTaGFtbWVkU3ltYm9scyA/IG1hcmtCb3hlZChzeW1TdHJpbmcpIDogc3ltU3RyaW5nO1xuICAgIH1cbiAgICBpZiAoaXNFbGVtZW50KG9iaikpIHtcbiAgICAgICAgdmFyIHMgPSAnPCcgKyBTdHJpbmcob2JqLm5vZGVOYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgYXR0cnMgPSBvYmouYXR0cmlidXRlcyB8fCBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcyArPSAnICcgKyBhdHRyc1tpXS5uYW1lICsgJz0nICsgd3JhcFF1b3RlcyhxdW90ZShhdHRyc1tpXS52YWx1ZSksICdkb3VibGUnLCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBzICs9ICc+JztcbiAgICAgICAgaWYgKG9iai5jaGlsZE5vZGVzICYmIG9iai5jaGlsZE5vZGVzLmxlbmd0aCkgeyBzICs9ICcuLi4nOyB9XG4gICAgICAgIHMgKz0gJzwvJyArIFN0cmluZyhvYmoubm9kZU5hbWUpLnRvTG93ZXJDYXNlKCkgKyAnPic7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgIGlmIChvYmoubGVuZ3RoID09PSAwKSB7IHJldHVybiAnW10nOyB9XG4gICAgICAgIHZhciB4cyA9IGFyck9iaktleXMob2JqLCBpbnNwZWN0KTtcbiAgICAgICAgaWYgKGluZGVudCAmJiAhc2luZ2xlTGluZVZhbHVlcyh4cykpIHtcbiAgICAgICAgICAgIHJldHVybiAnWycgKyBpbmRlbnRlZEpvaW4oeHMsIGluZGVudCkgKyAnXSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdbICcgKyB4cy5qb2luKCcsICcpICsgJyBdJztcbiAgICB9XG4gICAgaWYgKGlzRXJyb3Iob2JqKSkge1xuICAgICAgICB2YXIgcGFydHMgPSBhcnJPYmpLZXlzKG9iaiwgaW5zcGVjdCk7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHsgcmV0dXJuICdbJyArIFN0cmluZyhvYmopICsgJ10nOyB9XG4gICAgICAgIHJldHVybiAneyBbJyArIFN0cmluZyhvYmopICsgJ10gJyArIHBhcnRzLmpvaW4oJywgJykgKyAnIH0nO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgY3VzdG9tSW5zcGVjdCkge1xuICAgICAgICBpZiAoaW5zcGVjdFN5bWJvbCAmJiB0eXBlb2Ygb2JqW2luc3BlY3RTeW1ib2xdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2luc3BlY3RTeW1ib2xdKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iai5pbnNwZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLmluc3BlY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNNYXAob2JqKSkge1xuICAgICAgICB2YXIgbWFwUGFydHMgPSBbXTtcbiAgICAgICAgbWFwRm9yRWFjaC5jYWxsKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIG1hcFBhcnRzLnB1c2goaW5zcGVjdChrZXksIG9iaiwgdHJ1ZSkgKyAnID0+ICcgKyBpbnNwZWN0KHZhbHVlLCBvYmopKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uT2YoJ01hcCcsIG1hcFNpemUuY2FsbChvYmopLCBtYXBQYXJ0cywgaW5kZW50KTtcbiAgICB9XG4gICAgaWYgKGlzU2V0KG9iaikpIHtcbiAgICAgICAgdmFyIHNldFBhcnRzID0gW107XG4gICAgICAgIHNldEZvckVhY2guY2FsbChvYmosIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgc2V0UGFydHMucHVzaChpbnNwZWN0KHZhbHVlLCBvYmopKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uT2YoJ1NldCcsIHNldFNpemUuY2FsbChvYmopLCBzZXRQYXJ0cywgaW5kZW50KTtcbiAgICB9XG4gICAgaWYgKGlzV2Vha01hcChvYmopKSB7XG4gICAgICAgIHJldHVybiB3ZWFrQ29sbGVjdGlvbk9mKCdXZWFrTWFwJyk7XG4gICAgfVxuICAgIGlmIChpc1dlYWtTZXQob2JqKSkge1xuICAgICAgICByZXR1cm4gd2Vha0NvbGxlY3Rpb25PZignV2Vha1NldCcpO1xuICAgIH1cbiAgICBpZiAoaXNXZWFrUmVmKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIHdlYWtDb2xsZWN0aW9uT2YoJ1dlYWtSZWYnKTtcbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIG1hcmtCb3hlZChpbnNwZWN0KE51bWJlcihvYmopKSk7XG4gICAgfVxuICAgIGlmIChpc0JpZ0ludChvYmopKSB7XG4gICAgICAgIHJldHVybiBtYXJrQm94ZWQoaW5zcGVjdChiaWdJbnRWYWx1ZU9mLmNhbGwob2JqKSkpO1xuICAgIH1cbiAgICBpZiAoaXNCb29sZWFuKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIG1hcmtCb3hlZChib29sZWFuVmFsdWVPZi5jYWxsKG9iaikpO1xuICAgIH1cbiAgICBpZiAoaXNTdHJpbmcob2JqKSkge1xuICAgICAgICByZXR1cm4gbWFya0JveGVkKGluc3BlY3QoU3RyaW5nKG9iaikpKTtcbiAgICB9XG4gICAgaWYgKCFpc0RhdGUob2JqKSAmJiAhaXNSZWdFeHAob2JqKSkge1xuICAgICAgICB2YXIgeXMgPSBhcnJPYmpLZXlzKG9iaiwgaW5zcGVjdCk7XG4gICAgICAgIHZhciBpc1BsYWluT2JqZWN0ID0gZ1BPID8gZ1BPKG9iaikgPT09IE9iamVjdC5wcm90b3R5cGUgOiBvYmogaW5zdGFuY2VvZiBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG4gICAgICAgIHZhciBwcm90b1RhZyA9IG9iaiBpbnN0YW5jZW9mIE9iamVjdCA/ICcnIDogJ251bGwgcHJvdG90eXBlJztcbiAgICAgICAgdmFyIHN0cmluZ1RhZyA9ICFpc1BsYWluT2JqZWN0ICYmIHRvU3RyaW5nVGFnICYmIE9iamVjdChvYmopID09PSBvYmogJiYgdG9TdHJpbmdUYWcgaW4gb2JqID8gdG9TdHIob2JqKS5zbGljZSg4LCAtMSkgOiBwcm90b1RhZyA/ICdPYmplY3QnIDogJyc7XG4gICAgICAgIHZhciBjb25zdHJ1Y3RvclRhZyA9IGlzUGxhaW5PYmplY3QgfHwgdHlwZW9mIG9iai5jb25zdHJ1Y3RvciAhPT0gJ2Z1bmN0aW9uJyA/ICcnIDogb2JqLmNvbnN0cnVjdG9yLm5hbWUgPyBvYmouY29uc3RydWN0b3IubmFtZSArICcgJyA6ICcnO1xuICAgICAgICB2YXIgdGFnID0gY29uc3RydWN0b3JUYWcgKyAoc3RyaW5nVGFnIHx8IHByb3RvVGFnID8gJ1snICsgW10uY29uY2F0KHN0cmluZ1RhZyB8fCBbXSwgcHJvdG9UYWcgfHwgW10pLmpvaW4oJzogJykgKyAnXSAnIDogJycpO1xuICAgICAgICBpZiAoeXMubGVuZ3RoID09PSAwKSB7IHJldHVybiB0YWcgKyAne30nOyB9XG4gICAgICAgIGlmIChpbmRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWcgKyAneycgKyBpbmRlbnRlZEpvaW4oeXMsIGluZGVudCkgKyAnfSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhZyArICd7ICcgKyB5cy5qb2luKCcsICcpICsgJyB9JztcbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyhvYmopO1xufTtcblxuZnVuY3Rpb24gd3JhcFF1b3RlcyhzLCBkZWZhdWx0U3R5bGUsIG9wdHMpIHtcbiAgICB2YXIgcXVvdGVDaGFyID0gKG9wdHMucXVvdGVTdHlsZSB8fCBkZWZhdWx0U3R5bGUpID09PSAnZG91YmxlJyA/ICdcIicgOiBcIidcIjtcbiAgICByZXR1cm4gcXVvdGVDaGFyICsgcyArIHF1b3RlQ2hhcjtcbn1cblxuZnVuY3Rpb24gcXVvdGUocykge1xuICAgIHJldHVybiBTdHJpbmcocykucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7IH1cbmZ1bmN0aW9uIGlzRGF0ZShvYmopIHsgcmV0dXJuIHRvU3RyKG9iaikgPT09ICdbb2JqZWN0IERhdGVdJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7IH1cbmZ1bmN0aW9uIGlzUmVnRXhwKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgUmVnRXhwXScgJiYgKCF0b1N0cmluZ1RhZyB8fCAhKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHRvU3RyaW5nVGFnIGluIG9iaikpOyB9XG5mdW5jdGlvbiBpc0Vycm9yKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7IH1cbmZ1bmN0aW9uIGlzU3RyaW5nKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXScgJiYgKCF0b1N0cmluZ1RhZyB8fCAhKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHRvU3RyaW5nVGFnIGluIG9iaikpOyB9XG5mdW5jdGlvbiBpc051bWJlcihvYmopIHsgcmV0dXJuIHRvU3RyKG9iaikgPT09ICdbb2JqZWN0IE51bWJlcl0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsgfVxuZnVuY3Rpb24gaXNCb29sZWFuKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsgfVxuXG4vLyBTeW1ib2wgYW5kIEJpZ0ludCBkbyBoYXZlIFN5bWJvbC50b1N0cmluZ1RhZyBieSBzcGVjLCBzbyB0aGF0IGNhbid0IGJlIHVzZWQgdG8gZWxpbWluYXRlIGZhbHNlIHBvc2l0aXZlc1xuZnVuY3Rpb24gaXNTeW1ib2wob2JqKSB7XG4gICAgaWYgKGhhc1NoYW1tZWRTeW1ib2xzKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqIGluc3RhbmNlb2YgU3ltYm9sO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N5bWJvbCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8ICFzeW1Ub1N0cmluZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHN5bVRvU3RyaW5nLmNhbGwob2JqKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzQmlnSW50KG9iaikge1xuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8ICFiaWdJbnRWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgYmlnSW50VmFsdWVPZi5jYWxsKG9iaik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSB8fCBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkgaW4gdGhpczsgfTtcbmZ1bmN0aW9uIGhhcyhvYmosIGtleSkge1xuICAgIHJldHVybiBoYXNPd24uY2FsbChvYmosIGtleSk7XG59XG5cbmZ1bmN0aW9uIHRvU3RyKG9iaikge1xuICAgIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKG9iaik7XG59XG5cbmZ1bmN0aW9uIG5hbWVPZihmKSB7XG4gICAgaWYgKGYubmFtZSkgeyByZXR1cm4gZi5uYW1lOyB9XG4gICAgdmFyIG0gPSBtYXRjaC5jYWxsKGZ1bmN0aW9uVG9TdHJpbmcuY2FsbChmKSwgL15mdW5jdGlvblxccyooW1xcdyRdKykvKTtcbiAgICBpZiAobSkgeyByZXR1cm4gbVsxXTsgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpbmRleE9mKHhzLCB4KSB7XG4gICAgaWYgKHhzLmluZGV4T2YpIHsgcmV0dXJuIHhzLmluZGV4T2YoeCk7IH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoeHNbaV0gPT09IHgpIHsgcmV0dXJuIGk7IH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuXG5mdW5jdGlvbiBpc01hcCh4KSB7XG4gICAgaWYgKCFtYXBTaXplIHx8ICF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIG1hcFNpemUuY2FsbCh4KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldFNpemUuY2FsbCh4KTtcbiAgICAgICAgfSBjYXRjaCAocykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggaW5zdGFuY2VvZiBNYXA7IC8vIGNvcmUtanMgd29ya2Fyb3VuZCwgcHJlLXYyLjUuMFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1dlYWtNYXAoeCkge1xuICAgIGlmICghd2Vha01hcEhhcyB8fCAheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICB3ZWFrTWFwSGFzLmNhbGwoeCwgd2Vha01hcEhhcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3ZWFrU2V0SGFzLmNhbGwoeCwgd2Vha1NldEhhcyk7XG4gICAgICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4IGluc3RhbmNlb2YgV2Vha01hcDsgLy8gY29yZS1qcyB3b3JrYXJvdW5kLCBwcmUtdjIuNS4wXG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzV2Vha1JlZih4KSB7XG4gICAgaWYgKCF3ZWFrUmVmRGVyZWYgfHwgIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgd2Vha1JlZkRlcmVmLmNhbGwoeCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1NldCh4KSB7XG4gICAgaWYgKCFzZXRTaXplIHx8ICF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHNldFNpemUuY2FsbCh4KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG1hcFNpemUuY2FsbCh4KTtcbiAgICAgICAgfSBjYXRjaCAobSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggaW5zdGFuY2VvZiBTZXQ7IC8vIGNvcmUtanMgd29ya2Fyb3VuZCwgcHJlLXYyLjUuMFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1dlYWtTZXQoeCkge1xuICAgIGlmICghd2Vha1NldEhhcyB8fCAheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICB3ZWFrU2V0SGFzLmNhbGwoeCwgd2Vha1NldEhhcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3ZWFrTWFwSGFzLmNhbGwoeCwgd2Vha01hcEhhcyk7XG4gICAgICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4IGluc3RhbmNlb2YgV2Vha1NldDsgLy8gY29yZS1qcyB3b3JrYXJvdW5kLCBwcmUtdjIuNS4wXG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzRWxlbWVudCh4KSB7XG4gICAgaWYgKCF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0JykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2YgeC5ub2RlTmFtZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHguZ2V0QXR0cmlidXRlID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpbnNwZWN0U3RyaW5nKHN0ciwgb3B0cykge1xuICAgIGlmIChzdHIubGVuZ3RoID4gb3B0cy5tYXhTdHJpbmdMZW5ndGgpIHtcbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHN0ci5sZW5ndGggLSBvcHRzLm1heFN0cmluZ0xlbmd0aDtcbiAgICAgICAgdmFyIHRyYWlsZXIgPSAnLi4uICcgKyByZW1haW5pbmcgKyAnIG1vcmUgY2hhcmFjdGVyJyArIChyZW1haW5pbmcgPiAxID8gJ3MnIDogJycpO1xuICAgICAgICByZXR1cm4gaW5zcGVjdFN0cmluZyhzdHIuc2xpY2UoMCwgb3B0cy5tYXhTdHJpbmdMZW5ndGgpLCBvcHRzKSArIHRyYWlsZXI7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgdmFyIHMgPSBzdHIucmVwbGFjZSgvKFsnXFxcXF0pL2csICdcXFxcJDEnKS5yZXBsYWNlKC9bXFx4MDAtXFx4MWZdL2csIGxvd2J5dGUpO1xuICAgIHJldHVybiB3cmFwUXVvdGVzKHMsICdzaW5nbGUnLCBvcHRzKTtcbn1cblxuZnVuY3Rpb24gbG93Ynl0ZShjKSB7XG4gICAgdmFyIG4gPSBjLmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIHggPSB7XG4gICAgICAgIDg6ICdiJyxcbiAgICAgICAgOTogJ3QnLFxuICAgICAgICAxMDogJ24nLFxuICAgICAgICAxMjogJ2YnLFxuICAgICAgICAxMzogJ3InXG4gICAgfVtuXTtcbiAgICBpZiAoeCkgeyByZXR1cm4gJ1xcXFwnICsgeDsgfVxuICAgIHJldHVybiAnXFxcXHgnICsgKG4gPCAweDEwID8gJzAnIDogJycpICsgbi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gbWFya0JveGVkKHN0cikge1xuICAgIHJldHVybiAnT2JqZWN0KCcgKyBzdHIgKyAnKSc7XG59XG5cbmZ1bmN0aW9uIHdlYWtDb2xsZWN0aW9uT2YodHlwZSkge1xuICAgIHJldHVybiB0eXBlICsgJyB7ID8gfSc7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb25PZih0eXBlLCBzaXplLCBlbnRyaWVzLCBpbmRlbnQpIHtcbiAgICB2YXIgam9pbmVkRW50cmllcyA9IGluZGVudCA/IGluZGVudGVkSm9pbihlbnRyaWVzLCBpbmRlbnQpIDogZW50cmllcy5qb2luKCcsICcpO1xuICAgIHJldHVybiB0eXBlICsgJyAoJyArIHNpemUgKyAnKSB7JyArIGpvaW5lZEVudHJpZXMgKyAnfSc7XG59XG5cbmZ1bmN0aW9uIHNpbmdsZUxpbmVWYWx1ZXMoeHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpbmRleE9mKHhzW2ldLCAnXFxuJykgPj0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBnZXRJbmRlbnQob3B0cywgZGVwdGgpIHtcbiAgICB2YXIgYmFzZUluZGVudDtcbiAgICBpZiAob3B0cy5pbmRlbnQgPT09ICdcXHQnKSB7XG4gICAgICAgIGJhc2VJbmRlbnQgPSAnXFx0JztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRzLmluZGVudCA9PT0gJ251bWJlcicgJiYgb3B0cy5pbmRlbnQgPiAwKSB7XG4gICAgICAgIGJhc2VJbmRlbnQgPSBBcnJheShvcHRzLmluZGVudCArIDEpLmpvaW4oJyAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFzZTogYmFzZUluZGVudCxcbiAgICAgICAgcHJldjogQXJyYXkoZGVwdGggKyAxKS5qb2luKGJhc2VJbmRlbnQpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaW5kZW50ZWRKb2luKHhzLCBpbmRlbnQpIHtcbiAgICBpZiAoeHMubGVuZ3RoID09PSAwKSB7IHJldHVybiAnJzsgfVxuICAgIHZhciBsaW5lSm9pbmVyID0gJ1xcbicgKyBpbmRlbnQucHJldiArIGluZGVudC5iYXNlO1xuICAgIHJldHVybiBsaW5lSm9pbmVyICsgeHMuam9pbignLCcgKyBsaW5lSm9pbmVyKSArICdcXG4nICsgaW5kZW50LnByZXY7XG59XG5cbmZ1bmN0aW9uIGFyck9iaktleXMob2JqLCBpbnNwZWN0KSB7XG4gICAgdmFyIGlzQXJyID0gaXNBcnJheShvYmopO1xuICAgIHZhciB4cyA9IFtdO1xuICAgIGlmIChpc0Fycikge1xuICAgICAgICB4cy5sZW5ndGggPSBvYmoubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgeHNbaV0gPSBoYXMob2JqLCBpKSA/IGluc3BlY3Qob2JqW2ldLCBvYmopIDogJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHN5bXMgPSB0eXBlb2YgZ09QUyA9PT0gJ2Z1bmN0aW9uJyA/IGdPUFMob2JqKSA6IFtdO1xuICAgIHZhciBzeW1NYXA7XG4gICAgaWYgKGhhc1NoYW1tZWRTeW1ib2xzKSB7XG4gICAgICAgIHN5bU1hcCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHN5bXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIHN5bU1hcFsnJCcgKyBzeW1zW2tdXSA9IHN5bXNba107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKCFoYXMob2JqLCBrZXkpKSB7IGNvbnRpbnVlOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgsIG5vLWNvbnRpbnVlXG4gICAgICAgIGlmIChpc0FyciAmJiBTdHJpbmcoTnVtYmVyKGtleSkpID09PSBrZXkgJiYga2V5IDwgb2JqLmxlbmd0aCkgeyBjb250aW51ZTsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby1jb250aW51ZVxuICAgICAgICBpZiAoaGFzU2hhbW1lZFN5bWJvbHMgJiYgc3ltTWFwWyckJyArIGtleV0gaW5zdGFuY2VvZiBTeW1ib2wpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdG8gcHJldmVudCBzaGFtbWVkIFN5bWJvbHMsIHdoaWNoIGFyZSBzdG9yZWQgYXMgc3RyaW5ncywgZnJvbSBiZWluZyBpbmNsdWRlZCBpbiB0aGUgc3RyaW5nIGtleSBzZWN0aW9uXG4gICAgICAgICAgICBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheCwgbm8tY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmICgoL1teXFx3JF0vKS50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgIHhzLnB1c2goaW5zcGVjdChrZXksIG9iaikgKyAnOiAnICsgaW5zcGVjdChvYmpba2V5XSwgb2JqKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4cy5wdXNoKGtleSArICc6ICcgKyBpbnNwZWN0KG9ialtrZXldLCBvYmopKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGdPUFMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzeW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoaXNFbnVtZXJhYmxlLmNhbGwob2JqLCBzeW1zW2pdKSkge1xuICAgICAgICAgICAgICAgIHhzLnB1c2goJ1snICsgaW5zcGVjdChzeW1zW2pdKSArICddOiAnICsgaW5zcGVjdChvYmpbc3ltc1tqXV0sIG9iaikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4cztcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@graphql-inspector/core/node_modules/object-inspect/index.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@graphql-inspector/core/node_modules/object-inspect/util.inspect.js":
/*!*******************************************************************************************!*\
  !*** ../node_modules/@graphql-inspector/core/node_modules/object-inspect/util.inspect.js ***!
  \*******************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__(/*! util */ \"util\").inspect;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BncmFwaHFsLWluc3BlY3Rvci9jb3JlL25vZGVfbW9kdWxlcy9vYmplY3QtaW5zcGVjdC91dGlsLmluc3BlY3QuanMiLCJtYXBwaW5ncyI6IkFBQUEsZ0VBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVkZ2l0eS15aWVsZC1mcm9udGVuZC8uLi9ub2RlX21vZHVsZXMvQGdyYXBocWwtaW5zcGVjdG9yL2NvcmUvbm9kZV9tb2R1bGVzL29iamVjdC1pbnNwZWN0L3V0aWwuaW5zcGVjdC5qcz84MTdlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgndXRpbCcpLmluc3BlY3Q7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@graphql-inspector/core/node_modules/object-inspect/util.inspect.js\n");

/***/ }),

/***/ "(ssr)/../node_modules/@graphql-inspector/core/index.mjs":
/*!*********************************************************!*\
  !*** ../node_modules/@graphql-inspector/core/index.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChangeType: () => (/* binding */ ChangeType),\n/* harmony export */   CriticalityLevel: () => (/* binding */ CriticalityLevel),\n/* harmony export */   DiffRule: () => (/* binding */ DiffRule),\n/* harmony export */   coverage: () => (/* binding */ coverage),\n/* harmony export */   diff: () => (/* binding */ diff),\n/* harmony export */   getTypePrefix: () => (/* binding */ getTypePrefix),\n/* harmony export */   similar: () => (/* binding */ similar),\n/* harmony export */   validate: () => (/* binding */ validate)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tslib */ \"(ssr)/../node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/type/definition.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/language/kinds.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/utilities/TypeInfo.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/language/visitor.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/error/GraphQLError.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/language/parser.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/utilities/extendSchema.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/language/printer.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/validation/validate.mjs\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! graphql */ \"(ssr)/../node_modules/graphql/utilities/printSchema.mjs\");\n/* harmony import */ var object_inspect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! object-inspect */ \"(ssr)/../node_modules/@graphql-inspector/core/node_modules/object-inspect/index.js\");\n/* harmony import */ var dependency_graph__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dependency-graph */ \"(ssr)/../node_modules/dependency-graph/lib/dep_graph.js\");\n\n\n\n\n\nfunction keyMap(list, keyFn) {\n    return list.reduce((map, item) => {\n        map[keyFn(item)] = item;\n        return map;\n    }, Object.create(null));\n}\nfunction isEqual(a, b) {\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length)\n            return false;\n        for (var index = 0; index < a.length; index++) {\n            if (!isEqual(a[index], b[index])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    if (a && b && typeof a === 'object' && typeof b === 'object') {\n        const aRecord = a;\n        const bRecord = b;\n        const aKeys = Object.keys(aRecord);\n        const bKeys = Object.keys(bRecord);\n        if (aKeys.length !== bKeys.length)\n            return false;\n        for (const key of aKeys) {\n            if (!isEqual(aRecord[key], bRecord[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return a === b || (!a && !b);\n}\nfunction isNotEqual(a, b) {\n    return !isEqual(a, b);\n}\nfunction isVoid(a) {\n    return typeof a === 'undefined' || a === null;\n}\nfunction diffArrays(a, b) {\n    return a.filter((c) => !b.some((d) => isEqual(d, c)));\n}\nfunction compareLists(oldList, newList, callbacks) {\n    const oldMap = keyMap(oldList, ({ name }) => name);\n    const newMap = keyMap(newList, ({ name }) => name);\n    const added = [];\n    const removed = [];\n    const mutual = [];\n    for (const oldItem of oldList) {\n        const newItem = newMap[oldItem.name];\n        if (newItem === undefined) {\n            removed.push(oldItem);\n        }\n        else {\n            mutual.push({\n                newVersion: newItem,\n                oldVersion: oldItem,\n            });\n        }\n    }\n    for (const newItem of newList) {\n        if (oldMap[newItem.name] === undefined) {\n            added.push(newItem);\n        }\n    }\n    if (callbacks) {\n        if (callbacks.onAdded) {\n            added.forEach(callbacks.onAdded);\n        }\n        if (callbacks.onRemoved) {\n            removed.forEach(callbacks.onRemoved);\n        }\n        if (callbacks.onMutual) {\n            mutual.forEach(callbacks.onMutual);\n        }\n    }\n    return {\n        added,\n        removed,\n        mutual,\n    };\n}\n\nfunction isDeprecated(fieldOrEnumValue) {\n    var _a, _b;\n    if ('isDeprecated' in fieldOrEnumValue) {\n        return fieldOrEnumValue['isDeprecated'];\n    }\n    if (fieldOrEnumValue.deprecationReason != null) {\n        return true;\n    }\n    if ((_b = (_a = fieldOrEnumValue.astNode) === null || _a === void 0 ? void 0 : _a.directives) === null || _b === void 0 ? void 0 : _b.some((directive) => directive.name.value === 'deprecated')) {\n        return true;\n    }\n    return false;\n}\n\nfunction safeChangeForField(oldType, newType) {\n    if (!(0,graphql__WEBPACK_IMPORTED_MODULE_2__.isWrappingType)(oldType) && !(0,graphql__WEBPACK_IMPORTED_MODULE_2__.isWrappingType)(newType)) {\n        return oldType.toString() === newType.toString();\n    }\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(newType)) {\n        const ofType = (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(oldType) ? oldType.ofType : oldType;\n        return safeChangeForField(ofType, newType.ofType);\n    }\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isListType)(oldType)) {\n        return (((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isListType)(newType) &&\n            safeChangeForField(oldType.ofType, newType.ofType)) ||\n            ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(newType) && safeChangeForField(oldType, newType.ofType)));\n    }\n    return false;\n}\nfunction safeChangeForInputValue(oldType, newType) {\n    if (!(0,graphql__WEBPACK_IMPORTED_MODULE_2__.isWrappingType)(oldType) && !(0,graphql__WEBPACK_IMPORTED_MODULE_2__.isWrappingType)(newType)) {\n        return oldType.toString() === newType.toString();\n    }\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isListType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isListType)(newType)) {\n        return safeChangeForInputValue(oldType.ofType, newType.ofType);\n    }\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(oldType)) {\n        const ofType = (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(newType) ? newType.ofType : newType;\n        return safeChangeForInputValue(oldType.ofType, ofType);\n    }\n    return false;\n}\nfunction getKind(type) {\n    const node = type.astNode;\n    return (node && node.kind) || '';\n}\nfunction getTypePrefix(type) {\n    const kind = getKind(type);\n    const kindsMap = {\n        [graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.SCALAR_TYPE_DEFINITION]: 'scalar',\n        [graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.OBJECT_TYPE_DEFINITION]: 'type',\n        [graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.INTERFACE_TYPE_DEFINITION]: 'interface',\n        [graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.UNION_TYPE_DEFINITION]: 'union',\n        [graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.ENUM_TYPE_DEFINITION]: 'enum',\n        [graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.INPUT_OBJECT_TYPE_DEFINITION]: 'input',\n    };\n    return kindsMap[kind.toString()];\n}\nfunction isPrimitive(type) {\n    return (['String', 'Int', 'Float', 'Boolean', 'ID'].indexOf(typeof type === 'string' ? type : type.name) !== -1);\n}\nfunction isForIntrospection(type) {\n    return ([\n        '__Schema',\n        '__Type',\n        '__TypeKind',\n        '__Field',\n        '__InputValue',\n        '__EnumValue',\n        '__Directive',\n        '__DirectiveLocation',\n    ].indexOf(typeof type === 'string' ? type : type.name) !== -1);\n}\nfunction findDeprecatedUsages(schema, ast) {\n    const errors = [];\n    const typeInfo = new graphql__WEBPACK_IMPORTED_MODULE_4__.TypeInfo(schema);\n    (0,graphql__WEBPACK_IMPORTED_MODULE_5__.visit)(ast, (0,graphql__WEBPACK_IMPORTED_MODULE_4__.visitWithTypeInfo)(typeInfo, {\n        Argument(node) {\n            const argument = typeInfo.getArgument();\n            if (argument) {\n                const reason = argument.deprecationReason;\n                if (reason) {\n                    const fieldDef = typeInfo.getFieldDef();\n                    if (fieldDef) {\n                        errors.push(new graphql__WEBPACK_IMPORTED_MODULE_6__.GraphQLError(`The argument '${argument === null || argument === void 0 ? void 0 : argument.name}' of '${fieldDef.name}' is deprecated. ${reason}`, [node]));\n                    }\n                }\n            }\n        },\n        Field(node) {\n            const fieldDef = typeInfo.getFieldDef();\n            if (fieldDef && isDeprecated(fieldDef)) {\n                const parentType = typeInfo.getParentType();\n                if (parentType) {\n                    const reason = fieldDef.deprecationReason;\n                    errors.push(new graphql__WEBPACK_IMPORTED_MODULE_6__.GraphQLError(`The field '${parentType.name}.${fieldDef.name}' is deprecated.${reason ? ' ' + reason : ''}`, [node]));\n                }\n            }\n        },\n        EnumValue(node) {\n            const enumVal = typeInfo.getEnumValue();\n            if (enumVal && isDeprecated(enumVal)) {\n                const type = (0,graphql__WEBPACK_IMPORTED_MODULE_2__.getNamedType)(typeInfo.getInputType());\n                if (type) {\n                    const reason = enumVal.deprecationReason;\n                    errors.push(new graphql__WEBPACK_IMPORTED_MODULE_6__.GraphQLError(`The enum value '${type.name}.${enumVal.name}' is deprecated.${reason ? ' ' + reason : ''}`, [node]));\n                }\n            }\n        },\n    }));\n    return errors;\n}\nfunction removeFieldIfDirectives(node, directiveNames) {\n    if (node.directives) {\n        if (node.directives.some((d) => directiveNames.indexOf(d.name.value) !== -1)) {\n            return null;\n        }\n    }\n    return node;\n}\nfunction removeDirectives(node, directiveNames) {\n    if (node.directives) {\n        return Object.assign(Object.assign({}, node), { directives: node.directives.filter((d) => directiveNames.indexOf(d.name.value) === -1) });\n    }\n    return node;\n}\nfunction getReachableTypes(schema) {\n    const reachableTypes = new Set();\n    const collect = (type) => {\n        const typeName = type.name;\n        if (reachableTypes.has(typeName)) {\n            return;\n        }\n        reachableTypes.add(typeName);\n        if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isScalarType)(type)) {\n            return;\n        }\n        else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(type) || (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isObjectType)(type)) {\n            if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(type)) {\n                const { objects, interfaces } = schema.getImplementations(type);\n                for (const child of objects) {\n                    collect(child);\n                }\n                for (const child of interfaces) {\n                    collect(child);\n                }\n            }\n            const fields = type.getFields();\n            for (const fieldName in fields) {\n                const field = fields[fieldName];\n                collect(resolveOutputType(field.type));\n                const args = field.args;\n                for (const argName in args) {\n                    const arg = args[argName];\n                    collect(resolveInputType(arg.type));\n                }\n            }\n        }\n        else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isUnionType)(type)) {\n            const types = type.getTypes();\n            for (const child of types) {\n                collect(child);\n            }\n        }\n        else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInputObjectType)(type)) {\n            const fields = type.getFields();\n            for (const fieldName in fields) {\n                const field = fields[fieldName];\n                collect(resolveInputType(field.type));\n            }\n        }\n    };\n    for (const type of [\n        schema.getQueryType(),\n        schema.getMutationType(),\n        schema.getSubscriptionType(),\n    ]) {\n        if (type) {\n            collect(type);\n        }\n    }\n    return reachableTypes;\n}\nfunction resolveOutputType(output) {\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isListType)(output) || (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(output)) {\n        return resolveOutputType(output.ofType);\n    }\n    return output;\n}\nfunction resolveInputType(input) {\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isListType)(input) || (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(input)) {\n        return resolveInputType(input.ofType);\n    }\n    return input;\n}\n\nvar ChangeType;\n(function (ChangeType) {\n    // Argument\n    ChangeType[\"FieldArgumentDescriptionChanged\"] = \"FIELD_ARGUMENT_DESCRIPTION_CHANGED\";\n    ChangeType[\"FieldArgumentDefaultChanged\"] = \"FIELD_ARGUMENT_DEFAULT_CHANGED\";\n    ChangeType[\"FieldArgumentTypeChanged\"] = \"FIELD_ARGUMENT_TYPE_CHANGED\";\n    // Directive\n    ChangeType[\"DirectiveRemoved\"] = \"DIRECTIVE_REMOVED\";\n    ChangeType[\"DirectiveAdded\"] = \"DIRECTIVE_ADDED\";\n    ChangeType[\"DirectiveDescriptionChanged\"] = \"DIRECTIVE_DESCRIPTION_CHANGED\";\n    ChangeType[\"DirectiveLocationAdded\"] = \"DIRECTIVE_LOCATION_ADDED\";\n    ChangeType[\"DirectiveLocationRemoved\"] = \"DIRECTIVE_LOCATION_REMOVED\";\n    ChangeType[\"DirectiveArgumentAdded\"] = \"DIRECTIVE_ARGUMENT_ADDED\";\n    ChangeType[\"DirectiveArgumentRemoved\"] = \"DIRECTIVE_ARGUMENT_REMOVED\";\n    ChangeType[\"DirectiveArgumentDescriptionChanged\"] = \"DIRECTIVE_ARGUMENT_DESCRIPTION_CHANGED\";\n    ChangeType[\"DirectiveArgumentDefaultValueChanged\"] = \"DIRECTIVE_ARGUMENT_DEFAULT_VALUE_CHANGED\";\n    ChangeType[\"DirectiveArgumentTypeChanged\"] = \"DIRECTIVE_ARGUMENT_TYPE_CHANGED\";\n    // Enum\n    ChangeType[\"EnumValueRemoved\"] = \"ENUM_VALUE_REMOVED\";\n    ChangeType[\"EnumValueAdded\"] = \"ENUM_VALUE_ADDED\";\n    ChangeType[\"EnumValueDescriptionChanged\"] = \"ENUM_VALUE_DESCRIPTION_CHANGED\";\n    ChangeType[\"EnumValueDeprecationReasonChanged\"] = \"ENUM_VALUE_DEPRECATION_REASON_CHANGED\";\n    ChangeType[\"EnumValueDeprecationReasonAdded\"] = \"ENUM_VALUE_DEPRECATION_REASON_ADDED\";\n    ChangeType[\"EnumValueDeprecationReasonRemoved\"] = \"ENUM_VALUE_DEPRECATION_REASON_REMOVED\";\n    // Field\n    ChangeType[\"FieldRemoved\"] = \"FIELD_REMOVED\";\n    ChangeType[\"FieldAdded\"] = \"FIELD_ADDED\";\n    ChangeType[\"FieldDescriptionChanged\"] = \"FIELD_DESCRIPTION_CHANGED\";\n    ChangeType[\"FieldDescriptionAdded\"] = \"FIELD_DESCRIPTION_ADDED\";\n    ChangeType[\"FieldDescriptionRemoved\"] = \"FIELD_DESCRIPTION_REMOVED\";\n    ChangeType[\"FieldDeprecationAdded\"] = \"FIELD_DEPRECATION_ADDED\";\n    ChangeType[\"FieldDeprecationRemoved\"] = \"FIELD_DEPRECATION_REMOVED\";\n    ChangeType[\"FieldDeprecationReasonChanged\"] = \"FIELD_DEPRECATION_REASON_CHANGED\";\n    ChangeType[\"FieldDeprecationReasonAdded\"] = \"FIELD_DEPRECATION_REASON_ADDED\";\n    ChangeType[\"FieldDeprecationReasonRemoved\"] = \"FIELD_DEPRECATION_REASON_REMOVED\";\n    ChangeType[\"FieldTypeChanged\"] = \"FIELD_TYPE_CHANGED\";\n    ChangeType[\"FieldArgumentAdded\"] = \"FIELD_ARGUMENT_ADDED\";\n    ChangeType[\"FieldArgumentRemoved\"] = \"FIELD_ARGUMENT_REMOVED\";\n    // Input\n    ChangeType[\"InputFieldRemoved\"] = \"INPUT_FIELD_REMOVED\";\n    ChangeType[\"InputFieldAdded\"] = \"INPUT_FIELD_ADDED\";\n    ChangeType[\"InputFieldDescriptionAdded\"] = \"INPUT_FIELD_DESCRIPTION_ADDED\";\n    ChangeType[\"InputFieldDescriptionRemoved\"] = \"INPUT_FIELD_DESCRIPTION_REMOVED\";\n    ChangeType[\"InputFieldDescriptionChanged\"] = \"INPUT_FIELD_DESCRIPTION_CHANGED\";\n    ChangeType[\"InputFieldDefaultValueChanged\"] = \"INPUT_FIELD_DEFAULT_VALUE_CHANGED\";\n    ChangeType[\"InputFieldTypeChanged\"] = \"INPUT_FIELD_TYPE_CHANGED\";\n    // Type\n    ChangeType[\"ObjectTypeInterfaceAdded\"] = \"OBJECT_TYPE_INTERFACE_ADDED\";\n    ChangeType[\"ObjectTypeInterfaceRemoved\"] = \"OBJECT_TYPE_INTERFACE_REMOVED\";\n    // Schema\n    ChangeType[\"SchemaQueryTypeChanged\"] = \"SCHEMA_QUERY_TYPE_CHANGED\";\n    ChangeType[\"SchemaMutationTypeChanged\"] = \"SCHEMA_MUTATION_TYPE_CHANGED\";\n    ChangeType[\"SchemaSubscriptionTypeChanged\"] = \"SCHEMA_SUBSCRIPTION_TYPE_CHANGED\";\n    // Type\n    ChangeType[\"TypeRemoved\"] = \"TYPE_REMOVED\";\n    ChangeType[\"TypeAdded\"] = \"TYPE_ADDED\";\n    ChangeType[\"TypeKindChanged\"] = \"TYPE_KIND_CHANGED\";\n    ChangeType[\"TypeDescriptionChanged\"] = \"TYPE_DESCRIPTION_CHANGED\";\n    // TODO\n    ChangeType[\"TypeDescriptionRemoved\"] = \"TYPE_DESCRIPTION_REMOVED\";\n    // TODO\n    ChangeType[\"TypeDescriptionAdded\"] = \"TYPE_DESCRIPTION_ADDED\";\n    // Union\n    ChangeType[\"UnionMemberRemoved\"] = \"UNION_MEMBER_REMOVED\";\n    ChangeType[\"UnionMemberAdded\"] = \"UNION_MEMBER_ADDED\";\n})(ChangeType || (ChangeType = {}));\nvar CriticalityLevel;\n(function (CriticalityLevel) {\n    CriticalityLevel[\"Breaking\"] = \"BREAKING\";\n    CriticalityLevel[\"NonBreaking\"] = \"NON_BREAKING\";\n    CriticalityLevel[\"Dangerous\"] = \"DANGEROUS\";\n})(CriticalityLevel || (CriticalityLevel = {}));\n\nfunction schemaQueryTypeChanged(oldSchema, newSchema) {\n    const oldName = (oldSchema.getQueryType() || {}).name || 'unknown';\n    const newName = (newSchema.getQueryType() || {}).name || 'unknown';\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.SchemaQueryTypeChanged,\n        message: `Schema query root has changed from '${oldName}' to '${newName}'`,\n    };\n}\nfunction schemaMutationTypeChanged(oldSchema, newSchema) {\n    const oldName = (oldSchema.getMutationType() || {}).name || 'unknown';\n    const newName = (newSchema.getMutationType() || {}).name || 'unknown';\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.SchemaMutationTypeChanged,\n        message: `Schema mutation root has changed from '${oldName}' to '${newName}'`,\n    };\n}\nfunction schemaSubscriptionTypeChanged(oldSchema, newSchema) {\n    const oldName = (oldSchema.getSubscriptionType() || {}).name || 'unknown';\n    const newName = (newSchema.getSubscriptionType() || {}).name || 'unknown';\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.SchemaSubscriptionTypeChanged,\n        message: `Schema subscription root has changed from '${oldName}' to '${newName}'`,\n    };\n}\n\nfunction typeRemoved(type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.TypeRemoved,\n        message: `Type '${type.name}' was removed`,\n        path: type.name,\n    };\n}\nfunction typeAdded(type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.TypeAdded,\n        message: `Type '${type.name}' was added`,\n        path: type.name,\n    };\n}\nfunction typeKindChanged(oldType, newType) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: `Changing the kind of a type is a breaking change because it can cause existing queries to error. For example, turning an object type to a scalar type would break queries that define a selection set for this type.`,\n        },\n        type: ChangeType.TypeKindChanged,\n        message: `'${oldType.name}' kind changed from '${getKind(oldType)}' to '${getKind(newType)}'`,\n        path: oldType.name,\n    };\n}\nfunction typeDescriptionChanged(oldType, newType) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.TypeDescriptionChanged,\n        message: `Description '${oldType.description}' on type '${oldType.name}' has changed to '${newType.description}'`,\n        path: oldType.name,\n    };\n}\nfunction typeDescriptionRemoved(type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.TypeDescriptionRemoved,\n        message: `Description '${type.description}' was removed from object type '${type.name}'`,\n        path: type.name,\n    };\n}\nfunction typeDescriptionAdded(type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.TypeDescriptionAdded,\n        message: `Object type '${type.name}' has description '${type.description}'`,\n        path: type.name,\n    };\n}\n\nfunction directiveRemoved(directive) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.DirectiveRemoved,\n        message: `Directive '${directive.name}' was removed`,\n        path: `@${directive.name}`,\n    };\n}\nfunction directiveAdded(directive) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.DirectiveAdded,\n        message: `Directive '${directive.name}' was added`,\n        path: `@${directive.name}`,\n    };\n}\nfunction directiveDescriptionChanged(oldDirective, newDirective) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.DirectiveDescriptionChanged,\n        message: `Directive '${oldDirective.name}' description changed from '${oldDirective.description}' to '${newDirective.description}'`,\n        path: `@${oldDirective.name}`,\n    };\n}\nfunction directiveLocationAdded(directive, location) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.DirectiveLocationAdded,\n        message: `Location '${location}' was added to directive '${directive.name}'`,\n        path: `@${directive.name}`,\n    };\n}\nfunction directiveLocationRemoved(directive, location) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.DirectiveLocationRemoved,\n        message: `Location '${location}' was removed from directive '${directive.name}'`,\n        path: `@${directive.name}`,\n    };\n}\nfunction directiveArgumentAdded(directive, arg) {\n    return {\n        criticality: {\n            level: (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(arg.type)\n                ? CriticalityLevel.Breaking\n                : CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.DirectiveArgumentAdded,\n        message: `Argument '${arg.name}' was added to directive '${directive.name}'`,\n        path: `@${directive.name}`,\n    };\n}\nfunction directiveArgumentRemoved(directive, arg) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n        },\n        type: ChangeType.DirectiveArgumentRemoved,\n        message: `Argument '${arg.name}' was removed from directive '${directive.name}'`,\n        path: `@${directive.name}.${arg.name}`,\n    };\n}\nfunction directiveArgumentDescriptionChanged(directive, oldArg, newArg) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.DirectiveArgumentDescriptionChanged,\n        message: `Description for argument '${oldArg.name}' on directive '${directive.name}' changed from '${oldArg.description}' to '${newArg.description}'`,\n        path: `@${directive.name}.${oldArg.name}`,\n    };\n}\nfunction directiveArgumentDefaultValueChanged(directive, oldArg, newArg) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n            reason: 'Changing the default value for an argument may change the runtime behaviour of a field if it was never provided.',\n        },\n        type: ChangeType.DirectiveArgumentDefaultValueChanged,\n        message: typeof oldArg.defaultValue === 'undefined'\n            ? `Default value '${newArg.defaultValue}' was added to argument '${newArg.name}' on directive '${directive.name}'`\n            : `Default value for argument '${oldArg.name}' on directive '${directive.name}' changed from '${oldArg.defaultValue}' to '${newArg.defaultValue}'`,\n        path: `@${directive.name}.${oldArg.name}`,\n    };\n}\nfunction directiveArgumentTypeChanged(directive, oldArg, newArg) {\n    return {\n        criticality: safeChangeForInputValue(oldArg.type, newArg.type)\n            ? {\n                level: CriticalityLevel.NonBreaking,\n                reason: 'Changing an input field from non-null to null is considered non-breaking.',\n            }\n            : {\n                level: CriticalityLevel.Breaking,\n            },\n        type: ChangeType.DirectiveArgumentTypeChanged,\n        message: `Type for argument '${oldArg.name}' on directive '${directive.name}' changed from '${oldArg.type}' to '${newArg.type}'`,\n        path: `@${directive.name}.${oldArg.name}`,\n    };\n}\n\nfunction enumValueRemoved(oldEnum, value) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: `Removing an enum value will cause existing queries that use this enum value to error.`,\n        },\n        type: ChangeType.EnumValueRemoved,\n        message: `Enum value '${value.name}' ${isDeprecated(value) ? '(deprecated) ' : ''}was removed from enum '${oldEnum.name}'`,\n        path: [oldEnum.name, value.name].join('.'),\n    };\n}\nfunction enumValueAdded(newEnum, value) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n            reason: `Adding an enum value may break existing clients that were not programming defensively against an added case when querying an enum.`,\n        },\n        type: ChangeType.EnumValueAdded,\n        message: `Enum value '${value.name}' was added to enum '${newEnum.name}'`,\n        path: [newEnum.name, value.name].join('.'),\n    };\n}\nfunction enumValueDescriptionChanged(newEnum, oldValue, newValue) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.EnumValueDescriptionChanged,\n        message: typeof oldValue.description === 'undefined'\n            ? `Description '${newValue.description}' was added to enum value '${newEnum.name}.${newValue.name}'`\n            : `Description for enum value '${newEnum.name}.${newValue.name}' changed from '${oldValue.description}' to '${newValue.description}'`,\n        path: [newEnum.name, oldValue.name].join('.'),\n    };\n}\nfunction enumValueDeprecationReasonChanged(newEnum, oldValue, newValue) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.EnumValueDeprecationReasonChanged,\n        message: `Enum value '${newEnum.name}.${newValue.name}' deprecation reason changed from '${oldValue.deprecationReason}' to '${newValue.deprecationReason}'`,\n        path: [newEnum.name, oldValue.name].join('.'),\n    };\n}\nfunction enumValueDeprecationReasonAdded(newEnum, oldValue, newValue) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.EnumValueDeprecationReasonAdded,\n        message: `Enum value '${newEnum.name}.${newValue.name}' was deprecated with reason '${newValue.deprecationReason}'`,\n        path: [newEnum.name, oldValue.name].join('.'),\n    };\n}\nfunction enumValueDeprecationReasonRemoved(newEnum, oldValue, newValue) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.EnumValueDeprecationReasonRemoved,\n        message: `Deprecation reason was removed from enum value '${newEnum.name}.${newValue.name}'`,\n        path: [newEnum.name, oldValue.name].join('.'),\n    };\n}\n\nfunction changesInEnum(oldEnum, newEnum, addChange) {\n    compareLists(oldEnum.getValues(), newEnum.getValues(), {\n        onAdded(value) {\n            addChange(enumValueAdded(newEnum, value));\n        },\n        onRemoved(value) {\n            addChange(enumValueRemoved(oldEnum, value));\n        },\n        onMutual(value) {\n            const oldValue = value.oldVersion;\n            const newValue = value.newVersion;\n            if (isNotEqual(oldValue.description, newValue.description)) {\n                addChange(enumValueDescriptionChanged(newEnum, oldValue, newValue));\n            }\n            if (isNotEqual(oldValue.deprecationReason, newValue.deprecationReason)) {\n                if (isVoid(oldValue.deprecationReason)) {\n                    addChange(enumValueDeprecationReasonAdded(newEnum, oldValue, newValue));\n                }\n                else if (isVoid(newValue.deprecationReason)) {\n                    addChange(enumValueDeprecationReasonRemoved(newEnum, oldValue, newValue));\n                }\n                else {\n                    addChange(enumValueDeprecationReasonChanged(newEnum, oldValue, newValue));\n                }\n            }\n        },\n    });\n}\n\nfunction unionMemberRemoved(union, type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: 'Removing a union member from a union can cause existing queries that use this union member in a fragment spread to error.',\n        },\n        type: ChangeType.UnionMemberRemoved,\n        message: `Member '${type.name}' was removed from Union type '${union.name}'`,\n        path: union.name,\n    };\n}\nfunction unionMemberAdded(union, type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n            reason: 'Adding a possible type to Unions may break existing clients that were not programming defensively against a new possible type.',\n        },\n        type: ChangeType.UnionMemberAdded,\n        message: `Member '${type.name}' was added to Union type '${union.name}'`,\n        path: union.name,\n    };\n}\n\nfunction changesInUnion(oldUnion, newUnion, addChange) {\n    const oldTypes = oldUnion.getTypes();\n    const newTypes = newUnion.getTypes();\n    compareLists(oldTypes, newTypes, {\n        onAdded(t) {\n            addChange(unionMemberAdded(newUnion, t));\n        },\n        onRemoved(t) {\n            addChange(unionMemberRemoved(oldUnion, t));\n        },\n    });\n}\n\nfunction compareTwoStrings(str1, str2) {\n    if (!str1.length && !str2.length)\n        return 1;\n    if (!str1.length || !str2.length)\n        return 0;\n    if (str1.toUpperCase() === str2.toUpperCase())\n        return 1;\n    if (str1.length === 1 && str2.length === 1)\n        return 0;\n    const pairs1 = wordLetterPairs(str1);\n    const pairs2 = wordLetterPairs(str2);\n    const union = pairs1.length + pairs2.length;\n    let intersection = 0;\n    pairs1.forEach((pair1) => {\n        for (let i = 0, pair2; (pair2 = pairs2[i]); i++) {\n            if (pair1 !== pair2)\n                continue;\n            intersection++;\n            pairs2.splice(i, 1);\n            break;\n        }\n    });\n    return (intersection * 2) / union;\n}\nfunction findBestMatch(mainString, targetStrings) {\n    if (!areArgsValid(mainString, targetStrings))\n        throw new Error('Bad arguments: First argument should be a string, second should be an array of strings');\n    const ratings = targetStrings.map((target) => ({\n        target,\n        rating: compareTwoStrings(mainString, target.value),\n    }));\n    const bestMatch = Array.from(ratings).sort((a, b) => b.rating - a.rating)[0];\n    return { ratings, bestMatch };\n}\nfunction flattenDeep(arr) {\n    return Array.isArray(arr)\n        ? arr.reduce((a, b) => a.concat(flattenDeep(b)), [])\n        : [arr];\n}\nfunction areArgsValid(mainString, targetStrings) {\n    if (typeof mainString !== 'string')\n        return false;\n    if (!Array.isArray(targetStrings))\n        return false;\n    if (!targetStrings.length)\n        return false;\n    if (targetStrings.find((s) => typeof s.value !== 'string'))\n        return false;\n    return true;\n}\nfunction letterPairs(str) {\n    const pairs = [];\n    for (let i = 0, max = str.length - 1; i < max; i++)\n        pairs[i] = str.substring(i, i + 2);\n    return pairs;\n}\nfunction wordLetterPairs(str) {\n    const pairs = str.toUpperCase().split(' ').map(letterPairs);\n    return flattenDeep(pairs);\n}\nfunction safeString(obj) {\n    return object_inspect__WEBPACK_IMPORTED_MODULE_0__(obj).replace(/\\[Object\\: null prototype\\] /g, '').replace(/(^')|('$)/g, '');\n}\n\nfunction inputFieldRemoved(input, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: 'Removing an input field will cause existing queries that use this input field to error.',\n        },\n        type: ChangeType.InputFieldRemoved,\n        message: `Input field '${field.name}' ${isDeprecated(field) ? '(deprecated) ' : ''}was removed from input object type '${input.name}'`,\n        path: [input.name, field.name].join('.'),\n    };\n}\nfunction inputFieldAdded(input, field) {\n    return {\n        criticality: (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(field.type)\n            ? {\n                level: CriticalityLevel.Breaking,\n                reason: 'Adding a required input field to an existing input object type is a breaking change because it will cause existing uses of this input object type to error.',\n            }\n            : {\n                level: CriticalityLevel.Dangerous,\n            },\n        type: ChangeType.InputFieldAdded,\n        message: `Input field '${field.name}' was added to input object type '${input.name}'`,\n        path: [input.name, field.name].join('.'),\n    };\n}\nfunction inputFieldDescriptionAdded(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.InputFieldDescriptionAdded,\n        message: `Input field '${type.name}.${field.name}' has description '${field.description}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction inputFieldDescriptionRemoved(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.InputFieldDescriptionRemoved,\n        message: `Description was removed from input field '${type.name}.${field.name}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction inputFieldDescriptionChanged(input, oldField, newField) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.InputFieldDescriptionChanged,\n        message: `Input field '${input.name}.${oldField.name}' description changed from '${oldField.description}' to '${newField.description}'`,\n        path: [input.name, oldField.name].join('.'),\n    };\n}\nfunction inputFieldDefaultValueChanged(input, oldField, newField) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n            reason: 'Changing the default value for an argument may change the runtime behavior of a field if it was never provided.',\n        },\n        type: ChangeType.InputFieldDefaultValueChanged,\n        message: `Input field '${input.name}.${oldField.name}' default value changed from '${safeString(oldField.defaultValue)}' to '${safeString(newField.defaultValue)}'`,\n        path: [input.name, oldField.name].join('.'),\n    };\n}\nfunction inputFieldTypeChanged(input, oldField, newField) {\n    return {\n        criticality: safeChangeForInputValue(oldField.type, newField.type)\n            ? {\n                level: CriticalityLevel.NonBreaking,\n                reason: 'Changing an input field from non-null to null is considered non-breaking.',\n            }\n            : {\n                level: CriticalityLevel.Breaking,\n                reason: 'Changing the type of an input field can cause existing queries that use this field to error.',\n            },\n        type: ChangeType.InputFieldTypeChanged,\n        message: `Input field '${input.name}.${oldField.name}' changed type from '${oldField.type.toString()}' to '${newField.type.toString()}'`,\n        path: [input.name, oldField.name].join('.'),\n    };\n}\n\nfunction changesInInputObject(oldInput, newInput, addChange) {\n    const oldFields = oldInput.getFields();\n    const newFields = newInput.getFields();\n    compareLists(Object.values(oldFields), Object.values(newFields), {\n        onAdded(field) {\n            addChange(inputFieldAdded(newInput, field));\n        },\n        onRemoved(field) {\n            addChange(inputFieldRemoved(oldInput, field));\n        },\n        onMutual(field) {\n            changesInInputField(oldInput, field.oldVersion, field.newVersion, addChange);\n        },\n    });\n}\nfunction changesInInputField(input, oldField, newField, addChange) {\n    if (isNotEqual(oldField.description, newField.description)) {\n        if (isVoid(oldField.description)) {\n            addChange(inputFieldDescriptionAdded(input, newField));\n        }\n        else if (isVoid(newField.description)) {\n            addChange(inputFieldDescriptionRemoved(input, oldField));\n        }\n        else {\n            addChange(inputFieldDescriptionChanged(input, oldField, newField));\n        }\n    }\n    if (isNotEqual(oldField.defaultValue, newField.defaultValue)) {\n        if (Array.isArray(oldField.defaultValue) &&\n            Array.isArray(newField.defaultValue)) {\n            if (diffArrays(oldField.defaultValue, newField.defaultValue).length > 0) {\n                addChange(inputFieldDefaultValueChanged(input, oldField, newField));\n            }\n        }\n        else if (JSON.stringify(oldField.defaultValue) !==\n            JSON.stringify(newField.defaultValue)) {\n            addChange(inputFieldDefaultValueChanged(input, oldField, newField));\n        }\n    }\n    if (isNotEqual(oldField.type.toString(), newField.type.toString())) {\n        addChange(inputFieldTypeChanged(input, oldField, newField));\n    }\n}\n\nfunction objectTypeInterfaceAdded(iface, type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n            reason: 'Adding an interface to an object type may break existing clients that were not programming defensively against a new possible type.',\n        },\n        type: ChangeType.ObjectTypeInterfaceAdded,\n        message: `'${type.name}' object implements '${iface.name}' interface`,\n        path: type.name,\n    };\n}\nfunction objectTypeInterfaceRemoved(iface, type) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: 'Removing an interface from an object type can cause existing queries that use this in a fragment spread to error.',\n        },\n        type: ChangeType.ObjectTypeInterfaceRemoved,\n        message: `'${type.name}' object type no longer implements '${iface.name}' interface`,\n        path: type.name,\n    };\n}\n\nfunction fieldRemoved(type, field) {\n    const entity = (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(type) ? 'interface' : 'object type';\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: field.deprecationReason\n                ? `Removing a deprecated field is a breaking change. Before removing it, you may want to look at the field's usage to see the impact of removing the field.`\n                : `Removing a field is a breaking change. It is preferable to deprecate the field before removing it.`,\n        },\n        type: ChangeType.FieldRemoved,\n        message: `Field '${field.name}' ${isDeprecated(field) ? '(deprecated) ' : ''}was removed from ${entity} '${type.name}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldAdded(type, field) {\n    const entity = (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(type) ? 'interface' : 'object type';\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldAdded,\n        message: `Field '${field.name}' was added to ${entity} '${type.name}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldDescriptionChanged(type, oldField, newField) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDescriptionChanged,\n        message: `Field '${type.name}.${oldField.name}' description changed from '${oldField.description}' to '${newField.description}'`,\n        path: [type.name, oldField.name].join('.'),\n    };\n}\nfunction fieldDescriptionAdded(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDescriptionAdded,\n        message: `Field '${type.name}.${field.name}' has description '${field.description}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldDescriptionRemoved(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDescriptionRemoved,\n        message: `Description was removed from field '${type.name}.${field.name}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldDeprecationAdded(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDeprecationAdded,\n        message: `Field '${type.name}.${field.name}' is deprecated`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldDeprecationRemoved(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n        },\n        type: ChangeType.FieldDeprecationRemoved,\n        message: `Field '${type.name}.${field.name}' is no longer deprecated`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldDeprecationReasonChanged(type, oldField, newField) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDeprecationReasonChanged,\n        message: `Deprecation reason on field '${type.name}.${newField.name}' has changed from '${oldField.deprecationReason}' to '${newField.deprecationReason}'`,\n        path: [type.name, oldField.name].join('.'),\n    };\n}\nfunction fieldDeprecationReasonAdded(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDeprecationReasonAdded,\n        message: `Field '${type.name}.${field.name}' has deprecation reason '${field.deprecationReason}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldDeprecationReasonRemoved(type, field) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldDeprecationReasonRemoved,\n        message: `Deprecation reason was removed from field '${type.name}.${field.name}'`,\n        path: [type.name, field.name].join('.'),\n    };\n}\nfunction fieldTypeChanged(type, oldField, newField) {\n    return {\n        criticality: {\n            level: safeChangeForField(oldField.type, newField.type)\n                ? CriticalityLevel.NonBreaking\n                : CriticalityLevel.Breaking,\n        },\n        type: ChangeType.FieldTypeChanged,\n        message: `Field '${type}.${oldField.name}' changed type from '${oldField.type}' to '${newField.type}'`,\n        path: [type.name, oldField.name].join('.'),\n    };\n}\nfunction fieldArgumentAdded(type, field, arg) {\n    const isBreaking = (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isNonNullType)(arg.type) && typeof arg.defaultValue === 'undefined';\n    const defaultValueMsg = typeof arg.defaultValue !== 'undefined' ? ' (with default value) ' : ' ';\n    return {\n        criticality: isBreaking\n            ? {\n                level: CriticalityLevel.Breaking,\n                reason: `Adding a required argument to an existing field is a breaking change because it will cause existing uses of this field to error.`,\n            }\n            : {\n                level: CriticalityLevel.Dangerous,\n                reason: `Adding a new argument to an existing field may involve a change in resolve function logic that potentially may cause some side effects.`,\n            },\n        type: ChangeType.FieldArgumentAdded,\n        message: `Argument '${arg.name}: ${arg.type}'${defaultValueMsg}added to field '${type.name}.${field.name}'`,\n        path: [type.name, field.name, arg.name].join('.'),\n    };\n}\nfunction fieldArgumentRemoved(type, field, arg) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Breaking,\n            reason: `Removing a field argument is a breaking change because it will cause existing queries that use this argument to error.`,\n        },\n        type: ChangeType.FieldArgumentRemoved,\n        message: `Argument '${arg.name}: ${arg.type}' was removed from field '${type.name}.${field.name}'`,\n        path: [type.name, field.name, arg.name].join('.'),\n    };\n}\n\nfunction fieldArgumentDescriptionChanged(type, field, oldArg, newArg) {\n    return {\n        criticality: {\n            level: CriticalityLevel.NonBreaking,\n        },\n        type: ChangeType.FieldArgumentDescriptionChanged,\n        message: `Description for argument '${newArg.name}' on field '${type.name}.${field.name}' changed from '${oldArg.description}' to '${newArg.description}'`,\n        path: [type.name, field.name, oldArg.name].join('.'),\n    };\n}\nfunction fieldArgumentDefaultChanged(type, field, oldArg, newArg) {\n    return {\n        criticality: {\n            level: CriticalityLevel.Dangerous,\n            reason: 'Changing the default value for an argument may change the runtime behaviour of a field if it was never provided.',\n        },\n        type: ChangeType.FieldArgumentDefaultChanged,\n        message: typeof oldArg.defaultValue === 'undefined'\n            ? `Default value '${safeString(newArg.defaultValue)}' was added to argument '${newArg.name}' on field '${type.name}.${field.name}'`\n            : `Default value for argument '${newArg.name}' on field '${type.name}.${field.name}' changed from '${safeString(oldArg.defaultValue)}' to '${safeString(newArg.defaultValue)}'`,\n        path: [type.name, field.name, oldArg.name].join('.'),\n    };\n}\nfunction fieldArgumentTypeChanged(type, field, oldArg, newArg) {\n    return {\n        criticality: safeChangeForInputValue(oldArg.type, newArg.type)\n            ? {\n                level: CriticalityLevel.NonBreaking,\n                reason: `Changing an input field from non-null to null is considered non-breaking.`,\n            }\n            : {\n                level: CriticalityLevel.Breaking,\n                reason: `Changing the type of a field's argument can cause existing queries that use this argument to error.`,\n            },\n        type: ChangeType.FieldArgumentTypeChanged,\n        message: `Type for argument '${newArg.name}' on field '${type.name}.${field.name}' changed from '${oldArg.type}' to '${newArg.type}'`,\n        path: [type.name, field.name, oldArg.name].join('.'),\n    };\n}\n\nfunction changesInArgument(type, field, oldArg, newArg, addChange) {\n    if (isNotEqual(oldArg.description, newArg.description)) {\n        addChange(fieldArgumentDescriptionChanged(type, field, oldArg, newArg));\n    }\n    if (isNotEqual(oldArg.defaultValue, newArg.defaultValue)) {\n        if (Array.isArray(oldArg.defaultValue) &&\n            Array.isArray(newArg.defaultValue)) {\n            const diff = diffArrays(oldArg.defaultValue, newArg.defaultValue);\n            if (diff.length > 0) {\n                addChange(fieldArgumentDefaultChanged(type, field, oldArg, newArg));\n            }\n        }\n        else if (JSON.stringify(oldArg.defaultValue) !==\n            JSON.stringify(newArg.defaultValue)) {\n            addChange(fieldArgumentDefaultChanged(type, field, oldArg, newArg));\n        }\n    }\n    if (isNotEqual(oldArg.type.toString(), newArg.type.toString())) {\n        addChange(fieldArgumentTypeChanged(type, field, oldArg, newArg));\n    }\n}\n\nfunction changesInField(type, oldField, newField, addChange) {\n    if (isNotEqual(oldField.description, newField.description)) {\n        if (isVoid(oldField.description)) {\n            addChange(fieldDescriptionAdded(type, newField));\n        }\n        else if (isVoid(newField.description)) {\n            addChange(fieldDescriptionRemoved(type, oldField));\n        }\n        else {\n            addChange(fieldDescriptionChanged(type, oldField, newField));\n        }\n    }\n    if (isNotEqual(isDeprecated(oldField), isDeprecated(newField))) {\n        if (isDeprecated(newField)) {\n            addChange(fieldDeprecationAdded(type, newField));\n        }\n        else {\n            addChange(fieldDeprecationRemoved(type, oldField));\n        }\n    }\n    if (isNotEqual(oldField.deprecationReason, newField.deprecationReason)) {\n        if (isVoid(oldField.deprecationReason)) {\n            addChange(fieldDeprecationReasonAdded(type, newField));\n        }\n        else if (isVoid(newField.deprecationReason)) {\n            addChange(fieldDeprecationReasonRemoved(type, oldField));\n        }\n        else {\n            addChange(fieldDeprecationReasonChanged(type, oldField, newField));\n        }\n    }\n    if (isNotEqual(oldField.type.toString(), newField.type.toString())) {\n        addChange(fieldTypeChanged(type, oldField, newField));\n    }\n    compareLists(oldField.args, newField.args, {\n        onAdded(arg) {\n            addChange(fieldArgumentAdded(type, newField, arg));\n        },\n        onRemoved(arg) {\n            addChange(fieldArgumentRemoved(type, oldField, arg));\n        },\n        onMutual(arg) {\n            changesInArgument(type, oldField, arg.oldVersion, arg.newVersion, addChange);\n        },\n    });\n}\n\nfunction changesInObject(oldType, newType, addChange) {\n    const oldInterfaces = oldType.getInterfaces();\n    const newInterfaces = newType.getInterfaces();\n    const oldFields = oldType.getFields();\n    const newFields = newType.getFields();\n    compareLists(oldInterfaces, newInterfaces, {\n        onAdded(i) {\n            addChange(objectTypeInterfaceAdded(i, newType));\n        },\n        onRemoved(i) {\n            addChange(objectTypeInterfaceRemoved(i, oldType));\n        },\n    });\n    compareLists(Object.values(oldFields), Object.values(newFields), {\n        onAdded(f) {\n            addChange(fieldAdded(newType, f));\n        },\n        onRemoved(f) {\n            addChange(fieldRemoved(oldType, f));\n        },\n        onMutual(f) {\n            changesInField(oldType, f.oldVersion, f.newVersion, addChange);\n        },\n    });\n}\n\nfunction changesInInterface(oldInterface, newInterface, addChange) {\n    compareLists(Object.values(oldInterface.getFields()), Object.values(newInterface.getFields()), {\n        onAdded(field) {\n            addChange(fieldAdded(newInterface, field));\n        },\n        onRemoved(field) {\n            addChange(fieldRemoved(oldInterface, field));\n        },\n        onMutual(field) {\n            changesInField(oldInterface, field.oldVersion, field.newVersion, addChange);\n        },\n    });\n}\n\nfunction changesInDirective(oldDirective, newDirective, addChange) {\n    if (isNotEqual(oldDirective.description, newDirective.description)) {\n        addChange(directiveDescriptionChanged(oldDirective, newDirective));\n    }\n    const locations = {\n        added: diffArrays(newDirective.locations, oldDirective.locations),\n        removed: diffArrays(oldDirective.locations, newDirective.locations),\n    };\n    // locations added\n    locations.added.forEach((location) => addChange(directiveLocationAdded(newDirective, location)));\n    // locations removed\n    locations.removed.forEach((location) => addChange(directiveLocationRemoved(oldDirective, location)));\n    compareLists(oldDirective.args, newDirective.args, {\n        onAdded(arg) {\n            addChange(directiveArgumentAdded(newDirective, arg));\n        },\n        onRemoved(arg) {\n            addChange(directiveArgumentRemoved(oldDirective, arg));\n        },\n        onMutual(arg) {\n            changesInDirectiveArgument(oldDirective, arg.oldVersion, arg.newVersion, addChange);\n        },\n    });\n}\nfunction changesInDirectiveArgument(directive, oldArg, newArg, addChange) {\n    if (isNotEqual(oldArg.description, newArg.description)) {\n        addChange(directiveArgumentDescriptionChanged(directive, oldArg, newArg));\n    }\n    if (isNotEqual(oldArg.defaultValue, newArg.defaultValue)) {\n        addChange(directiveArgumentDefaultValueChanged(directive, oldArg, newArg));\n    }\n    if (isNotEqual(oldArg.type.toString(), newArg.type.toString())) {\n        addChange(directiveArgumentTypeChanged(directive, oldArg, newArg));\n    }\n}\n\nfunction diffSchema(oldSchema, newSchema) {\n    const changes = [];\n    function addChange(change) {\n        changes.push(change);\n    }\n    changesInSchema(oldSchema, newSchema, addChange);\n    compareLists(Object.values(oldSchema.getTypeMap()).filter((t) => !isPrimitive(t)), Object.values(newSchema.getTypeMap()).filter((t) => !isPrimitive(t)), {\n        onAdded(type) {\n            addChange(typeAdded(type));\n        },\n        onRemoved(type) {\n            addChange(typeRemoved(type));\n        },\n        onMutual(type) {\n            changesInType(type.oldVersion, type.newVersion, addChange);\n        },\n    });\n    compareLists(oldSchema.getDirectives(), newSchema.getDirectives(), {\n        onAdded(directive) {\n            addChange(directiveAdded(directive));\n        },\n        onRemoved(directive) {\n            addChange(directiveRemoved(directive));\n        },\n        onMutual(directive) {\n            changesInDirective(directive.oldVersion, directive.newVersion, addChange);\n        },\n    });\n    return changes;\n}\nfunction changesInSchema(oldSchema, newSchema, addChange) {\n    var _a, _b, _c, _d, _e, _f;\n    const defaultNames = {\n        query: 'Query',\n        mutation: 'Mutation',\n        subscription: 'Subscription',\n    };\n    const oldRoot = {\n        query: (_a = (oldSchema.getQueryType() || {}).name) !== null && _a !== void 0 ? _a : defaultNames.query,\n        mutation: (_b = (oldSchema.getMutationType() || {}).name) !== null && _b !== void 0 ? _b : defaultNames.mutation,\n        subscription: (_c = (oldSchema.getSubscriptionType() || {}).name) !== null && _c !== void 0 ? _c : defaultNames.subscription,\n    };\n    const newRoot = {\n        query: (_d = (newSchema.getQueryType() || {}).name) !== null && _d !== void 0 ? _d : defaultNames.query,\n        mutation: (_e = (newSchema.getMutationType() || {}).name) !== null && _e !== void 0 ? _e : defaultNames.mutation,\n        subscription: (_f = (newSchema.getSubscriptionType() || {}).name) !== null && _f !== void 0 ? _f : defaultNames.subscription,\n    };\n    if (isNotEqual(oldRoot.query, newRoot.query)) {\n        addChange(schemaQueryTypeChanged(oldSchema, newSchema));\n    }\n    if (isNotEqual(oldRoot.mutation, newRoot.mutation)) {\n        addChange(schemaMutationTypeChanged(oldSchema, newSchema));\n    }\n    if (isNotEqual(oldRoot.subscription, newRoot.subscription)) {\n        addChange(schemaSubscriptionTypeChanged(oldSchema, newSchema));\n    }\n}\nfunction changesInType(oldType, newType, addChange) {\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isEnumType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isEnumType)(newType)) {\n        changesInEnum(oldType, newType, addChange);\n    }\n    else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isUnionType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isUnionType)(newType)) {\n        changesInUnion(oldType, newType, addChange);\n    }\n    else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInputObjectType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInputObjectType)(newType)) {\n        changesInInputObject(oldType, newType, addChange);\n    }\n    else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isObjectType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isObjectType)(newType)) {\n        changesInObject(oldType, newType, addChange);\n    }\n    else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(newType)) {\n        changesInInterface(oldType, newType, addChange);\n    }\n    else if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isScalarType)(oldType) && (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isScalarType)(newType)) ;\n    else {\n        addChange(typeKindChanged(oldType, newType));\n    }\n    if (isNotEqual(oldType.description, newType.description)) {\n        if (isVoid(oldType.description)) {\n            addChange(typeDescriptionAdded(newType));\n        }\n        else if (isVoid(newType.description)) {\n            addChange(typeDescriptionRemoved(oldType));\n        }\n        else {\n            addChange(typeDescriptionChanged(oldType, newType));\n        }\n    }\n}\n\nconst dangerousBreaking = ({ changes }) => {\n    return changes.map((change) => {\n        if (change.criticality.level === CriticalityLevel.Dangerous) {\n            return Object.assign(Object.assign({}, change), { criticality: Object.assign(Object.assign({}, change.criticality), { level: CriticalityLevel.Breaking }) });\n        }\n        return change;\n    });\n};\n\nfunction parsePath(path) {\n    return path.split('.');\n}\n\nconst suppressRemovalOfDeprecatedField = ({ changes, oldSchema, }) => {\n    return changes.map((change) => {\n        if (change.type === ChangeType.FieldRemoved &&\n            change.criticality.level === CriticalityLevel.Breaking &&\n            change.path) {\n            const [typeName, fieldName] = parsePath(change.path);\n            const type = oldSchema.getType(typeName);\n            if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isObjectType)(type) || (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(type)) {\n                const field = type.getFields()[fieldName];\n                if (isDeprecated(field)) {\n                    return Object.assign(Object.assign({}, change), { criticality: Object.assign(Object.assign({}, change.criticality), { level: CriticalityLevel.Dangerous }) });\n                }\n            }\n        }\n        if (change.type === ChangeType.EnumValueRemoved &&\n            change.criticality.level === CriticalityLevel.Breaking &&\n            change.path) {\n            const [enumName, enumItem] = parsePath(change.path);\n            const type = oldSchema.getType(enumName);\n            if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isEnumType)(type)) {\n                const item = type.getValue(enumItem);\n                if (item && isDeprecated(item)) {\n                    return Object.assign(Object.assign({}, change), { criticality: Object.assign(Object.assign({}, change.criticality), { level: CriticalityLevel.Dangerous }) });\n                }\n            }\n        }\n        if (change.type === ChangeType.InputFieldRemoved &&\n            change.criticality.level === CriticalityLevel.Breaking &&\n            change.path) {\n            const [inputName, inputItem] = parsePath(change.path);\n            const type = oldSchema.getType(inputName);\n            if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInputObjectType)(type)) {\n                const item = type.getFields()[inputItem];\n                if (item && isDeprecated(item)) {\n                    return Object.assign(Object.assign({}, change), { criticality: Object.assign(Object.assign({}, change.criticality), { level: CriticalityLevel.Dangerous }) });\n                }\n            }\n        }\n        return change;\n    });\n};\n\nconst descriptionChangeTypes = [\n    ChangeType.FieldArgumentDescriptionChanged,\n    ChangeType.DirectiveDescriptionChanged,\n    ChangeType.DirectiveArgumentDescriptionChanged,\n    ChangeType.EnumValueDescriptionChanged,\n    ChangeType.FieldDescriptionChanged,\n    ChangeType.FieldDescriptionAdded,\n    ChangeType.FieldDescriptionRemoved,\n    ChangeType.InputFieldDescriptionAdded,\n    ChangeType.InputFieldDescriptionRemoved,\n    ChangeType.InputFieldDescriptionChanged,\n    ChangeType.TypeDescriptionChanged,\n];\nconst ignoreDescriptionChanges = ({ changes }) => {\n    return changes.filter((change) => descriptionChangeTypes.indexOf(change.type) === -1);\n};\n\nconst considerUsage = ({ changes, config, }) => (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(void 0, void 0, void 0, function* () {\n    if (!config) {\n        throw new Error(`considerUsage rule is missing config`);\n    }\n    const collectedBreakingField = [];\n    changes.forEach((change) => {\n        if (change.criticality.level === CriticalityLevel.Breaking && change.path) {\n            const [typeName, fieldName, argumentName] = parsePath(change.path);\n            collectedBreakingField.push({\n                type: typeName,\n                field: fieldName,\n                argument: argumentName,\n            });\n        }\n    });\n    // True if safe to break, false otherwise\n    const usageList = yield config.checkUsage(collectedBreakingField);\n    // turns an array of booleans into an array of `Type.Field` strings\n    // includes only those that are safe to break the api\n    const suppressedPaths = collectedBreakingField\n        .filter((_, i) => usageList[i] === true)\n        .map(({ type, field, argument }) => [type, field, argument].filter(Boolean).join('.'));\n    return changes.map((change) => {\n        // Turns those \"safe to break\" changes into \"dangerous\"\n        if (change.criticality.level === CriticalityLevel.Breaking &&\n            change.path &&\n            suppressedPaths.some((p) => change.path.startsWith(p))) {\n            return Object.assign(Object.assign({}, change), { criticality: Object.assign(Object.assign({}, change.criticality), { level: CriticalityLevel.Dangerous }), message: `${change.message} (non-breaking based on usage)` });\n        }\n        return change;\n    });\n});\n\nconst safeUnreachable = ({ changes, oldSchema }) => {\n    const reachable = getReachableTypes(oldSchema);\n    return changes.map((change) => {\n        if (change.criticality.level === CriticalityLevel.Breaking && change.path) {\n            const [typeName] = parsePath(change.path);\n            if (!reachable.has(typeName)) {\n                return Object.assign(Object.assign({}, change), { criticality: Object.assign(Object.assign({}, change.criticality), { level: CriticalityLevel.NonBreaking }), message: 'Unreachable from root' });\n            }\n        }\n        return change;\n    });\n};\n\nconst rules = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    dangerousBreaking: dangerousBreaking,\n    suppressRemovalOfDeprecatedField: suppressRemovalOfDeprecatedField,\n    ignoreDescriptionChanges: ignoreDescriptionChanges,\n    considerUsage: considerUsage,\n    safeUnreachable: safeUnreachable\n});\n\nconst DiffRule = rules;\nfunction diff(oldSchema, newSchema, rules = [], config) {\n    const changes = diffSchema(oldSchema, newSchema);\n    return rules.reduce((prev, rule) => (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(this, void 0, void 0, function* () {\n        const prevChanges = yield prev;\n        return rule({\n            changes: prevChanges,\n            oldSchema,\n            newSchema,\n            config,\n        });\n    }), Promise.resolve(changes));\n}\n\nfunction readDocument(source) {\n    const result = {\n        source,\n        fragments: [],\n        operations: [],\n        hasFragments: false,\n        hasOperations: false,\n    };\n    const documentNode = (0,graphql__WEBPACK_IMPORTED_MODULE_8__.parse)(source.body);\n    const filepath = source.name;\n    const definitions = documentNode.definitions || [];\n    definitions.forEach((node) => {\n        if (isOperation(node)) {\n            result.operations.push({\n                node,\n                source: filepath,\n            });\n        }\n        else if (isFragment(node)) {\n            result.fragments.push({\n                node,\n                source: filepath,\n            });\n        }\n    });\n    result.hasFragments = result.fragments.length > 0;\n    result.hasOperations = result.operations.length > 0;\n    return result;\n}\nfunction isOperation(node) {\n    return node.kind === graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.OPERATION_DEFINITION;\n}\nfunction isFragment(node) {\n    return node.kind === graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.FRAGMENT_DEFINITION;\n}\n\nfunction validateQueryDepth({ source, doc, maxDepth, fragmentGraph, }) {\n    try {\n        calculateDepth({\n            node: doc,\n            currentDepth: 0,\n            maxDepth,\n            getFragment(name) {\n                return fragmentGraph.getNodeData(name);\n            },\n        });\n    }\n    catch (errorOrNode) {\n        if (errorOrNode instanceof Error) {\n            throw errorOrNode;\n        }\n        const node = errorOrNode;\n        return new graphql__WEBPACK_IMPORTED_MODULE_6__.GraphQLError(`Query exceeds maximum depth of ${maxDepth}`, node, source, node.loc && node.loc.start ? [node.loc.start] : undefined);\n    }\n}\nfunction calculateDepth({ node, currentDepth, maxDepth, getFragment, }) {\n    if (maxDepth && currentDepth > maxDepth) {\n        throw node;\n    }\n    switch (node.kind) {\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.FIELD: {\n            if (node.name.value.startsWith('__') || !node.selectionSet) {\n                return 0;\n            }\n            const maxInnerDepth = calculateDepth({\n                node: node.selectionSet,\n                currentDepth: currentDepth + 1,\n                maxDepth,\n                getFragment,\n            });\n            return 1 + maxInnerDepth;\n        }\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.SELECTION_SET: {\n            return Math.max(...node.selections.map((selection) => {\n                return calculateDepth({\n                    node: selection,\n                    currentDepth: currentDepth,\n                    maxDepth,\n                    getFragment,\n                });\n            }));\n        }\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.DOCUMENT: {\n            return Math.max(...node.definitions.map((def) => {\n                return calculateDepth({\n                    node: def,\n                    currentDepth: currentDepth,\n                    maxDepth,\n                    getFragment,\n                });\n            }));\n        }\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.OPERATION_DEFINITION:\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.INLINE_FRAGMENT:\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.FRAGMENT_DEFINITION: {\n            return Math.max(...node.selectionSet.selections.map((selection) => {\n                return calculateDepth({\n                    node: selection,\n                    currentDepth,\n                    maxDepth,\n                    getFragment,\n                });\n            }));\n        }\n        case graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.FRAGMENT_SPREAD:\n            return calculateDepth({\n                node: getFragment(node.name.value),\n                currentDepth,\n                maxDepth,\n                getFragment,\n            });\n        default: {\n            throw new Error(`Couldn't handle ${node.kind}`);\n        }\n    }\n}\n\nfunction transformDocumentWithApollo(doc, { keepClientFields }) {\n    return (0,graphql__WEBPACK_IMPORTED_MODULE_5__.visit)(doc, {\n        Field(node) {\n            return keepClientFields\n                ? removeDirectives(node, ['client'])\n                : removeFieldIfDirectives(node, ['client']);\n        },\n    });\n}\nfunction transformSchemaWithApollo(schema) {\n    return (0,graphql__WEBPACK_IMPORTED_MODULE_9__.extendSchema)(schema, (0,graphql__WEBPACK_IMPORTED_MODULE_8__.parse)(/* GraphQL */ `\n      directive @connection(key: String!, filter: [String]) on FIELD\n    `));\n}\n\nfunction validate(schema, sources, options) {\n    const config = Object.assign({ strictDeprecated: true, strictFragments: true, keepClientFields: false, apollo: false }, options);\n    const invalidDocuments = [];\n    // read documents\n    const documents = sources.map(readDocument);\n    // keep all named fragments\n    const fragments = [];\n    const fragmentNames = [];\n    const graph = new dependency_graph__WEBPACK_IMPORTED_MODULE_1__.DepGraph({ circular: true });\n    documents.forEach((doc) => {\n        doc.fragments.forEach((fragment) => {\n            fragmentNames.push(fragment.node.name.value);\n            fragments.push(fragment);\n            graph.addNode(fragment.node.name.value, fragment.node);\n        });\n    });\n    fragments.forEach((fragment) => {\n        const depends = extractFragments((0,graphql__WEBPACK_IMPORTED_MODULE_10__.print)(fragment.node));\n        if (depends) {\n            depends.forEach((name) => {\n                graph.addDependency(fragment.node.name.value, name);\n            });\n        }\n    });\n    documents\n        // since we include fragments, validate only operations\n        .filter((doc) => doc.hasOperations)\n        .forEach((doc) => {\n        const docWithOperations = {\n            kind: graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.DOCUMENT,\n            definitions: doc.operations.map((d) => d.node),\n        };\n        const extractedFragments = (extractFragments((0,graphql__WEBPACK_IMPORTED_MODULE_10__.print)(docWithOperations)) || [])\n            // resolve all nested fragments\n            .map((fragmentName) => resolveFragment(graph.getNodeData(fragmentName), graph))\n            // flatten arrays\n            .reduce((list, current) => list.concat(current), [])\n            // remove duplicates\n            .filter((def, i, all) => all.findIndex((item) => item.name.value === def.name.value) === i);\n        const merged = {\n            kind: graphql__WEBPACK_IMPORTED_MODULE_3__.Kind.DOCUMENT,\n            definitions: [...docWithOperations.definitions, ...extractedFragments],\n        };\n        let transformedSchema = config.apollo\n            ? transformSchemaWithApollo(schema)\n            : schema;\n        const transformedDoc = config.apollo\n            ? transformDocumentWithApollo(merged, {\n                keepClientFields: config.keepClientFields,\n            })\n            : merged;\n        const errors = (0,graphql__WEBPACK_IMPORTED_MODULE_11__.validate)(transformedSchema, transformedDoc) || [];\n        if (config.maxDepth) {\n            const depthError = validateQueryDepth({\n                source: doc.source,\n                doc: transformedDoc,\n                maxDepth: config.maxDepth,\n                fragmentGraph: graph,\n            });\n            if (depthError) {\n                errors.push(depthError);\n            }\n        }\n        const deprecated = config.strictDeprecated\n            ? findDeprecatedUsages(transformedSchema, transformedDoc)\n            : [];\n        const duplicatedFragments = config.strictFragments\n            ? findDuplicatedFragments(fragmentNames)\n            : [];\n        if (sumLengths(errors, duplicatedFragments, deprecated) > 0) {\n            invalidDocuments.push({\n                source: doc.source,\n                errors: [...errors, ...duplicatedFragments],\n                deprecated,\n            });\n        }\n    });\n    return invalidDocuments;\n}\nfunction findDuplicatedFragments(fragmentNames) {\n    return fragmentNames\n        .filter((name, i, all) => all.indexOf(name) !== i)\n        .map((name) => new graphql__WEBPACK_IMPORTED_MODULE_6__.GraphQLError(`Name of '${name}' fragment is not unique`));\n}\n//\n// PostInfo -> AuthorInfo\n// AuthorInfo -> None\n//\nfunction resolveFragment(fragment, graph) {\n    return graph\n        .dependenciesOf(fragment.name.value)\n        .reduce((list, current) => [\n        ...list,\n        ...resolveFragment(graph.getNodeData(current), graph),\n    ], [fragment]);\n}\nfunction extractFragments(document) {\n    return (document.match(/[\\.]{3}[a-z0-9\\_]+\\b/gi) || []).map((name) => name.replace('...', ''));\n}\nfunction sumLengths(...arrays) {\n    return arrays.reduce((sum, { length }) => sum + length, 0);\n}\n\nfunction similar(schema, typeName, threshold = 0.4) {\n    const typeMap = schema.getTypeMap();\n    const targets = Object.keys(schema.getTypeMap())\n        .filter((name) => !isPrimitive(name) && !isForIntrospection(name))\n        .map((name) => ({\n        typeId: name,\n        value: stripType(typeMap[name]),\n    }));\n    const results = {};\n    if (typeof typeName !== 'undefined' &&\n        !targets.some((t) => t.typeId === typeName)) {\n        throw new Error(`Type '${typeName}' doesn't exist`);\n    }\n    (typeName ? [{ typeId: typeName, value: '' }] : targets).forEach((source) => {\n        const sourceType = schema.getType(source.typeId);\n        const matchWith = targets.filter((target) => schema.getType(target.typeId).astNode.kind ===\n            sourceType.astNode.kind && target.typeId !== source.typeId);\n        if (matchWith.length > 0) {\n            const found = similarTo(sourceType, matchWith, threshold);\n            if (found) {\n                results[source.typeId] = found;\n            }\n        }\n    });\n    return results;\n}\nfunction similarTo(type, targets, threshold) {\n    const types = targets.filter((target) => target.typeId !== type.name);\n    const result = findBestMatch(stripType(type), types);\n    if (result.bestMatch.rating < threshold) {\n        return;\n    }\n    return {\n        bestMatch: result.bestMatch,\n        ratings: result.ratings\n            .filter((r) => r.rating >= threshold && r.target !== result.bestMatch.target)\n            .sort((a, b) => a.rating - b.rating)\n            .reverse(),\n    };\n}\nfunction stripType(type) {\n    return (0,graphql__WEBPACK_IMPORTED_MODULE_12__.printType)(type)\n        .trim()\n        .replace(/^[a-z]+ [^\\{]+\\{/g, '')\n        .replace(/\\}$/g, '')\n        .trim()\n        .split('\\n')\n        .map((s) => s.trim())\n        .sort((a, b) => a.localeCompare(b))\n        .join(' ');\n}\n\nfunction coverage(schema, sources) {\n    const coverage = {\n        sources,\n        types: {},\n    };\n    const typeMap = schema.getTypeMap();\n    const typeInfo = new graphql__WEBPACK_IMPORTED_MODULE_4__.TypeInfo(schema);\n    const visitor = (source) => ({\n        Field(node) {\n            const fieldDef = typeInfo.getFieldDef();\n            const parent = typeInfo.getParentType();\n            if (parent &&\n                parent.name &&\n                !isForIntrospection(parent.name) &&\n                fieldDef &&\n                fieldDef.name &&\n                fieldDef.name !== '__typename' &&\n                fieldDef.name !== '__schema') {\n                const sourceName = source.name;\n                const typeCoverage = coverage.types[parent.name];\n                const fieldCoverage = typeCoverage.children[fieldDef.name];\n                const locations = fieldCoverage.locations[sourceName];\n                typeCoverage.hits++;\n                fieldCoverage.hits++;\n                if (node.loc) {\n                    fieldCoverage.locations[sourceName] = [\n                        node.loc,\n                        ...(locations || []),\n                    ];\n                }\n                if (node.arguments) {\n                    for (const argNode of node.arguments) {\n                        const argCoverage = fieldCoverage.children[argNode.name.value];\n                        argCoverage.hits++;\n                        if (argNode.loc) {\n                            argCoverage.locations[sourceName] = [\n                                argNode.loc,\n                                ...(argCoverage.locations[sourceName] || []),\n                            ];\n                        }\n                    }\n                }\n            }\n        },\n    });\n    for (const typename in typeMap) {\n        if (!isForIntrospection(typename) && !isPrimitive(typename)) {\n            const type = typeMap[typename];\n            if ((0,graphql__WEBPACK_IMPORTED_MODULE_2__.isObjectType)(type) || (0,graphql__WEBPACK_IMPORTED_MODULE_2__.isInterfaceType)(type)) {\n                const typeCoverage = {\n                    hits: 0,\n                    type,\n                    children: {},\n                };\n                const fieldMap = type.getFields();\n                for (const fieldname in fieldMap) {\n                    const field = fieldMap[fieldname];\n                    typeCoverage.children[field.name] = {\n                        hits: 0,\n                        locations: {},\n                        children: {},\n                    };\n                    for (const arg of field.args) {\n                        typeCoverage.children[field.name].children[arg.name] = {\n                            hits: 0,\n                            locations: {},\n                        };\n                    }\n                }\n                coverage.types[type.name] = typeCoverage;\n            }\n        }\n    }\n    const documents = coverage.sources.map(readDocument);\n    documents.forEach((doc, i) => {\n        const source = coverage.sources[i];\n        doc.operations.forEach((op) => {\n            (0,graphql__WEBPACK_IMPORTED_MODULE_5__.visit)(op.node, (0,graphql__WEBPACK_IMPORTED_MODULE_4__.visitWithTypeInfo)(typeInfo, visitor(source)));\n        });\n        doc.fragments.forEach((fr) => {\n            (0,graphql__WEBPACK_IMPORTED_MODULE_5__.visit)(fr.node, (0,graphql__WEBPACK_IMPORTED_MODULE_4__.visitWithTypeInfo)(typeInfo, visitor(source)));\n        });\n    });\n    return coverage;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL0BncmFwaHFsLWluc3BlY3Rvci9jb3JlL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0M7QUFDZ1E7QUFDN1A7QUFDTzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxNQUFNO0FBQzVDLHNDQUFzQyxNQUFNO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLHVEQUFjLGNBQWMsdURBQWM7QUFDbkQ7QUFDQTtBQUNBLFFBQVEsc0RBQWE7QUFDckIsdUJBQXVCLHNEQUFhO0FBQ3BDO0FBQ0E7QUFDQSxRQUFRLG1EQUFVO0FBQ2xCLGlCQUFpQixtREFBVTtBQUMzQjtBQUNBLGFBQWEsc0RBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVEQUFjLGNBQWMsdURBQWM7QUFDbkQ7QUFDQTtBQUNBLFFBQVEsbURBQVUsYUFBYSxtREFBVTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQsMERBQTBEO0FBQzFELGtFQUFrRTtBQUNsRTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BELDBEQUEwRDtBQUMx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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQVksVUFBVSx3REFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4Q0FBSyxVQUFVLDBEQUFpQjtBQUM1QyxTQUFTO0FBQ1Q7QUFDQSxZQUFZLDhDQUFLLFVBQVUsMERBQWlCO0FBQzVDLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTs7QUFFb0ciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWRnaXR5LXlpZWxkLWZyb250ZW5kLy4uL25vZGVfbW9kdWxlcy9AZ3JhcGhxbC1pbnNwZWN0b3IvY29yZS9pbmRleC5tanM/ZTI1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBLaW5kLCBUeXBlSW5mbywgdmlzaXQsIHZpc2l0V2l0aFR5cGVJbmZvLCBHcmFwaFFMRXJyb3IsIGdldE5hbWVkVHlwZSwgaXNTY2FsYXJUeXBlLCBpc0ludGVyZmFjZVR5cGUsIGlzT2JqZWN0VHlwZSwgaXNVbmlvblR5cGUsIGlzSW5wdXRPYmplY3RUeXBlLCBpc0xpc3RUeXBlLCBpc05vbk51bGxUeXBlLCBpc1dyYXBwaW5nVHlwZSwgaXNFbnVtVHlwZSwgcGFyc2UsIGV4dGVuZFNjaGVtYSwgcHJpbnQsIHZhbGlkYXRlIGFzIHZhbGlkYXRlJDEsIHByaW50VHlwZSB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IGluc3BlY3QgZnJvbSAnb2JqZWN0LWluc3BlY3QnO1xuaW1wb3J0IHsgRGVwR3JhcGggfSBmcm9tICdkZXBlbmRlbmN5LWdyYXBoJztcblxuZnVuY3Rpb24ga2V5TWFwKGxpc3QsIGtleUZuKSB7XG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChtYXAsIGl0ZW0pID0+IHtcbiAgICAgICAgbWFwW2tleUZuKGl0ZW0pXSA9IGl0ZW07XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgfSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59XG5mdW5jdGlvbiBpc0VxdWFsKGEsIGIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgaWYgKCFpc0VxdWFsKGFbaW5kZXhdLCBiW2luZGV4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChhICYmIGIgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBhUmVjb3JkID0gYTtcbiAgICAgICAgY29uc3QgYlJlY29yZCA9IGI7XG4gICAgICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYVJlY29yZCk7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYlJlY29yZCk7XG4gICAgICAgIGlmIChhS2V5cy5sZW5ndGggIT09IGJLZXlzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgYUtleXMpIHtcbiAgICAgICAgICAgIGlmICghaXNFcXVhbChhUmVjb3JkW2tleV0sIGJSZWNvcmRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBhID09PSBiIHx8ICghYSAmJiAhYik7XG59XG5mdW5jdGlvbiBpc05vdEVxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gIWlzRXF1YWwoYSwgYik7XG59XG5mdW5jdGlvbiBpc1ZvaWQoYSkge1xuICAgIHJldHVybiB0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgfHwgYSA9PT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGRpZmZBcnJheXMoYSwgYikge1xuICAgIHJldHVybiBhLmZpbHRlcigoYykgPT4gIWIuc29tZSgoZCkgPT4gaXNFcXVhbChkLCBjKSkpO1xufVxuZnVuY3Rpb24gY29tcGFyZUxpc3RzKG9sZExpc3QsIG5ld0xpc3QsIGNhbGxiYWNrcykge1xuICAgIGNvbnN0IG9sZE1hcCA9IGtleU1hcChvbGRMaXN0LCAoeyBuYW1lIH0pID0+IG5hbWUpO1xuICAgIGNvbnN0IG5ld01hcCA9IGtleU1hcChuZXdMaXN0LCAoeyBuYW1lIH0pID0+IG5hbWUpO1xuICAgIGNvbnN0IGFkZGVkID0gW107XG4gICAgY29uc3QgcmVtb3ZlZCA9IFtdO1xuICAgIGNvbnN0IG11dHVhbCA9IFtdO1xuICAgIGZvciAoY29uc3Qgb2xkSXRlbSBvZiBvbGRMaXN0KSB7XG4gICAgICAgIGNvbnN0IG5ld0l0ZW0gPSBuZXdNYXBbb2xkSXRlbS5uYW1lXTtcbiAgICAgICAgaWYgKG5ld0l0ZW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKG9sZEl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbXV0dWFsLnB1c2goe1xuICAgICAgICAgICAgICAgIG5ld1ZlcnNpb246IG5ld0l0ZW0sXG4gICAgICAgICAgICAgICAgb2xkVmVyc2lvbjogb2xkSXRlbSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgbmV3SXRlbSBvZiBuZXdMaXN0KSB7XG4gICAgICAgIGlmIChvbGRNYXBbbmV3SXRlbS5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhZGRlZC5wdXNoKG5ld0l0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrcy5vbkFkZGVkKSB7XG4gICAgICAgICAgICBhZGRlZC5mb3JFYWNoKGNhbGxiYWNrcy5vbkFkZGVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGJhY2tzLm9uUmVtb3ZlZCkge1xuICAgICAgICAgICAgcmVtb3ZlZC5mb3JFYWNoKGNhbGxiYWNrcy5vblJlbW92ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsYmFja3Mub25NdXR1YWwpIHtcbiAgICAgICAgICAgIG11dHVhbC5mb3JFYWNoKGNhbGxiYWNrcy5vbk11dHVhbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkZWQsXG4gICAgICAgIHJlbW92ZWQsXG4gICAgICAgIG11dHVhbCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBpc0RlcHJlY2F0ZWQoZmllbGRPckVudW1WYWx1ZSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKCdpc0RlcHJlY2F0ZWQnIGluIGZpZWxkT3JFbnVtVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZpZWxkT3JFbnVtVmFsdWVbJ2lzRGVwcmVjYXRlZCddO1xuICAgIH1cbiAgICBpZiAoZmllbGRPckVudW1WYWx1ZS5kZXByZWNhdGlvblJlYXNvbiAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKF9iID0gKF9hID0gZmllbGRPckVudW1WYWx1ZS5hc3ROb2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlyZWN0aXZlcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnNvbWUoKGRpcmVjdGl2ZSkgPT4gZGlyZWN0aXZlLm5hbWUudmFsdWUgPT09ICdkZXByZWNhdGVkJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2FmZUNoYW5nZUZvckZpZWxkKG9sZFR5cGUsIG5ld1R5cGUpIHtcbiAgICBpZiAoIWlzV3JhcHBpbmdUeXBlKG9sZFR5cGUpICYmICFpc1dyYXBwaW5nVHlwZShuZXdUeXBlKSkge1xuICAgICAgICByZXR1cm4gb2xkVHlwZS50b1N0cmluZygpID09PSBuZXdUeXBlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmIChpc05vbk51bGxUeXBlKG5ld1R5cGUpKSB7XG4gICAgICAgIGNvbnN0IG9mVHlwZSA9IGlzTm9uTnVsbFR5cGUob2xkVHlwZSkgPyBvbGRUeXBlLm9mVHlwZSA6IG9sZFR5cGU7XG4gICAgICAgIHJldHVybiBzYWZlQ2hhbmdlRm9yRmllbGQob2ZUeXBlLCBuZXdUeXBlLm9mVHlwZSk7XG4gICAgfVxuICAgIGlmIChpc0xpc3RUeXBlKG9sZFR5cGUpKSB7XG4gICAgICAgIHJldHVybiAoKGlzTGlzdFR5cGUobmV3VHlwZSkgJiZcbiAgICAgICAgICAgIHNhZmVDaGFuZ2VGb3JGaWVsZChvbGRUeXBlLm9mVHlwZSwgbmV3VHlwZS5vZlR5cGUpKSB8fFxuICAgICAgICAgICAgKGlzTm9uTnVsbFR5cGUobmV3VHlwZSkgJiYgc2FmZUNoYW5nZUZvckZpZWxkKG9sZFR5cGUsIG5ld1R5cGUub2ZUeXBlKSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBzYWZlQ2hhbmdlRm9ySW5wdXRWYWx1ZShvbGRUeXBlLCBuZXdUeXBlKSB7XG4gICAgaWYgKCFpc1dyYXBwaW5nVHlwZShvbGRUeXBlKSAmJiAhaXNXcmFwcGluZ1R5cGUobmV3VHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIG9sZFR5cGUudG9TdHJpbmcoKSA9PT0gbmV3VHlwZS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAoaXNMaXN0VHlwZShvbGRUeXBlKSAmJiBpc0xpc3RUeXBlKG5ld1R5cGUpKSB7XG4gICAgICAgIHJldHVybiBzYWZlQ2hhbmdlRm9ySW5wdXRWYWx1ZShvbGRUeXBlLm9mVHlwZSwgbmV3VHlwZS5vZlR5cGUpO1xuICAgIH1cbiAgICBpZiAoaXNOb25OdWxsVHlwZShvbGRUeXBlKSkge1xuICAgICAgICBjb25zdCBvZlR5cGUgPSBpc05vbk51bGxUeXBlKG5ld1R5cGUpID8gbmV3VHlwZS5vZlR5cGUgOiBuZXdUeXBlO1xuICAgICAgICByZXR1cm4gc2FmZUNoYW5nZUZvcklucHV0VmFsdWUob2xkVHlwZS5vZlR5cGUsIG9mVHlwZSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldEtpbmQodHlwZSkge1xuICAgIGNvbnN0IG5vZGUgPSB0eXBlLmFzdE5vZGU7XG4gICAgcmV0dXJuIChub2RlICYmIG5vZGUua2luZCkgfHwgJyc7XG59XG5mdW5jdGlvbiBnZXRUeXBlUHJlZml4KHR5cGUpIHtcbiAgICBjb25zdCBraW5kID0gZ2V0S2luZCh0eXBlKTtcbiAgICBjb25zdCBraW5kc01hcCA9IHtcbiAgICAgICAgW0tpbmQuU0NBTEFSX1RZUEVfREVGSU5JVElPTl06ICdzY2FsYXInLFxuICAgICAgICBbS2luZC5PQkpFQ1RfVFlQRV9ERUZJTklUSU9OXTogJ3R5cGUnLFxuICAgICAgICBbS2luZC5JTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OXTogJ2ludGVyZmFjZScsXG4gICAgICAgIFtLaW5kLlVOSU9OX1RZUEVfREVGSU5JVElPTl06ICd1bmlvbicsXG4gICAgICAgIFtLaW5kLkVOVU1fVFlQRV9ERUZJTklUSU9OXTogJ2VudW0nLFxuICAgICAgICBbS2luZC5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OXTogJ2lucHV0JyxcbiAgICB9O1xuICAgIHJldHVybiBraW5kc01hcFtraW5kLnRvU3RyaW5nKCldO1xufVxuZnVuY3Rpb24gaXNQcmltaXRpdmUodHlwZSkge1xuICAgIHJldHVybiAoWydTdHJpbmcnLCAnSW50JywgJ0Zsb2F0JywgJ0Jvb2xlYW4nLCAnSUQnXS5pbmRleE9mKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUgOiB0eXBlLm5hbWUpICE9PSAtMSk7XG59XG5mdW5jdGlvbiBpc0ZvckludHJvc3BlY3Rpb24odHlwZSkge1xuICAgIHJldHVybiAoW1xuICAgICAgICAnX19TY2hlbWEnLFxuICAgICAgICAnX19UeXBlJyxcbiAgICAgICAgJ19fVHlwZUtpbmQnLFxuICAgICAgICAnX19GaWVsZCcsXG4gICAgICAgICdfX0lucHV0VmFsdWUnLFxuICAgICAgICAnX19FbnVtVmFsdWUnLFxuICAgICAgICAnX19EaXJlY3RpdmUnLFxuICAgICAgICAnX19EaXJlY3RpdmVMb2NhdGlvbicsXG4gICAgXS5pbmRleE9mKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUgOiB0eXBlLm5hbWUpICE9PSAtMSk7XG59XG5mdW5jdGlvbiBmaW5kRGVwcmVjYXRlZFVzYWdlcyhzY2hlbWEsIGFzdCkge1xuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIGNvbnN0IHR5cGVJbmZvID0gbmV3IFR5cGVJbmZvKHNjaGVtYSk7XG4gICAgdmlzaXQoYXN0LCB2aXNpdFdpdGhUeXBlSW5mbyh0eXBlSW5mbywge1xuICAgICAgICBBcmd1bWVudChub2RlKSB7XG4gICAgICAgICAgICBjb25zdCBhcmd1bWVudCA9IHR5cGVJbmZvLmdldEFyZ3VtZW50KCk7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFzb24gPSBhcmd1bWVudC5kZXByZWNhdGlvblJlYXNvbjtcbiAgICAgICAgICAgICAgICBpZiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkRGVmID0gdHlwZUluZm8uZ2V0RmllbGREZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkRGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChuZXcgR3JhcGhRTEVycm9yKGBUaGUgYXJndW1lbnQgJyR7YXJndW1lbnQgPT09IG51bGwgfHwgYXJndW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFyZ3VtZW50Lm5hbWV9JyBvZiAnJHtmaWVsZERlZi5uYW1lfScgaXMgZGVwcmVjYXRlZC4gJHtyZWFzb259YCwgW25vZGVdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIEZpZWxkKG5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkRGVmID0gdHlwZUluZm8uZ2V0RmllbGREZWYoKTtcbiAgICAgICAgICAgIGlmIChmaWVsZERlZiAmJiBpc0RlcHJlY2F0ZWQoZmllbGREZWYpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50VHlwZSA9IHR5cGVJbmZvLmdldFBhcmVudFR5cGUoKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFzb24gPSBmaWVsZERlZi5kZXByZWNhdGlvblJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2gobmV3IEdyYXBoUUxFcnJvcihgVGhlIGZpZWxkICcke3BhcmVudFR5cGUubmFtZX0uJHtmaWVsZERlZi5uYW1lfScgaXMgZGVwcmVjYXRlZC4ke3JlYXNvbiA/ICcgJyArIHJlYXNvbiA6ICcnfWAsIFtub2RlXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgRW51bVZhbHVlKG5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudW1WYWwgPSB0eXBlSW5mby5nZXRFbnVtVmFsdWUoKTtcbiAgICAgICAgICAgIGlmIChlbnVtVmFsICYmIGlzRGVwcmVjYXRlZChlbnVtVmFsKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBnZXROYW1lZFR5cGUodHlwZUluZm8uZ2V0SW5wdXRUeXBlKCkpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYXNvbiA9IGVudW1WYWwuZGVwcmVjYXRpb25SZWFzb247XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKG5ldyBHcmFwaFFMRXJyb3IoYFRoZSBlbnVtIHZhbHVlICcke3R5cGUubmFtZX0uJHtlbnVtVmFsLm5hbWV9JyBpcyBkZXByZWNhdGVkLiR7cmVhc29uID8gJyAnICsgcmVhc29uIDogJyd9YCwgW25vZGVdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pKTtcbiAgICByZXR1cm4gZXJyb3JzO1xufVxuZnVuY3Rpb24gcmVtb3ZlRmllbGRJZkRpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlTmFtZXMpIHtcbiAgICBpZiAobm9kZS5kaXJlY3RpdmVzKSB7XG4gICAgICAgIGlmIChub2RlLmRpcmVjdGl2ZXMuc29tZSgoZCkgPT4gZGlyZWN0aXZlTmFtZXMuaW5kZXhPZihkLm5hbWUudmFsdWUpICE9PSAtMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gcmVtb3ZlRGlyZWN0aXZlcyhub2RlLCBkaXJlY3RpdmVOYW1lcykge1xuICAgIGlmIChub2RlLmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbm9kZSksIHsgZGlyZWN0aXZlczogbm9kZS5kaXJlY3RpdmVzLmZpbHRlcigoZCkgPT4gZGlyZWN0aXZlTmFtZXMuaW5kZXhPZihkLm5hbWUudmFsdWUpID09PSAtMSkgfSk7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZ2V0UmVhY2hhYmxlVHlwZXMoc2NoZW1hKSB7XG4gICAgY29uc3QgcmVhY2hhYmxlVHlwZXMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgY29sbGVjdCA9ICh0eXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gdHlwZS5uYW1lO1xuICAgICAgICBpZiAocmVhY2hhYmxlVHlwZXMuaGFzKHR5cGVOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlYWNoYWJsZVR5cGVzLmFkZCh0eXBlTmFtZSk7XG4gICAgICAgIGlmIChpc1NjYWxhclR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0ludGVyZmFjZVR5cGUodHlwZSkgfHwgaXNPYmplY3RUeXBlKHR5cGUpKSB7XG4gICAgICAgICAgICBpZiAoaXNJbnRlcmZhY2VUeXBlKHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBvYmplY3RzLCBpbnRlcmZhY2VzIH0gPSBzY2hlbWEuZ2V0SW1wbGVtZW50YXRpb25zKHR5cGUpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygb2JqZWN0cykge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0KGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBpbnRlcmZhY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3QoY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHR5cGUuZ2V0RmllbGRzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkTmFtZSBpbiBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IGZpZWxkc1tmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgIGNvbGxlY3QocmVzb2x2ZU91dHB1dFR5cGUoZmllbGQudHlwZSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBmaWVsZC5hcmdzO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXJnTmFtZSBpbiBhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbYXJnTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3QocmVzb2x2ZUlucHV0VHlwZShhcmcudHlwZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1VuaW9uVHlwZSh0eXBlKSkge1xuICAgICAgICAgICAgY29uc3QgdHlwZXMgPSB0eXBlLmdldFR5cGVzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHR5cGVzKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNJbnB1dE9iamVjdFR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHR5cGUuZ2V0RmllbGRzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkTmFtZSBpbiBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IGZpZWxkc1tmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgIGNvbGxlY3QocmVzb2x2ZUlucHV0VHlwZShmaWVsZC50eXBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZvciAoY29uc3QgdHlwZSBvZiBbXG4gICAgICAgIHNjaGVtYS5nZXRRdWVyeVR5cGUoKSxcbiAgICAgICAgc2NoZW1hLmdldE11dGF0aW9uVHlwZSgpLFxuICAgICAgICBzY2hlbWEuZ2V0U3Vic2NyaXB0aW9uVHlwZSgpLFxuICAgIF0pIHtcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgIGNvbGxlY3QodHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlYWNoYWJsZVR5cGVzO1xufVxuZnVuY3Rpb24gcmVzb2x2ZU91dHB1dFR5cGUob3V0cHV0KSB7XG4gICAgaWYgKGlzTGlzdFR5cGUob3V0cHV0KSB8fCBpc05vbk51bGxUeXBlKG91dHB1dCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVPdXRwdXRUeXBlKG91dHB1dC5vZlR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuZnVuY3Rpb24gcmVzb2x2ZUlucHV0VHlwZShpbnB1dCkge1xuICAgIGlmIChpc0xpc3RUeXBlKGlucHV0KSB8fCBpc05vbk51bGxUeXBlKGlucHV0KSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZUlucHV0VHlwZShpbnB1dC5vZlR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXQ7XG59XG5cbnZhciBDaGFuZ2VUeXBlO1xuKGZ1bmN0aW9uIChDaGFuZ2VUeXBlKSB7XG4gICAgLy8gQXJndW1lbnRcbiAgICBDaGFuZ2VUeXBlW1wiRmllbGRBcmd1bWVudERlc2NyaXB0aW9uQ2hhbmdlZFwiXSA9IFwiRklFTERfQVJHVU1FTlRfREVTQ1JJUFRJT05fQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZEFyZ3VtZW50RGVmYXVsdENoYW5nZWRcIl0gPSBcIkZJRUxEX0FSR1VNRU5UX0RFRkFVTFRfQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZEFyZ3VtZW50VHlwZUNoYW5nZWRcIl0gPSBcIkZJRUxEX0FSR1VNRU5UX1RZUEVfQ0hBTkdFRFwiO1xuICAgIC8vIERpcmVjdGl2ZVxuICAgIENoYW5nZVR5cGVbXCJEaXJlY3RpdmVSZW1vdmVkXCJdID0gXCJESVJFQ1RJVkVfUkVNT1ZFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJEaXJlY3RpdmVBZGRlZFwiXSA9IFwiRElSRUNUSVZFX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkRpcmVjdGl2ZURlc2NyaXB0aW9uQ2hhbmdlZFwiXSA9IFwiRElSRUNUSVZFX0RFU0NSSVBUSU9OX0NIQU5HRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRGlyZWN0aXZlTG9jYXRpb25BZGRlZFwiXSA9IFwiRElSRUNUSVZFX0xPQ0FUSU9OX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkRpcmVjdGl2ZUxvY2F0aW9uUmVtb3ZlZFwiXSA9IFwiRElSRUNUSVZFX0xPQ0FUSU9OX1JFTU9WRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRGlyZWN0aXZlQXJndW1lbnRBZGRlZFwiXSA9IFwiRElSRUNUSVZFX0FSR1VNRU5UX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkRpcmVjdGl2ZUFyZ3VtZW50UmVtb3ZlZFwiXSA9IFwiRElSRUNUSVZFX0FSR1VNRU5UX1JFTU9WRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRGlyZWN0aXZlQXJndW1lbnREZXNjcmlwdGlvbkNoYW5nZWRcIl0gPSBcIkRJUkVDVElWRV9BUkdVTUVOVF9ERVNDUklQVElPTl9DSEFOR0VEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkRpcmVjdGl2ZUFyZ3VtZW50RGVmYXVsdFZhbHVlQ2hhbmdlZFwiXSA9IFwiRElSRUNUSVZFX0FSR1VNRU5UX0RFRkFVTFRfVkFMVUVfQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJEaXJlY3RpdmVBcmd1bWVudFR5cGVDaGFuZ2VkXCJdID0gXCJESVJFQ1RJVkVfQVJHVU1FTlRfVFlQRV9DSEFOR0VEXCI7XG4gICAgLy8gRW51bVxuICAgIENoYW5nZVR5cGVbXCJFbnVtVmFsdWVSZW1vdmVkXCJdID0gXCJFTlVNX1ZBTFVFX1JFTU9WRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRW51bVZhbHVlQWRkZWRcIl0gPSBcIkVOVU1fVkFMVUVfQURERURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRW51bVZhbHVlRGVzY3JpcHRpb25DaGFuZ2VkXCJdID0gXCJFTlVNX1ZBTFVFX0RFU0NSSVBUSU9OX0NIQU5HRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRW51bVZhbHVlRGVwcmVjYXRpb25SZWFzb25DaGFuZ2VkXCJdID0gXCJFTlVNX1ZBTFVFX0RFUFJFQ0FUSU9OX1JFQVNPTl9DSEFOR0VEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkVudW1WYWx1ZURlcHJlY2F0aW9uUmVhc29uQWRkZWRcIl0gPSBcIkVOVU1fVkFMVUVfREVQUkVDQVRJT05fUkVBU09OX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkVudW1WYWx1ZURlcHJlY2F0aW9uUmVhc29uUmVtb3ZlZFwiXSA9IFwiRU5VTV9WQUxVRV9ERVBSRUNBVElPTl9SRUFTT05fUkVNT1ZFRFwiO1xuICAgIC8vIEZpZWxkXG4gICAgQ2hhbmdlVHlwZVtcIkZpZWxkUmVtb3ZlZFwiXSA9IFwiRklFTERfUkVNT1ZFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZEFkZGVkXCJdID0gXCJGSUVMRF9BRERFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZERlc2NyaXB0aW9uQ2hhbmdlZFwiXSA9IFwiRklFTERfREVTQ1JJUFRJT05fQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZERlc2NyaXB0aW9uQWRkZWRcIl0gPSBcIkZJRUxEX0RFU0NSSVBUSU9OX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkZpZWxkRGVzY3JpcHRpb25SZW1vdmVkXCJdID0gXCJGSUVMRF9ERVNDUklQVElPTl9SRU1PVkVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkZpZWxkRGVwcmVjYXRpb25BZGRlZFwiXSA9IFwiRklFTERfREVQUkVDQVRJT05fQURERURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRmllbGREZXByZWNhdGlvblJlbW92ZWRcIl0gPSBcIkZJRUxEX0RFUFJFQ0FUSU9OX1JFTU9WRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRmllbGREZXByZWNhdGlvblJlYXNvbkNoYW5nZWRcIl0gPSBcIkZJRUxEX0RFUFJFQ0FUSU9OX1JFQVNPTl9DSEFOR0VEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkZpZWxkRGVwcmVjYXRpb25SZWFzb25BZGRlZFwiXSA9IFwiRklFTERfREVQUkVDQVRJT05fUkVBU09OX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIkZpZWxkRGVwcmVjYXRpb25SZWFzb25SZW1vdmVkXCJdID0gXCJGSUVMRF9ERVBSRUNBVElPTl9SRUFTT05fUkVNT1ZFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZFR5cGVDaGFuZ2VkXCJdID0gXCJGSUVMRF9UWVBFX0NIQU5HRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiRmllbGRBcmd1bWVudEFkZGVkXCJdID0gXCJGSUVMRF9BUkdVTUVOVF9BRERFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJGaWVsZEFyZ3VtZW50UmVtb3ZlZFwiXSA9IFwiRklFTERfQVJHVU1FTlRfUkVNT1ZFRFwiO1xuICAgIC8vIElucHV0XG4gICAgQ2hhbmdlVHlwZVtcIklucHV0RmllbGRSZW1vdmVkXCJdID0gXCJJTlBVVF9GSUVMRF9SRU1PVkVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIklucHV0RmllbGRBZGRlZFwiXSA9IFwiSU5QVVRfRklFTERfQURERURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiSW5wdXRGaWVsZERlc2NyaXB0aW9uQWRkZWRcIl0gPSBcIklOUFVUX0ZJRUxEX0RFU0NSSVBUSU9OX0FEREVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIklucHV0RmllbGREZXNjcmlwdGlvblJlbW92ZWRcIl0gPSBcIklOUFVUX0ZJRUxEX0RFU0NSSVBUSU9OX1JFTU9WRURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiSW5wdXRGaWVsZERlc2NyaXB0aW9uQ2hhbmdlZFwiXSA9IFwiSU5QVVRfRklFTERfREVTQ1JJUFRJT05fQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJJbnB1dEZpZWxkRGVmYXVsdFZhbHVlQ2hhbmdlZFwiXSA9IFwiSU5QVVRfRklFTERfREVGQVVMVF9WQUxVRV9DSEFOR0VEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIklucHV0RmllbGRUeXBlQ2hhbmdlZFwiXSA9IFwiSU5QVVRfRklFTERfVFlQRV9DSEFOR0VEXCI7XG4gICAgLy8gVHlwZVxuICAgIENoYW5nZVR5cGVbXCJPYmplY3RUeXBlSW50ZXJmYWNlQWRkZWRcIl0gPSBcIk9CSkVDVF9UWVBFX0lOVEVSRkFDRV9BRERFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJPYmplY3RUeXBlSW50ZXJmYWNlUmVtb3ZlZFwiXSA9IFwiT0JKRUNUX1RZUEVfSU5URVJGQUNFX1JFTU9WRURcIjtcbiAgICAvLyBTY2hlbWFcbiAgICBDaGFuZ2VUeXBlW1wiU2NoZW1hUXVlcnlUeXBlQ2hhbmdlZFwiXSA9IFwiU0NIRU1BX1FVRVJZX1RZUEVfQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJTY2hlbWFNdXRhdGlvblR5cGVDaGFuZ2VkXCJdID0gXCJTQ0hFTUFfTVVUQVRJT05fVFlQRV9DSEFOR0VEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIlNjaGVtYVN1YnNjcmlwdGlvblR5cGVDaGFuZ2VkXCJdID0gXCJTQ0hFTUFfU1VCU0NSSVBUSU9OX1RZUEVfQ0hBTkdFRFwiO1xuICAgIC8vIFR5cGVcbiAgICBDaGFuZ2VUeXBlW1wiVHlwZVJlbW92ZWRcIl0gPSBcIlRZUEVfUkVNT1ZFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJUeXBlQWRkZWRcIl0gPSBcIlRZUEVfQURERURcIjtcbiAgICBDaGFuZ2VUeXBlW1wiVHlwZUtpbmRDaGFuZ2VkXCJdID0gXCJUWVBFX0tJTkRfQ0hBTkdFRFwiO1xuICAgIENoYW5nZVR5cGVbXCJUeXBlRGVzY3JpcHRpb25DaGFuZ2VkXCJdID0gXCJUWVBFX0RFU0NSSVBUSU9OX0NIQU5HRURcIjtcbiAgICAvLyBUT0RPXG4gICAgQ2hhbmdlVHlwZVtcIlR5cGVEZXNjcmlwdGlvblJlbW92ZWRcIl0gPSBcIlRZUEVfREVTQ1JJUFRJT05fUkVNT1ZFRFwiO1xuICAgIC8vIFRPRE9cbiAgICBDaGFuZ2VUeXBlW1wiVHlwZURlc2NyaXB0aW9uQWRkZWRcIl0gPSBcIlRZUEVfREVTQ1JJUFRJT05fQURERURcIjtcbiAgICAvLyBVbmlvblxuICAgIENoYW5nZVR5cGVbXCJVbmlvbk1lbWJlclJlbW92ZWRcIl0gPSBcIlVOSU9OX01FTUJFUl9SRU1PVkVEXCI7XG4gICAgQ2hhbmdlVHlwZVtcIlVuaW9uTWVtYmVyQWRkZWRcIl0gPSBcIlVOSU9OX01FTUJFUl9BRERFRFwiO1xufSkoQ2hhbmdlVHlwZSB8fCAoQ2hhbmdlVHlwZSA9IHt9KSk7XG52YXIgQ3JpdGljYWxpdHlMZXZlbDtcbihmdW5jdGlvbiAoQ3JpdGljYWxpdHlMZXZlbCkge1xuICAgIENyaXRpY2FsaXR5TGV2ZWxbXCJCcmVha2luZ1wiXSA9IFwiQlJFQUtJTkdcIjtcbiAgICBDcml0aWNhbGl0eUxldmVsW1wiTm9uQnJlYWtpbmdcIl0gPSBcIk5PTl9CUkVBS0lOR1wiO1xuICAgIENyaXRpY2FsaXR5TGV2ZWxbXCJEYW5nZXJvdXNcIl0gPSBcIkRBTkdFUk9VU1wiO1xufSkoQ3JpdGljYWxpdHlMZXZlbCB8fCAoQ3JpdGljYWxpdHlMZXZlbCA9IHt9KSk7XG5cbmZ1bmN0aW9uIHNjaGVtYVF1ZXJ5VHlwZUNoYW5nZWQob2xkU2NoZW1hLCBuZXdTY2hlbWEpIHtcbiAgICBjb25zdCBvbGROYW1lID0gKG9sZFNjaGVtYS5nZXRRdWVyeVR5cGUoKSB8fCB7fSkubmFtZSB8fCAndW5rbm93bic7XG4gICAgY29uc3QgbmV3TmFtZSA9IChuZXdTY2hlbWEuZ2V0UXVlcnlUeXBlKCkgfHwge30pLm5hbWUgfHwgJ3Vua25vd24nO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5TY2hlbWFRdWVyeVR5cGVDaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgU2NoZW1hIHF1ZXJ5IHJvb3QgaGFzIGNoYW5nZWQgZnJvbSAnJHtvbGROYW1lfScgdG8gJyR7bmV3TmFtZX0nYCxcbiAgICB9O1xufVxuZnVuY3Rpb24gc2NoZW1hTXV0YXRpb25UeXBlQ2hhbmdlZChvbGRTY2hlbWEsIG5ld1NjaGVtYSkge1xuICAgIGNvbnN0IG9sZE5hbWUgPSAob2xkU2NoZW1hLmdldE11dGF0aW9uVHlwZSgpIHx8IHt9KS5uYW1lIHx8ICd1bmtub3duJztcbiAgICBjb25zdCBuZXdOYW1lID0gKG5ld1NjaGVtYS5nZXRNdXRhdGlvblR5cGUoKSB8fCB7fSkubmFtZSB8fCAndW5rbm93bic7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLlNjaGVtYU11dGF0aW9uVHlwZUNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBTY2hlbWEgbXV0YXRpb24gcm9vdCBoYXMgY2hhbmdlZCBmcm9tICcke29sZE5hbWV9JyB0byAnJHtuZXdOYW1lfSdgLFxuICAgIH07XG59XG5mdW5jdGlvbiBzY2hlbWFTdWJzY3JpcHRpb25UeXBlQ2hhbmdlZChvbGRTY2hlbWEsIG5ld1NjaGVtYSkge1xuICAgIGNvbnN0IG9sZE5hbWUgPSAob2xkU2NoZW1hLmdldFN1YnNjcmlwdGlvblR5cGUoKSB8fCB7fSkubmFtZSB8fCAndW5rbm93bic7XG4gICAgY29uc3QgbmV3TmFtZSA9IChuZXdTY2hlbWEuZ2V0U3Vic2NyaXB0aW9uVHlwZSgpIHx8IHt9KS5uYW1lIHx8ICd1bmtub3duJztcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuU2NoZW1hU3Vic2NyaXB0aW9uVHlwZUNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBTY2hlbWEgc3Vic2NyaXB0aW9uIHJvb3QgaGFzIGNoYW5nZWQgZnJvbSAnJHtvbGROYW1lfScgdG8gJyR7bmV3TmFtZX0nYCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB0eXBlUmVtb3ZlZCh0eXBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLlR5cGVSZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgVHlwZSAnJHt0eXBlLm5hbWV9JyB3YXMgcmVtb3ZlZGAsXG4gICAgICAgIHBhdGg6IHR5cGUubmFtZSxcbiAgICB9O1xufVxuZnVuY3Rpb24gdHlwZUFkZGVkKHR5cGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuVHlwZUFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgVHlwZSAnJHt0eXBlLm5hbWV9JyB3YXMgYWRkZWRgLFxuICAgICAgICBwYXRoOiB0eXBlLm5hbWUsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHR5cGVLaW5kQ2hhbmdlZChvbGRUeXBlLCBuZXdUeXBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICAgICAgcmVhc29uOiBgQ2hhbmdpbmcgdGhlIGtpbmQgb2YgYSB0eXBlIGlzIGEgYnJlYWtpbmcgY2hhbmdlIGJlY2F1c2UgaXQgY2FuIGNhdXNlIGV4aXN0aW5nIHF1ZXJpZXMgdG8gZXJyb3IuIEZvciBleGFtcGxlLCB0dXJuaW5nIGFuIG9iamVjdCB0eXBlIHRvIGEgc2NhbGFyIHR5cGUgd291bGQgYnJlYWsgcXVlcmllcyB0aGF0IGRlZmluZSBhIHNlbGVjdGlvbiBzZXQgZm9yIHRoaXMgdHlwZS5gLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLlR5cGVLaW5kQ2hhbmdlZCxcbiAgICAgICAgbWVzc2FnZTogYCcke29sZFR5cGUubmFtZX0nIGtpbmQgY2hhbmdlZCBmcm9tICcke2dldEtpbmQob2xkVHlwZSl9JyB0byAnJHtnZXRLaW5kKG5ld1R5cGUpfSdgLFxuICAgICAgICBwYXRoOiBvbGRUeXBlLm5hbWUsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHR5cGVEZXNjcmlwdGlvbkNoYW5nZWQob2xkVHlwZSwgbmV3VHlwZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5UeXBlRGVzY3JpcHRpb25DaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgRGVzY3JpcHRpb24gJyR7b2xkVHlwZS5kZXNjcmlwdGlvbn0nIG9uIHR5cGUgJyR7b2xkVHlwZS5uYW1lfScgaGFzIGNoYW5nZWQgdG8gJyR7bmV3VHlwZS5kZXNjcmlwdGlvbn0nYCxcbiAgICAgICAgcGF0aDogb2xkVHlwZS5uYW1lLFxuICAgIH07XG59XG5mdW5jdGlvbiB0eXBlRGVzY3JpcHRpb25SZW1vdmVkKHR5cGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuVHlwZURlc2NyaXB0aW9uUmVtb3ZlZCxcbiAgICAgICAgbWVzc2FnZTogYERlc2NyaXB0aW9uICcke3R5cGUuZGVzY3JpcHRpb259JyB3YXMgcmVtb3ZlZCBmcm9tIG9iamVjdCB0eXBlICcke3R5cGUubmFtZX0nYCxcbiAgICAgICAgcGF0aDogdHlwZS5uYW1lLFxuICAgIH07XG59XG5mdW5jdGlvbiB0eXBlRGVzY3JpcHRpb25BZGRlZCh0eXBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLlR5cGVEZXNjcmlwdGlvbkFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgT2JqZWN0IHR5cGUgJyR7dHlwZS5uYW1lfScgaGFzIGRlc2NyaXB0aW9uICcke3R5cGUuZGVzY3JpcHRpb259J2AsXG4gICAgICAgIHBhdGg6IHR5cGUubmFtZSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBkaXJlY3RpdmVSZW1vdmVkKGRpcmVjdGl2ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVSZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgRGlyZWN0aXZlICcke2RpcmVjdGl2ZS5uYW1lfScgd2FzIHJlbW92ZWRgLFxuICAgICAgICBwYXRoOiBgQCR7ZGlyZWN0aXZlLm5hbWV9YCxcbiAgICB9O1xufVxuZnVuY3Rpb24gZGlyZWN0aXZlQWRkZWQoZGlyZWN0aXZlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkRpcmVjdGl2ZUFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgRGlyZWN0aXZlICcke2RpcmVjdGl2ZS5uYW1lfScgd2FzIGFkZGVkYCxcbiAgICAgICAgcGF0aDogYEAke2RpcmVjdGl2ZS5uYW1lfWAsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRpcmVjdGl2ZURlc2NyaXB0aW9uQ2hhbmdlZChvbGREaXJlY3RpdmUsIG5ld0RpcmVjdGl2ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVEZXNjcmlwdGlvbkNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBEaXJlY3RpdmUgJyR7b2xkRGlyZWN0aXZlLm5hbWV9JyBkZXNjcmlwdGlvbiBjaGFuZ2VkIGZyb20gJyR7b2xkRGlyZWN0aXZlLmRlc2NyaXB0aW9ufScgdG8gJyR7bmV3RGlyZWN0aXZlLmRlc2NyaXB0aW9ufSdgLFxuICAgICAgICBwYXRoOiBgQCR7b2xkRGlyZWN0aXZlLm5hbWV9YCxcbiAgICB9O1xufVxuZnVuY3Rpb24gZGlyZWN0aXZlTG9jYXRpb25BZGRlZChkaXJlY3RpdmUsIGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkRpcmVjdGl2ZUxvY2F0aW9uQWRkZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBMb2NhdGlvbiAnJHtsb2NhdGlvbn0nIHdhcyBhZGRlZCB0byBkaXJlY3RpdmUgJyR7ZGlyZWN0aXZlLm5hbWV9J2AsXG4gICAgICAgIHBhdGg6IGBAJHtkaXJlY3RpdmUubmFtZX1gLFxuICAgIH07XG59XG5mdW5jdGlvbiBkaXJlY3RpdmVMb2NhdGlvblJlbW92ZWQoZGlyZWN0aXZlLCBsb2NhdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVMb2NhdGlvblJlbW92ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBMb2NhdGlvbiAnJHtsb2NhdGlvbn0nIHdhcyByZW1vdmVkIGZyb20gZGlyZWN0aXZlICcke2RpcmVjdGl2ZS5uYW1lfSdgLFxuICAgICAgICBwYXRoOiBgQCR7ZGlyZWN0aXZlLm5hbWV9YCxcbiAgICB9O1xufVxuZnVuY3Rpb24gZGlyZWN0aXZlQXJndW1lbnRBZGRlZChkaXJlY3RpdmUsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogaXNOb25OdWxsVHlwZShhcmcudHlwZSlcbiAgICAgICAgICAgICAgICA/IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmdcbiAgICAgICAgICAgICAgICA6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRGlyZWN0aXZlQXJndW1lbnRBZGRlZCxcbiAgICAgICAgbWVzc2FnZTogYEFyZ3VtZW50ICcke2FyZy5uYW1lfScgd2FzIGFkZGVkIHRvIGRpcmVjdGl2ZSAnJHtkaXJlY3RpdmUubmFtZX0nYCxcbiAgICAgICAgcGF0aDogYEAke2RpcmVjdGl2ZS5uYW1lfWAsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRpcmVjdGl2ZUFyZ3VtZW50UmVtb3ZlZChkaXJlY3RpdmUsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVBcmd1bWVudFJlbW92ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBBcmd1bWVudCAnJHthcmcubmFtZX0nIHdhcyByZW1vdmVkIGZyb20gZGlyZWN0aXZlICcke2RpcmVjdGl2ZS5uYW1lfSdgLFxuICAgICAgICBwYXRoOiBgQCR7ZGlyZWN0aXZlLm5hbWV9LiR7YXJnLm5hbWV9YCxcbiAgICB9O1xufVxuZnVuY3Rpb24gZGlyZWN0aXZlQXJndW1lbnREZXNjcmlwdGlvbkNoYW5nZWQoZGlyZWN0aXZlLCBvbGRBcmcsIG5ld0FyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVBcmd1bWVudERlc2NyaXB0aW9uQ2hhbmdlZCxcbiAgICAgICAgbWVzc2FnZTogYERlc2NyaXB0aW9uIGZvciBhcmd1bWVudCAnJHtvbGRBcmcubmFtZX0nIG9uIGRpcmVjdGl2ZSAnJHtkaXJlY3RpdmUubmFtZX0nIGNoYW5nZWQgZnJvbSAnJHtvbGRBcmcuZGVzY3JpcHRpb259JyB0byAnJHtuZXdBcmcuZGVzY3JpcHRpb259J2AsXG4gICAgICAgIHBhdGg6IGBAJHtkaXJlY3RpdmUubmFtZX0uJHtvbGRBcmcubmFtZX1gLFxuICAgIH07XG59XG5mdW5jdGlvbiBkaXJlY3RpdmVBcmd1bWVudERlZmF1bHRWYWx1ZUNoYW5nZWQoZGlyZWN0aXZlLCBvbGRBcmcsIG5ld0FyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5EYW5nZXJvdXMsXG4gICAgICAgICAgICByZWFzb246ICdDaGFuZ2luZyB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYW4gYXJndW1lbnQgbWF5IGNoYW5nZSB0aGUgcnVudGltZSBiZWhhdmlvdXIgb2YgYSBmaWVsZCBpZiBpdCB3YXMgbmV2ZXIgcHJvdmlkZWQuJyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVBcmd1bWVudERlZmF1bHRWYWx1ZUNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IHR5cGVvZiBvbGRBcmcuZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBgRGVmYXVsdCB2YWx1ZSAnJHtuZXdBcmcuZGVmYXVsdFZhbHVlfScgd2FzIGFkZGVkIHRvIGFyZ3VtZW50ICcke25ld0FyZy5uYW1lfScgb24gZGlyZWN0aXZlICcke2RpcmVjdGl2ZS5uYW1lfSdgXG4gICAgICAgICAgICA6IGBEZWZhdWx0IHZhbHVlIGZvciBhcmd1bWVudCAnJHtvbGRBcmcubmFtZX0nIG9uIGRpcmVjdGl2ZSAnJHtkaXJlY3RpdmUubmFtZX0nIGNoYW5nZWQgZnJvbSAnJHtvbGRBcmcuZGVmYXVsdFZhbHVlfScgdG8gJyR7bmV3QXJnLmRlZmF1bHRWYWx1ZX0nYCxcbiAgICAgICAgcGF0aDogYEAke2RpcmVjdGl2ZS5uYW1lfS4ke29sZEFyZy5uYW1lfWAsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRpcmVjdGl2ZUFyZ3VtZW50VHlwZUNoYW5nZWQoZGlyZWN0aXZlLCBvbGRBcmcsIG5ld0FyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiBzYWZlQ2hhbmdlRm9ySW5wdXRWYWx1ZShvbGRBcmcudHlwZSwgbmV3QXJnLnR5cGUpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgICAgICAgICByZWFzb246ICdDaGFuZ2luZyBhbiBpbnB1dCBmaWVsZCBmcm9tIG5vbi1udWxsIHRvIG51bGwgaXMgY29uc2lkZXJlZCBub24tYnJlYWtpbmcuJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5EaXJlY3RpdmVBcmd1bWVudFR5cGVDaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgVHlwZSBmb3IgYXJndW1lbnQgJyR7b2xkQXJnLm5hbWV9JyBvbiBkaXJlY3RpdmUgJyR7ZGlyZWN0aXZlLm5hbWV9JyBjaGFuZ2VkIGZyb20gJyR7b2xkQXJnLnR5cGV9JyB0byAnJHtuZXdBcmcudHlwZX0nYCxcbiAgICAgICAgcGF0aDogYEAke2RpcmVjdGl2ZS5uYW1lfS4ke29sZEFyZy5uYW1lfWAsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZW51bVZhbHVlUmVtb3ZlZChvbGRFbnVtLCB2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgICAgIHJlYXNvbjogYFJlbW92aW5nIGFuIGVudW0gdmFsdWUgd2lsbCBjYXVzZSBleGlzdGluZyBxdWVyaWVzIHRoYXQgdXNlIHRoaXMgZW51bSB2YWx1ZSB0byBlcnJvci5gLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkVudW1WYWx1ZVJlbW92ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBFbnVtIHZhbHVlICcke3ZhbHVlLm5hbWV9JyAke2lzRGVwcmVjYXRlZCh2YWx1ZSkgPyAnKGRlcHJlY2F0ZWQpICcgOiAnJ313YXMgcmVtb3ZlZCBmcm9tIGVudW0gJyR7b2xkRW51bS5uYW1lfSdgLFxuICAgICAgICBwYXRoOiBbb2xkRW51bS5uYW1lLCB2YWx1ZS5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGVudW1WYWx1ZUFkZGVkKG5ld0VudW0sIHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkRhbmdlcm91cyxcbiAgICAgICAgICAgIHJlYXNvbjogYEFkZGluZyBhbiBlbnVtIHZhbHVlIG1heSBicmVhayBleGlzdGluZyBjbGllbnRzIHRoYXQgd2VyZSBub3QgcHJvZ3JhbW1pbmcgZGVmZW5zaXZlbHkgYWdhaW5zdCBhbiBhZGRlZCBjYXNlIHdoZW4gcXVlcnlpbmcgYW4gZW51bS5gLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkVudW1WYWx1ZUFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgRW51bSB2YWx1ZSAnJHt2YWx1ZS5uYW1lfScgd2FzIGFkZGVkIHRvIGVudW0gJyR7bmV3RW51bS5uYW1lfSdgLFxuICAgICAgICBwYXRoOiBbbmV3RW51bS5uYW1lLCB2YWx1ZS5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGVudW1WYWx1ZURlc2NyaXB0aW9uQ2hhbmdlZChuZXdFbnVtLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRW51bVZhbHVlRGVzY3JpcHRpb25DaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiB0eXBlb2Ygb2xkVmFsdWUuZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGBEZXNjcmlwdGlvbiAnJHtuZXdWYWx1ZS5kZXNjcmlwdGlvbn0nIHdhcyBhZGRlZCB0byBlbnVtIHZhbHVlICcke25ld0VudW0ubmFtZX0uJHtuZXdWYWx1ZS5uYW1lfSdgXG4gICAgICAgICAgICA6IGBEZXNjcmlwdGlvbiBmb3IgZW51bSB2YWx1ZSAnJHtuZXdFbnVtLm5hbWV9LiR7bmV3VmFsdWUubmFtZX0nIGNoYW5nZWQgZnJvbSAnJHtvbGRWYWx1ZS5kZXNjcmlwdGlvbn0nIHRvICcke25ld1ZhbHVlLmRlc2NyaXB0aW9ufSdgLFxuICAgICAgICBwYXRoOiBbbmV3RW51bS5uYW1lLCBvbGRWYWx1ZS5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGVudW1WYWx1ZURlcHJlY2F0aW9uUmVhc29uQ2hhbmdlZChuZXdFbnVtLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRW51bVZhbHVlRGVwcmVjYXRpb25SZWFzb25DaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgRW51bSB2YWx1ZSAnJHtuZXdFbnVtLm5hbWV9LiR7bmV3VmFsdWUubmFtZX0nIGRlcHJlY2F0aW9uIHJlYXNvbiBjaGFuZ2VkIGZyb20gJyR7b2xkVmFsdWUuZGVwcmVjYXRpb25SZWFzb259JyB0byAnJHtuZXdWYWx1ZS5kZXByZWNhdGlvblJlYXNvbn0nYCxcbiAgICAgICAgcGF0aDogW25ld0VudW0ubmFtZSwgb2xkVmFsdWUubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBlbnVtVmFsdWVEZXByZWNhdGlvblJlYXNvbkFkZGVkKG5ld0VudW0sIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5FbnVtVmFsdWVEZXByZWNhdGlvblJlYXNvbkFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgRW51bSB2YWx1ZSAnJHtuZXdFbnVtLm5hbWV9LiR7bmV3VmFsdWUubmFtZX0nIHdhcyBkZXByZWNhdGVkIHdpdGggcmVhc29uICcke25ld1ZhbHVlLmRlcHJlY2F0aW9uUmVhc29ufSdgLFxuICAgICAgICBwYXRoOiBbbmV3RW51bS5uYW1lLCBvbGRWYWx1ZS5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGVudW1WYWx1ZURlcHJlY2F0aW9uUmVhc29uUmVtb3ZlZChuZXdFbnVtLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRW51bVZhbHVlRGVwcmVjYXRpb25SZWFzb25SZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgRGVwcmVjYXRpb24gcmVhc29uIHdhcyByZW1vdmVkIGZyb20gZW51bSB2YWx1ZSAnJHtuZXdFbnVtLm5hbWV9LiR7bmV3VmFsdWUubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW25ld0VudW0ubmFtZSwgb2xkVmFsdWUubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNoYW5nZXNJbkVudW0ob2xkRW51bSwgbmV3RW51bSwgYWRkQ2hhbmdlKSB7XG4gICAgY29tcGFyZUxpc3RzKG9sZEVudW0uZ2V0VmFsdWVzKCksIG5ld0VudW0uZ2V0VmFsdWVzKCksIHtcbiAgICAgICAgb25BZGRlZCh2YWx1ZSkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGVudW1WYWx1ZUFkZGVkKG5ld0VudW0sIHZhbHVlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVtb3ZlZCh2YWx1ZSkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGVudW1WYWx1ZVJlbW92ZWQob2xkRW51bSwgdmFsdWUpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25NdXR1YWwodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdmFsdWUub2xkVmVyc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUubmV3VmVyc2lvbjtcbiAgICAgICAgICAgIGlmIChpc05vdEVxdWFsKG9sZFZhbHVlLmRlc2NyaXB0aW9uLCBuZXdWYWx1ZS5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgICAgICBhZGRDaGFuZ2UoZW51bVZhbHVlRGVzY3JpcHRpb25DaGFuZ2VkKG5ld0VudW0sIG9sZFZhbHVlLCBuZXdWYWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzTm90RXF1YWwob2xkVmFsdWUuZGVwcmVjYXRpb25SZWFzb24sIG5ld1ZhbHVlLmRlcHJlY2F0aW9uUmVhc29uKSkge1xuICAgICAgICAgICAgICAgIGlmIChpc1ZvaWQob2xkVmFsdWUuZGVwcmVjYXRpb25SZWFzb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENoYW5nZShlbnVtVmFsdWVEZXByZWNhdGlvblJlYXNvbkFkZGVkKG5ld0VudW0sIG9sZFZhbHVlLCBuZXdWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1ZvaWQobmV3VmFsdWUuZGVwcmVjYXRpb25SZWFzb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENoYW5nZShlbnVtVmFsdWVEZXByZWNhdGlvblJlYXNvblJlbW92ZWQobmV3RW51bSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGRDaGFuZ2UoZW51bVZhbHVlRGVwcmVjYXRpb25SZWFzb25DaGFuZ2VkKG5ld0VudW0sIG9sZFZhbHVlLCBuZXdWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdW5pb25NZW1iZXJSZW1vdmVkKHVuaW9uLCB0eXBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICAgICAgcmVhc29uOiAnUmVtb3ZpbmcgYSB1bmlvbiBtZW1iZXIgZnJvbSBhIHVuaW9uIGNhbiBjYXVzZSBleGlzdGluZyBxdWVyaWVzIHRoYXQgdXNlIHRoaXMgdW5pb24gbWVtYmVyIGluIGEgZnJhZ21lbnQgc3ByZWFkIHRvIGVycm9yLicsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuVW5pb25NZW1iZXJSZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgTWVtYmVyICcke3R5cGUubmFtZX0nIHdhcyByZW1vdmVkIGZyb20gVW5pb24gdHlwZSAnJHt1bmlvbi5uYW1lfSdgLFxuICAgICAgICBwYXRoOiB1bmlvbi5uYW1lLFxuICAgIH07XG59XG5mdW5jdGlvbiB1bmlvbk1lbWJlckFkZGVkKHVuaW9uLCB0eXBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkRhbmdlcm91cyxcbiAgICAgICAgICAgIHJlYXNvbjogJ0FkZGluZyBhIHBvc3NpYmxlIHR5cGUgdG8gVW5pb25zIG1heSBicmVhayBleGlzdGluZyBjbGllbnRzIHRoYXQgd2VyZSBub3QgcHJvZ3JhbW1pbmcgZGVmZW5zaXZlbHkgYWdhaW5zdCBhIG5ldyBwb3NzaWJsZSB0eXBlLicsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuVW5pb25NZW1iZXJBZGRlZCxcbiAgICAgICAgbWVzc2FnZTogYE1lbWJlciAnJHt0eXBlLm5hbWV9JyB3YXMgYWRkZWQgdG8gVW5pb24gdHlwZSAnJHt1bmlvbi5uYW1lfSdgLFxuICAgICAgICBwYXRoOiB1bmlvbi5uYW1lLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNoYW5nZXNJblVuaW9uKG9sZFVuaW9uLCBuZXdVbmlvbiwgYWRkQ2hhbmdlKSB7XG4gICAgY29uc3Qgb2xkVHlwZXMgPSBvbGRVbmlvbi5nZXRUeXBlcygpO1xuICAgIGNvbnN0IG5ld1R5cGVzID0gbmV3VW5pb24uZ2V0VHlwZXMoKTtcbiAgICBjb21wYXJlTGlzdHMob2xkVHlwZXMsIG5ld1R5cGVzLCB7XG4gICAgICAgIG9uQWRkZWQodCkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKHVuaW9uTWVtYmVyQWRkZWQobmV3VW5pb24sIHQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZW1vdmVkKHQpIHtcbiAgICAgICAgICAgIGFkZENoYW5nZSh1bmlvbk1lbWJlclJlbW92ZWQob2xkVW5pb24sIHQpKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZVR3b1N0cmluZ3Moc3RyMSwgc3RyMikge1xuICAgIGlmICghc3RyMS5sZW5ndGggJiYgIXN0cjIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBpZiAoIXN0cjEubGVuZ3RoIHx8ICFzdHIyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgaWYgKHN0cjEudG9VcHBlckNhc2UoKSA9PT0gc3RyMi50b1VwcGVyQ2FzZSgpKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBpZiAoc3RyMS5sZW5ndGggPT09IDEgJiYgc3RyMi5sZW5ndGggPT09IDEpXG4gICAgICAgIHJldHVybiAwO1xuICAgIGNvbnN0IHBhaXJzMSA9IHdvcmRMZXR0ZXJQYWlycyhzdHIxKTtcbiAgICBjb25zdCBwYWlyczIgPSB3b3JkTGV0dGVyUGFpcnMoc3RyMik7XG4gICAgY29uc3QgdW5pb24gPSBwYWlyczEubGVuZ3RoICsgcGFpcnMyLmxlbmd0aDtcbiAgICBsZXQgaW50ZXJzZWN0aW9uID0gMDtcbiAgICBwYWlyczEuZm9yRWFjaCgocGFpcjEpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBhaXIyOyAocGFpcjIgPSBwYWlyczJbaV0pOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwYWlyMSAhPT0gcGFpcjIpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb24rKztcbiAgICAgICAgICAgIHBhaXJzMi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoaW50ZXJzZWN0aW9uICogMikgLyB1bmlvbjtcbn1cbmZ1bmN0aW9uIGZpbmRCZXN0TWF0Y2gobWFpblN0cmluZywgdGFyZ2V0U3RyaW5ncykge1xuICAgIGlmICghYXJlQXJnc1ZhbGlkKG1haW5TdHJpbmcsIHRhcmdldFN0cmluZ3MpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBhcmd1bWVudHM6IEZpcnN0IGFyZ3VtZW50IHNob3VsZCBiZSBhIHN0cmluZywgc2Vjb25kIHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzJyk7XG4gICAgY29uc3QgcmF0aW5ncyA9IHRhcmdldFN0cmluZ3MubWFwKCh0YXJnZXQpID0+ICh7XG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcmF0aW5nOiBjb21wYXJlVHdvU3RyaW5ncyhtYWluU3RyaW5nLCB0YXJnZXQudmFsdWUpLFxuICAgIH0pKTtcbiAgICBjb25zdCBiZXN0TWF0Y2ggPSBBcnJheS5mcm9tKHJhdGluZ3MpLnNvcnQoKGEsIGIpID0+IGIucmF0aW5nIC0gYS5yYXRpbmcpWzBdO1xuICAgIHJldHVybiB7IHJhdGluZ3MsIGJlc3RNYXRjaCB9O1xufVxuZnVuY3Rpb24gZmxhdHRlbkRlZXAoYXJyKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKVxuICAgICAgICA/IGFyci5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGZsYXR0ZW5EZWVwKGIpKSwgW10pXG4gICAgICAgIDogW2Fycl07XG59XG5mdW5jdGlvbiBhcmVBcmdzVmFsaWQobWFpblN0cmluZywgdGFyZ2V0U3RyaW5ncykge1xuICAgIGlmICh0eXBlb2YgbWFpblN0cmluZyAhPT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFyZ2V0U3RyaW5ncykpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXRhcmdldFN0cmluZ3MubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHRhcmdldFN0cmluZ3MuZmluZCgocykgPT4gdHlwZW9mIHMudmFsdWUgIT09ICdzdHJpbmcnKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gbGV0dGVyUGFpcnMoc3RyKSB7XG4gICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbWF4ID0gc3RyLmxlbmd0aCAtIDE7IGkgPCBtYXg7IGkrKylcbiAgICAgICAgcGFpcnNbaV0gPSBzdHIuc3Vic3RyaW5nKGksIGkgKyAyKTtcbiAgICByZXR1cm4gcGFpcnM7XG59XG5mdW5jdGlvbiB3b3JkTGV0dGVyUGFpcnMoc3RyKSB7XG4gICAgY29uc3QgcGFpcnMgPSBzdHIudG9VcHBlckNhc2UoKS5zcGxpdCgnICcpLm1hcChsZXR0ZXJQYWlycyk7XG4gICAgcmV0dXJuIGZsYXR0ZW5EZWVwKHBhaXJzKTtcbn1cbmZ1bmN0aW9uIHNhZmVTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIGluc3BlY3Qob2JqKS5yZXBsYWNlKC9cXFtPYmplY3RcXDogbnVsbCBwcm90b3R5cGVcXF0gL2csICcnKS5yZXBsYWNlKC8oXicpfCgnJCkvZywgJycpO1xufVxuXG5mdW5jdGlvbiBpbnB1dEZpZWxkUmVtb3ZlZChpbnB1dCwgZmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcsXG4gICAgICAgICAgICByZWFzb246ICdSZW1vdmluZyBhbiBpbnB1dCBmaWVsZCB3aWxsIGNhdXNlIGV4aXN0aW5nIHF1ZXJpZXMgdGhhdCB1c2UgdGhpcyBpbnB1dCBmaWVsZCB0byBlcnJvci4nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLklucHV0RmllbGRSZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgSW5wdXQgZmllbGQgJyR7ZmllbGQubmFtZX0nICR7aXNEZXByZWNhdGVkKGZpZWxkKSA/ICcoZGVwcmVjYXRlZCkgJyA6ICcnfXdhcyByZW1vdmVkIGZyb20gaW5wdXQgb2JqZWN0IHR5cGUgJyR7aW5wdXQubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW2lucHV0Lm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gaW5wdXRGaWVsZEFkZGVkKGlucHV0LCBmaWVsZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiBpc05vbk51bGxUeXBlKGZpZWxkLnR5cGUpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgICAgICAgICByZWFzb246ICdBZGRpbmcgYSByZXF1aXJlZCBpbnB1dCBmaWVsZCB0byBhbiBleGlzdGluZyBpbnB1dCBvYmplY3QgdHlwZSBpcyBhIGJyZWFraW5nIGNoYW5nZSBiZWNhdXNlIGl0IHdpbGwgY2F1c2UgZXhpc3RpbmcgdXNlcyBvZiB0aGlzIGlucHV0IG9iamVjdCB0eXBlIHRvIGVycm9yLicsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5EYW5nZXJvdXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLklucHV0RmllbGRBZGRlZCxcbiAgICAgICAgbWVzc2FnZTogYElucHV0IGZpZWxkICcke2ZpZWxkLm5hbWV9JyB3YXMgYWRkZWQgdG8gaW5wdXQgb2JqZWN0IHR5cGUgJyR7aW5wdXQubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW2lucHV0Lm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gaW5wdXRGaWVsZERlc2NyaXB0aW9uQWRkZWQodHlwZSwgZmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuSW5wdXRGaWVsZERlc2NyaXB0aW9uQWRkZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBJbnB1dCBmaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nIGhhcyBkZXNjcmlwdGlvbiAnJHtmaWVsZC5kZXNjcmlwdGlvbn0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBpbnB1dEZpZWxkRGVzY3JpcHRpb25SZW1vdmVkKHR5cGUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLklucHV0RmllbGREZXNjcmlwdGlvblJlbW92ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBEZXNjcmlwdGlvbiB3YXMgcmVtb3ZlZCBmcm9tIGlucHV0IGZpZWxkICcke3R5cGUubmFtZX0uJHtmaWVsZC5uYW1lfSdgLFxuICAgICAgICBwYXRoOiBbdHlwZS5uYW1lLCBmaWVsZC5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGlucHV0RmllbGREZXNjcmlwdGlvbkNoYW5nZWQoaW5wdXQsIG9sZEZpZWxkLCBuZXdGaWVsZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5JbnB1dEZpZWxkRGVzY3JpcHRpb25DaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgSW5wdXQgZmllbGQgJyR7aW5wdXQubmFtZX0uJHtvbGRGaWVsZC5uYW1lfScgZGVzY3JpcHRpb24gY2hhbmdlZCBmcm9tICcke29sZEZpZWxkLmRlc2NyaXB0aW9ufScgdG8gJyR7bmV3RmllbGQuZGVzY3JpcHRpb259J2AsXG4gICAgICAgIHBhdGg6IFtpbnB1dC5uYW1lLCBvbGRGaWVsZC5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGlucHV0RmllbGREZWZhdWx0VmFsdWVDaGFuZ2VkKGlucHV0LCBvbGRGaWVsZCwgbmV3RmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuRGFuZ2Vyb3VzLFxuICAgICAgICAgICAgcmVhc29uOiAnQ2hhbmdpbmcgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIGFuIGFyZ3VtZW50IG1heSBjaGFuZ2UgdGhlIHJ1bnRpbWUgYmVoYXZpb3Igb2YgYSBmaWVsZCBpZiBpdCB3YXMgbmV2ZXIgcHJvdmlkZWQuJyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5JbnB1dEZpZWxkRGVmYXVsdFZhbHVlQ2hhbmdlZCxcbiAgICAgICAgbWVzc2FnZTogYElucHV0IGZpZWxkICcke2lucHV0Lm5hbWV9LiR7b2xkRmllbGQubmFtZX0nIGRlZmF1bHQgdmFsdWUgY2hhbmdlZCBmcm9tICcke3NhZmVTdHJpbmcob2xkRmllbGQuZGVmYXVsdFZhbHVlKX0nIHRvICcke3NhZmVTdHJpbmcobmV3RmllbGQuZGVmYXVsdFZhbHVlKX0nYCxcbiAgICAgICAgcGF0aDogW2lucHV0Lm5hbWUsIG9sZEZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gaW5wdXRGaWVsZFR5cGVDaGFuZ2VkKGlucHV0LCBvbGRGaWVsZCwgbmV3RmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eTogc2FmZUNoYW5nZUZvcklucHV0VmFsdWUob2xkRmllbGQudHlwZSwgbmV3RmllbGQudHlwZSlcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogJ0NoYW5naW5nIGFuIGlucHV0IGZpZWxkIGZyb20gbm9uLW51bGwgdG8gbnVsbCBpcyBjb25zaWRlcmVkIG5vbi1icmVha2luZy4nLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcsXG4gICAgICAgICAgICAgICAgcmVhc29uOiAnQ2hhbmdpbmcgdGhlIHR5cGUgb2YgYW4gaW5wdXQgZmllbGQgY2FuIGNhdXNlIGV4aXN0aW5nIHF1ZXJpZXMgdGhhdCB1c2UgdGhpcyBmaWVsZCB0byBlcnJvci4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5JbnB1dEZpZWxkVHlwZUNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBJbnB1dCBmaWVsZCAnJHtpbnB1dC5uYW1lfS4ke29sZEZpZWxkLm5hbWV9JyBjaGFuZ2VkIHR5cGUgZnJvbSAnJHtvbGRGaWVsZC50eXBlLnRvU3RyaW5nKCl9JyB0byAnJHtuZXdGaWVsZC50eXBlLnRvU3RyaW5nKCl9J2AsXG4gICAgICAgIHBhdGg6IFtpbnB1dC5uYW1lLCBvbGRGaWVsZC5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY2hhbmdlc0luSW5wdXRPYmplY3Qob2xkSW5wdXQsIG5ld0lucHV0LCBhZGRDaGFuZ2UpIHtcbiAgICBjb25zdCBvbGRGaWVsZHMgPSBvbGRJbnB1dC5nZXRGaWVsZHMoKTtcbiAgICBjb25zdCBuZXdGaWVsZHMgPSBuZXdJbnB1dC5nZXRGaWVsZHMoKTtcbiAgICBjb21wYXJlTGlzdHMoT2JqZWN0LnZhbHVlcyhvbGRGaWVsZHMpLCBPYmplY3QudmFsdWVzKG5ld0ZpZWxkcyksIHtcbiAgICAgICAgb25BZGRlZChmaWVsZCkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGlucHV0RmllbGRBZGRlZChuZXdJbnB1dCwgZmllbGQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZW1vdmVkKGZpZWxkKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoaW5wdXRGaWVsZFJlbW92ZWQob2xkSW5wdXQsIGZpZWxkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTXV0dWFsKGZpZWxkKSB7XG4gICAgICAgICAgICBjaGFuZ2VzSW5JbnB1dEZpZWxkKG9sZElucHV0LCBmaWVsZC5vbGRWZXJzaW9uLCBmaWVsZC5uZXdWZXJzaW9uLCBhZGRDaGFuZ2UpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZnVuY3Rpb24gY2hhbmdlc0luSW5wdXRGaWVsZChpbnB1dCwgb2xkRmllbGQsIG5ld0ZpZWxkLCBhZGRDaGFuZ2UpIHtcbiAgICBpZiAoaXNOb3RFcXVhbChvbGRGaWVsZC5kZXNjcmlwdGlvbiwgbmV3RmllbGQuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIGlmIChpc1ZvaWQob2xkRmllbGQuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoaW5wdXRGaWVsZERlc2NyaXB0aW9uQWRkZWQoaW5wdXQsIG5ld0ZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNWb2lkKG5ld0ZpZWxkLmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGlucHV0RmllbGREZXNjcmlwdGlvblJlbW92ZWQoaW5wdXQsIG9sZEZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoaW5wdXRGaWVsZERlc2NyaXB0aW9uQ2hhbmdlZChpbnB1dCwgb2xkRmllbGQsIG5ld0ZpZWxkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzTm90RXF1YWwob2xkRmllbGQuZGVmYXVsdFZhbHVlLCBuZXdGaWVsZC5kZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9sZEZpZWxkLmRlZmF1bHRWYWx1ZSkgJiZcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkobmV3RmllbGQuZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKGRpZmZBcnJheXMob2xkRmllbGQuZGVmYXVsdFZhbHVlLCBuZXdGaWVsZC5kZWZhdWx0VmFsdWUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhZGRDaGFuZ2UoaW5wdXRGaWVsZERlZmF1bHRWYWx1ZUNoYW5nZWQoaW5wdXQsIG9sZEZpZWxkLCBuZXdGaWVsZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEpTT04uc3RyaW5naWZ5KG9sZEZpZWxkLmRlZmF1bHRWYWx1ZSkgIT09XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShuZXdGaWVsZC5kZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoaW5wdXRGaWVsZERlZmF1bHRWYWx1ZUNoYW5nZWQoaW5wdXQsIG9sZEZpZWxkLCBuZXdGaWVsZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc05vdEVxdWFsKG9sZEZpZWxkLnR5cGUudG9TdHJpbmcoKSwgbmV3RmllbGQudHlwZS50b1N0cmluZygpKSkge1xuICAgICAgICBhZGRDaGFuZ2UoaW5wdXRGaWVsZFR5cGVDaGFuZ2VkKGlucHV0LCBvbGRGaWVsZCwgbmV3RmllbGQpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9iamVjdFR5cGVJbnRlcmZhY2VBZGRlZChpZmFjZSwgdHlwZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5EYW5nZXJvdXMsXG4gICAgICAgICAgICByZWFzb246ICdBZGRpbmcgYW4gaW50ZXJmYWNlIHRvIGFuIG9iamVjdCB0eXBlIG1heSBicmVhayBleGlzdGluZyBjbGllbnRzIHRoYXQgd2VyZSBub3QgcHJvZ3JhbW1pbmcgZGVmZW5zaXZlbHkgYWdhaW5zdCBhIG5ldyBwb3NzaWJsZSB0eXBlLicsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuT2JqZWN0VHlwZUludGVyZmFjZUFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgJyR7dHlwZS5uYW1lfScgb2JqZWN0IGltcGxlbWVudHMgJyR7aWZhY2UubmFtZX0nIGludGVyZmFjZWAsXG4gICAgICAgIHBhdGg6IHR5cGUubmFtZSxcbiAgICB9O1xufVxuZnVuY3Rpb24gb2JqZWN0VHlwZUludGVyZmFjZVJlbW92ZWQoaWZhY2UsIHR5cGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcsXG4gICAgICAgICAgICByZWFzb246ICdSZW1vdmluZyBhbiBpbnRlcmZhY2UgZnJvbSBhbiBvYmplY3QgdHlwZSBjYW4gY2F1c2UgZXhpc3RpbmcgcXVlcmllcyB0aGF0IHVzZSB0aGlzIGluIGEgZnJhZ21lbnQgc3ByZWFkIHRvIGVycm9yLicsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuT2JqZWN0VHlwZUludGVyZmFjZVJlbW92ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGAnJHt0eXBlLm5hbWV9JyBvYmplY3QgdHlwZSBubyBsb25nZXIgaW1wbGVtZW50cyAnJHtpZmFjZS5uYW1lfScgaW50ZXJmYWNlYCxcbiAgICAgICAgcGF0aDogdHlwZS5uYW1lLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZpZWxkUmVtb3ZlZCh0eXBlLCBmaWVsZCkge1xuICAgIGNvbnN0IGVudGl0eSA9IGlzSW50ZXJmYWNlVHlwZSh0eXBlKSA/ICdpbnRlcmZhY2UnIDogJ29iamVjdCB0eXBlJztcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcsXG4gICAgICAgICAgICByZWFzb246IGZpZWxkLmRlcHJlY2F0aW9uUmVhc29uXG4gICAgICAgICAgICAgICAgPyBgUmVtb3ZpbmcgYSBkZXByZWNhdGVkIGZpZWxkIGlzIGEgYnJlYWtpbmcgY2hhbmdlLiBCZWZvcmUgcmVtb3ZpbmcgaXQsIHlvdSBtYXkgd2FudCB0byBsb29rIGF0IHRoZSBmaWVsZCdzIHVzYWdlIHRvIHNlZSB0aGUgaW1wYWN0IG9mIHJlbW92aW5nIHRoZSBmaWVsZC5gXG4gICAgICAgICAgICAgICAgOiBgUmVtb3ZpbmcgYSBmaWVsZCBpcyBhIGJyZWFraW5nIGNoYW5nZS4gSXQgaXMgcHJlZmVyYWJsZSB0byBkZXByZWNhdGUgdGhlIGZpZWxkIGJlZm9yZSByZW1vdmluZyBpdC5gLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkUmVtb3ZlZCxcbiAgICAgICAgbWVzc2FnZTogYEZpZWxkICcke2ZpZWxkLm5hbWV9JyAke2lzRGVwcmVjYXRlZChmaWVsZCkgPyAnKGRlcHJlY2F0ZWQpICcgOiAnJ313YXMgcmVtb3ZlZCBmcm9tICR7ZW50aXR5fSAnJHt0eXBlLm5hbWV9J2AsXG4gICAgICAgIHBhdGg6IFt0eXBlLm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGRBZGRlZCh0eXBlLCBmaWVsZCkge1xuICAgIGNvbnN0IGVudGl0eSA9IGlzSW50ZXJmYWNlVHlwZSh0eXBlKSA/ICdpbnRlcmZhY2UnIDogJ29iamVjdCB0eXBlJztcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRmllbGRBZGRlZCxcbiAgICAgICAgbWVzc2FnZTogYEZpZWxkICcke2ZpZWxkLm5hbWV9JyB3YXMgYWRkZWQgdG8gJHtlbnRpdHl9ICcke3R5cGUubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBmaWVsZERlc2NyaXB0aW9uQ2hhbmdlZCh0eXBlLCBvbGRGaWVsZCwgbmV3RmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRmllbGREZXNjcmlwdGlvbkNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBGaWVsZCAnJHt0eXBlLm5hbWV9LiR7b2xkRmllbGQubmFtZX0nIGRlc2NyaXB0aW9uIGNoYW5nZWQgZnJvbSAnJHtvbGRGaWVsZC5kZXNjcmlwdGlvbn0nIHRvICcke25ld0ZpZWxkLmRlc2NyaXB0aW9ufSdgLFxuICAgICAgICBwYXRoOiBbdHlwZS5uYW1lLCBvbGRGaWVsZC5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZpZWxkRGVzY3JpcHRpb25BZGRlZCh0eXBlLCBmaWVsZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5GaWVsZERlc2NyaXB0aW9uQWRkZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBGaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nIGhhcyBkZXNjcmlwdGlvbiAnJHtmaWVsZC5kZXNjcmlwdGlvbn0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBmaWVsZERlc2NyaXB0aW9uUmVtb3ZlZCh0eXBlLCBmaWVsZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5GaWVsZERlc2NyaXB0aW9uUmVtb3ZlZCxcbiAgICAgICAgbWVzc2FnZTogYERlc2NyaXB0aW9uIHdhcyByZW1vdmVkIGZyb20gZmllbGQgJyR7dHlwZS5uYW1lfS4ke2ZpZWxkLm5hbWV9J2AsXG4gICAgICAgIHBhdGg6IFt0eXBlLm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGREZXByZWNhdGlvbkFkZGVkKHR5cGUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkRGVwcmVjYXRpb25BZGRlZCxcbiAgICAgICAgbWVzc2FnZTogYEZpZWxkICcke3R5cGUubmFtZX0uJHtmaWVsZC5uYW1lfScgaXMgZGVwcmVjYXRlZGAsXG4gICAgICAgIHBhdGg6IFt0eXBlLm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGREZXByZWNhdGlvblJlbW92ZWQodHlwZSwgZmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuRGFuZ2Vyb3VzLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkRGVwcmVjYXRpb25SZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgRmllbGQgJyR7dHlwZS5uYW1lfS4ke2ZpZWxkLm5hbWV9JyBpcyBubyBsb25nZXIgZGVwcmVjYXRlZGAsXG4gICAgICAgIHBhdGg6IFt0eXBlLm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGREZXByZWNhdGlvblJlYXNvbkNoYW5nZWQodHlwZSwgb2xkRmllbGQsIG5ld0ZpZWxkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkRGVwcmVjYXRpb25SZWFzb25DaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgRGVwcmVjYXRpb24gcmVhc29uIG9uIGZpZWxkICcke3R5cGUubmFtZX0uJHtuZXdGaWVsZC5uYW1lfScgaGFzIGNoYW5nZWQgZnJvbSAnJHtvbGRGaWVsZC5kZXByZWNhdGlvblJlYXNvbn0nIHRvICcke25ld0ZpZWxkLmRlcHJlY2F0aW9uUmVhc29ufSdgLFxuICAgICAgICBwYXRoOiBbdHlwZS5uYW1lLCBvbGRGaWVsZC5uYW1lXS5qb2luKCcuJyksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZpZWxkRGVwcmVjYXRpb25SZWFzb25BZGRlZCh0eXBlLCBmaWVsZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5GaWVsZERlcHJlY2F0aW9uUmVhc29uQWRkZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBGaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nIGhhcyBkZXByZWNhdGlvbiByZWFzb24gJyR7ZmllbGQuZGVwcmVjYXRpb25SZWFzb259J2AsXG4gICAgICAgIHBhdGg6IFt0eXBlLm5hbWUsIGZpZWxkLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGREZXByZWNhdGlvblJlYXNvblJlbW92ZWQodHlwZSwgZmllbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcml0aWNhbGl0eToge1xuICAgICAgICAgICAgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuTm9uQnJlYWtpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRmllbGREZXByZWNhdGlvblJlYXNvblJlbW92ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBEZXByZWNhdGlvbiByZWFzb24gd2FzIHJlbW92ZWQgZnJvbSBmaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBmaWVsZFR5cGVDaGFuZ2VkKHR5cGUsIG9sZEZpZWxkLCBuZXdGaWVsZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogc2FmZUNoYW5nZUZvckZpZWxkKG9sZEZpZWxkLnR5cGUsIG5ld0ZpZWxkLnR5cGUpXG4gICAgICAgICAgICAgICAgPyBDcml0aWNhbGl0eUxldmVsLk5vbkJyZWFraW5nXG4gICAgICAgICAgICAgICAgOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkVHlwZUNoYW5nZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBGaWVsZCAnJHt0eXBlfS4ke29sZEZpZWxkLm5hbWV9JyBjaGFuZ2VkIHR5cGUgZnJvbSAnJHtvbGRGaWVsZC50eXBlfScgdG8gJyR7bmV3RmllbGQudHlwZX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgb2xkRmllbGQubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBmaWVsZEFyZ3VtZW50QWRkZWQodHlwZSwgZmllbGQsIGFyZykge1xuICAgIGNvbnN0IGlzQnJlYWtpbmcgPSBpc05vbk51bGxUeXBlKGFyZy50eXBlKSAmJiB0eXBlb2YgYXJnLmRlZmF1bHRWYWx1ZSA9PT0gJ3VuZGVmaW5lZCc7XG4gICAgY29uc3QgZGVmYXVsdFZhbHVlTXNnID0gdHlwZW9mIGFyZy5kZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnID8gJyAod2l0aCBkZWZhdWx0IHZhbHVlKSAnIDogJyAnO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiBpc0JyZWFraW5nXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgICAgICAgICByZWFzb246IGBBZGRpbmcgYSByZXF1aXJlZCBhcmd1bWVudCB0byBhbiBleGlzdGluZyBmaWVsZCBpcyBhIGJyZWFraW5nIGNoYW5nZSBiZWNhdXNlIGl0IHdpbGwgY2F1c2UgZXhpc3RpbmcgdXNlcyBvZiB0aGlzIGZpZWxkIHRvIGVycm9yLmAsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5EYW5nZXJvdXMsXG4gICAgICAgICAgICAgICAgcmVhc29uOiBgQWRkaW5nIGEgbmV3IGFyZ3VtZW50IHRvIGFuIGV4aXN0aW5nIGZpZWxkIG1heSBpbnZvbHZlIGEgY2hhbmdlIGluIHJlc29sdmUgZnVuY3Rpb24gbG9naWMgdGhhdCBwb3RlbnRpYWxseSBtYXkgY2F1c2Ugc29tZSBzaWRlIGVmZmVjdHMuYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIHR5cGU6IENoYW5nZVR5cGUuRmllbGRBcmd1bWVudEFkZGVkLFxuICAgICAgICBtZXNzYWdlOiBgQXJndW1lbnQgJyR7YXJnLm5hbWV9OiAke2FyZy50eXBlfScke2RlZmF1bHRWYWx1ZU1zZ31hZGRlZCB0byBmaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZSwgYXJnLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGRBcmd1bWVudFJlbW92ZWQodHlwZSwgZmllbGQsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyxcbiAgICAgICAgICAgIHJlYXNvbjogYFJlbW92aW5nIGEgZmllbGQgYXJndW1lbnQgaXMgYSBicmVha2luZyBjaGFuZ2UgYmVjYXVzZSBpdCB3aWxsIGNhdXNlIGV4aXN0aW5nIHF1ZXJpZXMgdGhhdCB1c2UgdGhpcyBhcmd1bWVudCB0byBlcnJvci5gLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkQXJndW1lbnRSZW1vdmVkLFxuICAgICAgICBtZXNzYWdlOiBgQXJndW1lbnQgJyR7YXJnLm5hbWV9OiAke2FyZy50eXBlfScgd2FzIHJlbW92ZWQgZnJvbSBmaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZSwgYXJnLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmaWVsZEFyZ3VtZW50RGVzY3JpcHRpb25DaGFuZ2VkKHR5cGUsIGZpZWxkLCBvbGRBcmcsIG5ld0FyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiB7XG4gICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5GaWVsZEFyZ3VtZW50RGVzY3JpcHRpb25DaGFuZ2VkLFxuICAgICAgICBtZXNzYWdlOiBgRGVzY3JpcHRpb24gZm9yIGFyZ3VtZW50ICcke25ld0FyZy5uYW1lfScgb24gZmllbGQgJyR7dHlwZS5uYW1lfS4ke2ZpZWxkLm5hbWV9JyBjaGFuZ2VkIGZyb20gJyR7b2xkQXJnLmRlc2NyaXB0aW9ufScgdG8gJyR7bmV3QXJnLmRlc2NyaXB0aW9ufSdgLFxuICAgICAgICBwYXRoOiBbdHlwZS5uYW1lLCBmaWVsZC5uYW1lLCBvbGRBcmcubmFtZV0uam9pbignLicpLFxuICAgIH07XG59XG5mdW5jdGlvbiBmaWVsZEFyZ3VtZW50RGVmYXVsdENoYW5nZWQodHlwZSwgZmllbGQsIG9sZEFyZywgbmV3QXJnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JpdGljYWxpdHk6IHtcbiAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkRhbmdlcm91cyxcbiAgICAgICAgICAgIHJlYXNvbjogJ0NoYW5naW5nIHRoZSBkZWZhdWx0IHZhbHVlIGZvciBhbiBhcmd1bWVudCBtYXkgY2hhbmdlIHRoZSBydW50aW1lIGJlaGF2aW91ciBvZiBhIGZpZWxkIGlmIGl0IHdhcyBuZXZlciBwcm92aWRlZC4nLFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkQXJndW1lbnREZWZhdWx0Q2hhbmdlZCxcbiAgICAgICAgbWVzc2FnZTogdHlwZW9mIG9sZEFyZy5kZWZhdWx0VmFsdWUgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGBEZWZhdWx0IHZhbHVlICcke3NhZmVTdHJpbmcobmV3QXJnLmRlZmF1bHRWYWx1ZSl9JyB3YXMgYWRkZWQgdG8gYXJndW1lbnQgJyR7bmV3QXJnLm5hbWV9JyBvbiBmaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nYFxuICAgICAgICAgICAgOiBgRGVmYXVsdCB2YWx1ZSBmb3IgYXJndW1lbnQgJyR7bmV3QXJnLm5hbWV9JyBvbiBmaWVsZCAnJHt0eXBlLm5hbWV9LiR7ZmllbGQubmFtZX0nIGNoYW5nZWQgZnJvbSAnJHtzYWZlU3RyaW5nKG9sZEFyZy5kZWZhdWx0VmFsdWUpfScgdG8gJyR7c2FmZVN0cmluZyhuZXdBcmcuZGVmYXVsdFZhbHVlKX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZSwgb2xkQXJnLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZmllbGRBcmd1bWVudFR5cGVDaGFuZ2VkKHR5cGUsIGZpZWxkLCBvbGRBcmcsIG5ld0FyZykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyaXRpY2FsaXR5OiBzYWZlQ2hhbmdlRm9ySW5wdXRWYWx1ZShvbGRBcmcudHlwZSwgbmV3QXJnLnR5cGUpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyxcbiAgICAgICAgICAgICAgICByZWFzb246IGBDaGFuZ2luZyBhbiBpbnB1dCBmaWVsZCBmcm9tIG5vbi1udWxsIHRvIG51bGwgaXMgY29uc2lkZXJlZCBub24tYnJlYWtpbmcuYCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGxldmVsOiBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogYENoYW5naW5nIHRoZSB0eXBlIG9mIGEgZmllbGQncyBhcmd1bWVudCBjYW4gY2F1c2UgZXhpc3RpbmcgcXVlcmllcyB0aGF0IHVzZSB0aGlzIGFyZ3VtZW50IHRvIGVycm9yLmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLkZpZWxkQXJndW1lbnRUeXBlQ2hhbmdlZCxcbiAgICAgICAgbWVzc2FnZTogYFR5cGUgZm9yIGFyZ3VtZW50ICcke25ld0FyZy5uYW1lfScgb24gZmllbGQgJyR7dHlwZS5uYW1lfS4ke2ZpZWxkLm5hbWV9JyBjaGFuZ2VkIGZyb20gJyR7b2xkQXJnLnR5cGV9JyB0byAnJHtuZXdBcmcudHlwZX0nYCxcbiAgICAgICAgcGF0aDogW3R5cGUubmFtZSwgZmllbGQubmFtZSwgb2xkQXJnLm5hbWVdLmpvaW4oJy4nKSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VzSW5Bcmd1bWVudCh0eXBlLCBmaWVsZCwgb2xkQXJnLCBuZXdBcmcsIGFkZENoYW5nZSkge1xuICAgIGlmIChpc05vdEVxdWFsKG9sZEFyZy5kZXNjcmlwdGlvbiwgbmV3QXJnLmRlc2NyaXB0aW9uKSkge1xuICAgICAgICBhZGRDaGFuZ2UoZmllbGRBcmd1bWVudERlc2NyaXB0aW9uQ2hhbmdlZCh0eXBlLCBmaWVsZCwgb2xkQXJnLCBuZXdBcmcpKTtcbiAgICB9XG4gICAgaWYgKGlzTm90RXF1YWwob2xkQXJnLmRlZmF1bHRWYWx1ZSwgbmV3QXJnLmRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2xkQXJnLmRlZmF1bHRWYWx1ZSkgJiZcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkobmV3QXJnLmRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBkaWZmQXJyYXlzKG9sZEFyZy5kZWZhdWx0VmFsdWUsIG5ld0FyZy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgaWYgKGRpZmYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFkZENoYW5nZShmaWVsZEFyZ3VtZW50RGVmYXVsdENoYW5nZWQodHlwZSwgZmllbGQsIG9sZEFyZywgbmV3QXJnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoSlNPTi5zdHJpbmdpZnkob2xkQXJnLmRlZmF1bHRWYWx1ZSkgIT09XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShuZXdBcmcuZGVmYXVsdFZhbHVlKSkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGZpZWxkQXJndW1lbnREZWZhdWx0Q2hhbmdlZCh0eXBlLCBmaWVsZCwgb2xkQXJnLCBuZXdBcmcpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNOb3RFcXVhbChvbGRBcmcudHlwZS50b1N0cmluZygpLCBuZXdBcmcudHlwZS50b1N0cmluZygpKSkge1xuICAgICAgICBhZGRDaGFuZ2UoZmllbGRBcmd1bWVudFR5cGVDaGFuZ2VkKHR5cGUsIGZpZWxkLCBvbGRBcmcsIG5ld0FyZykpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hhbmdlc0luRmllbGQodHlwZSwgb2xkRmllbGQsIG5ld0ZpZWxkLCBhZGRDaGFuZ2UpIHtcbiAgICBpZiAoaXNOb3RFcXVhbChvbGRGaWVsZC5kZXNjcmlwdGlvbiwgbmV3RmllbGQuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIGlmIChpc1ZvaWQob2xkRmllbGQuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoZmllbGREZXNjcmlwdGlvbkFkZGVkKHR5cGUsIG5ld0ZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNWb2lkKG5ld0ZpZWxkLmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGZpZWxkRGVzY3JpcHRpb25SZW1vdmVkKHR5cGUsIG9sZEZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoZmllbGREZXNjcmlwdGlvbkNoYW5nZWQodHlwZSwgb2xkRmllbGQsIG5ld0ZpZWxkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzTm90RXF1YWwoaXNEZXByZWNhdGVkKG9sZEZpZWxkKSwgaXNEZXByZWNhdGVkKG5ld0ZpZWxkKSkpIHtcbiAgICAgICAgaWYgKGlzRGVwcmVjYXRlZChuZXdGaWVsZCkpIHtcbiAgICAgICAgICAgIGFkZENoYW5nZShmaWVsZERlcHJlY2F0aW9uQWRkZWQodHlwZSwgbmV3RmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFkZENoYW5nZShmaWVsZERlcHJlY2F0aW9uUmVtb3ZlZCh0eXBlLCBvbGRGaWVsZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc05vdEVxdWFsKG9sZEZpZWxkLmRlcHJlY2F0aW9uUmVhc29uLCBuZXdGaWVsZC5kZXByZWNhdGlvblJlYXNvbikpIHtcbiAgICAgICAgaWYgKGlzVm9pZChvbGRGaWVsZC5kZXByZWNhdGlvblJlYXNvbikpIHtcbiAgICAgICAgICAgIGFkZENoYW5nZShmaWVsZERlcHJlY2F0aW9uUmVhc29uQWRkZWQodHlwZSwgbmV3RmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1ZvaWQobmV3RmllbGQuZGVwcmVjYXRpb25SZWFzb24pKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoZmllbGREZXByZWNhdGlvblJlYXNvblJlbW92ZWQodHlwZSwgb2xkRmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFkZENoYW5nZShmaWVsZERlcHJlY2F0aW9uUmVhc29uQ2hhbmdlZCh0eXBlLCBvbGRGaWVsZCwgbmV3RmllbGQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNOb3RFcXVhbChvbGRGaWVsZC50eXBlLnRvU3RyaW5nKCksIG5ld0ZpZWxkLnR5cGUudG9TdHJpbmcoKSkpIHtcbiAgICAgICAgYWRkQ2hhbmdlKGZpZWxkVHlwZUNoYW5nZWQodHlwZSwgb2xkRmllbGQsIG5ld0ZpZWxkKSk7XG4gICAgfVxuICAgIGNvbXBhcmVMaXN0cyhvbGRGaWVsZC5hcmdzLCBuZXdGaWVsZC5hcmdzLCB7XG4gICAgICAgIG9uQWRkZWQoYXJnKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoZmllbGRBcmd1bWVudEFkZGVkKHR5cGUsIG5ld0ZpZWxkLCBhcmcpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZW1vdmVkKGFyZykge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGZpZWxkQXJndW1lbnRSZW1vdmVkKHR5cGUsIG9sZEZpZWxkLCBhcmcpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25NdXR1YWwoYXJnKSB7XG4gICAgICAgICAgICBjaGFuZ2VzSW5Bcmd1bWVudCh0eXBlLCBvbGRGaWVsZCwgYXJnLm9sZFZlcnNpb24sIGFyZy5uZXdWZXJzaW9uLCBhZGRDaGFuZ2UpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VzSW5PYmplY3Qob2xkVHlwZSwgbmV3VHlwZSwgYWRkQ2hhbmdlKSB7XG4gICAgY29uc3Qgb2xkSW50ZXJmYWNlcyA9IG9sZFR5cGUuZ2V0SW50ZXJmYWNlcygpO1xuICAgIGNvbnN0IG5ld0ludGVyZmFjZXMgPSBuZXdUeXBlLmdldEludGVyZmFjZXMoKTtcbiAgICBjb25zdCBvbGRGaWVsZHMgPSBvbGRUeXBlLmdldEZpZWxkcygpO1xuICAgIGNvbnN0IG5ld0ZpZWxkcyA9IG5ld1R5cGUuZ2V0RmllbGRzKCk7XG4gICAgY29tcGFyZUxpc3RzKG9sZEludGVyZmFjZXMsIG5ld0ludGVyZmFjZXMsIHtcbiAgICAgICAgb25BZGRlZChpKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2Uob2JqZWN0VHlwZUludGVyZmFjZUFkZGVkKGksIG5ld1R5cGUpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZW1vdmVkKGkpIHtcbiAgICAgICAgICAgIGFkZENoYW5nZShvYmplY3RUeXBlSW50ZXJmYWNlUmVtb3ZlZChpLCBvbGRUeXBlKSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgY29tcGFyZUxpc3RzKE9iamVjdC52YWx1ZXMob2xkRmllbGRzKSwgT2JqZWN0LnZhbHVlcyhuZXdGaWVsZHMpLCB7XG4gICAgICAgIG9uQWRkZWQoZikge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGZpZWxkQWRkZWQobmV3VHlwZSwgZikpO1xuICAgICAgICB9LFxuICAgICAgICBvblJlbW92ZWQoZikge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGZpZWxkUmVtb3ZlZChvbGRUeXBlLCBmKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTXV0dWFsKGYpIHtcbiAgICAgICAgICAgIGNoYW5nZXNJbkZpZWxkKG9sZFR5cGUsIGYub2xkVmVyc2lvbiwgZi5uZXdWZXJzaW9uLCBhZGRDaGFuZ2UpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VzSW5JbnRlcmZhY2Uob2xkSW50ZXJmYWNlLCBuZXdJbnRlcmZhY2UsIGFkZENoYW5nZSkge1xuICAgIGNvbXBhcmVMaXN0cyhPYmplY3QudmFsdWVzKG9sZEludGVyZmFjZS5nZXRGaWVsZHMoKSksIE9iamVjdC52YWx1ZXMobmV3SW50ZXJmYWNlLmdldEZpZWxkcygpKSwge1xuICAgICAgICBvbkFkZGVkKGZpZWxkKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoZmllbGRBZGRlZChuZXdJbnRlcmZhY2UsIGZpZWxkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVtb3ZlZChmaWVsZCkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGZpZWxkUmVtb3ZlZChvbGRJbnRlcmZhY2UsIGZpZWxkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTXV0dWFsKGZpZWxkKSB7XG4gICAgICAgICAgICBjaGFuZ2VzSW5GaWVsZChvbGRJbnRlcmZhY2UsIGZpZWxkLm9sZFZlcnNpb24sIGZpZWxkLm5ld1ZlcnNpb24sIGFkZENoYW5nZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZXNJbkRpcmVjdGl2ZShvbGREaXJlY3RpdmUsIG5ld0RpcmVjdGl2ZSwgYWRkQ2hhbmdlKSB7XG4gICAgaWYgKGlzTm90RXF1YWwob2xkRGlyZWN0aXZlLmRlc2NyaXB0aW9uLCBuZXdEaXJlY3RpdmUuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIGFkZENoYW5nZShkaXJlY3RpdmVEZXNjcmlwdGlvbkNoYW5nZWQob2xkRGlyZWN0aXZlLCBuZXdEaXJlY3RpdmUpKTtcbiAgICB9XG4gICAgY29uc3QgbG9jYXRpb25zID0ge1xuICAgICAgICBhZGRlZDogZGlmZkFycmF5cyhuZXdEaXJlY3RpdmUubG9jYXRpb25zLCBvbGREaXJlY3RpdmUubG9jYXRpb25zKSxcbiAgICAgICAgcmVtb3ZlZDogZGlmZkFycmF5cyhvbGREaXJlY3RpdmUubG9jYXRpb25zLCBuZXdEaXJlY3RpdmUubG9jYXRpb25zKSxcbiAgICB9O1xuICAgIC8vIGxvY2F0aW9ucyBhZGRlZFxuICAgIGxvY2F0aW9ucy5hZGRlZC5mb3JFYWNoKChsb2NhdGlvbikgPT4gYWRkQ2hhbmdlKGRpcmVjdGl2ZUxvY2F0aW9uQWRkZWQobmV3RGlyZWN0aXZlLCBsb2NhdGlvbikpKTtcbiAgICAvLyBsb2NhdGlvbnMgcmVtb3ZlZFxuICAgIGxvY2F0aW9ucy5yZW1vdmVkLmZvckVhY2goKGxvY2F0aW9uKSA9PiBhZGRDaGFuZ2UoZGlyZWN0aXZlTG9jYXRpb25SZW1vdmVkKG9sZERpcmVjdGl2ZSwgbG9jYXRpb24pKSk7XG4gICAgY29tcGFyZUxpc3RzKG9sZERpcmVjdGl2ZS5hcmdzLCBuZXdEaXJlY3RpdmUuYXJncywge1xuICAgICAgICBvbkFkZGVkKGFyZykge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGRpcmVjdGl2ZUFyZ3VtZW50QWRkZWQobmV3RGlyZWN0aXZlLCBhcmcpKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25SZW1vdmVkKGFyZykge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKGRpcmVjdGl2ZUFyZ3VtZW50UmVtb3ZlZChvbGREaXJlY3RpdmUsIGFyZykpO1xuICAgICAgICB9LFxuICAgICAgICBvbk11dHVhbChhcmcpIHtcbiAgICAgICAgICAgIGNoYW5nZXNJbkRpcmVjdGl2ZUFyZ3VtZW50KG9sZERpcmVjdGl2ZSwgYXJnLm9sZFZlcnNpb24sIGFyZy5uZXdWZXJzaW9uLCBhZGRDaGFuZ2UpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZnVuY3Rpb24gY2hhbmdlc0luRGlyZWN0aXZlQXJndW1lbnQoZGlyZWN0aXZlLCBvbGRBcmcsIG5ld0FyZywgYWRkQ2hhbmdlKSB7XG4gICAgaWYgKGlzTm90RXF1YWwob2xkQXJnLmRlc2NyaXB0aW9uLCBuZXdBcmcuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIGFkZENoYW5nZShkaXJlY3RpdmVBcmd1bWVudERlc2NyaXB0aW9uQ2hhbmdlZChkaXJlY3RpdmUsIG9sZEFyZywgbmV3QXJnKSk7XG4gICAgfVxuICAgIGlmIChpc05vdEVxdWFsKG9sZEFyZy5kZWZhdWx0VmFsdWUsIG5ld0FyZy5kZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgIGFkZENoYW5nZShkaXJlY3RpdmVBcmd1bWVudERlZmF1bHRWYWx1ZUNoYW5nZWQoZGlyZWN0aXZlLCBvbGRBcmcsIG5ld0FyZykpO1xuICAgIH1cbiAgICBpZiAoaXNOb3RFcXVhbChvbGRBcmcudHlwZS50b1N0cmluZygpLCBuZXdBcmcudHlwZS50b1N0cmluZygpKSkge1xuICAgICAgICBhZGRDaGFuZ2UoZGlyZWN0aXZlQXJndW1lbnRUeXBlQ2hhbmdlZChkaXJlY3RpdmUsIG9sZEFyZywgbmV3QXJnKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaWZmU2NoZW1hKG9sZFNjaGVtYSwgbmV3U2NoZW1hKSB7XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGZ1bmN0aW9uIGFkZENoYW5nZShjaGFuZ2UpIHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKGNoYW5nZSk7XG4gICAgfVxuICAgIGNoYW5nZXNJblNjaGVtYShvbGRTY2hlbWEsIG5ld1NjaGVtYSwgYWRkQ2hhbmdlKTtcbiAgICBjb21wYXJlTGlzdHMoT2JqZWN0LnZhbHVlcyhvbGRTY2hlbWEuZ2V0VHlwZU1hcCgpKS5maWx0ZXIoKHQpID0+ICFpc1ByaW1pdGl2ZSh0KSksIE9iamVjdC52YWx1ZXMobmV3U2NoZW1hLmdldFR5cGVNYXAoKSkuZmlsdGVyKCh0KSA9PiAhaXNQcmltaXRpdmUodCkpLCB7XG4gICAgICAgIG9uQWRkZWQodHlwZSkge1xuICAgICAgICAgICAgYWRkQ2hhbmdlKHR5cGVBZGRlZCh0eXBlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVtb3ZlZCh0eXBlKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UodHlwZVJlbW92ZWQodHlwZSkpO1xuICAgICAgICB9LFxuICAgICAgICBvbk11dHVhbCh0eXBlKSB7XG4gICAgICAgICAgICBjaGFuZ2VzSW5UeXBlKHR5cGUub2xkVmVyc2lvbiwgdHlwZS5uZXdWZXJzaW9uLCBhZGRDaGFuZ2UpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGNvbXBhcmVMaXN0cyhvbGRTY2hlbWEuZ2V0RGlyZWN0aXZlcygpLCBuZXdTY2hlbWEuZ2V0RGlyZWN0aXZlcygpLCB7XG4gICAgICAgIG9uQWRkZWQoZGlyZWN0aXZlKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UoZGlyZWN0aXZlQWRkZWQoZGlyZWN0aXZlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVtb3ZlZChkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIGFkZENoYW5nZShkaXJlY3RpdmVSZW1vdmVkKGRpcmVjdGl2ZSkpO1xuICAgICAgICB9LFxuICAgICAgICBvbk11dHVhbChkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIGNoYW5nZXNJbkRpcmVjdGl2ZShkaXJlY3RpdmUub2xkVmVyc2lvbiwgZGlyZWN0aXZlLm5ld1ZlcnNpb24sIGFkZENoYW5nZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNoYW5nZXM7XG59XG5mdW5jdGlvbiBjaGFuZ2VzSW5TY2hlbWEob2xkU2NoZW1hLCBuZXdTY2hlbWEsIGFkZENoYW5nZSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgIGNvbnN0IGRlZmF1bHROYW1lcyA9IHtcbiAgICAgICAgcXVlcnk6ICdRdWVyeScsXG4gICAgICAgIG11dGF0aW9uOiAnTXV0YXRpb24nLFxuICAgICAgICBzdWJzY3JpcHRpb246ICdTdWJzY3JpcHRpb24nLFxuICAgIH07XG4gICAgY29uc3Qgb2xkUm9vdCA9IHtcbiAgICAgICAgcXVlcnk6IChfYSA9IChvbGRTY2hlbWEuZ2V0UXVlcnlUeXBlKCkgfHwge30pLm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGRlZmF1bHROYW1lcy5xdWVyeSxcbiAgICAgICAgbXV0YXRpb246IChfYiA9IChvbGRTY2hlbWEuZ2V0TXV0YXRpb25UeXBlKCkgfHwge30pLm5hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRlZmF1bHROYW1lcy5tdXRhdGlvbixcbiAgICAgICAgc3Vic2NyaXB0aW9uOiAoX2MgPSAob2xkU2NoZW1hLmdldFN1YnNjcmlwdGlvblR5cGUoKSB8fCB7fSkubmFtZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZGVmYXVsdE5hbWVzLnN1YnNjcmlwdGlvbixcbiAgICB9O1xuICAgIGNvbnN0IG5ld1Jvb3QgPSB7XG4gICAgICAgIHF1ZXJ5OiAoX2QgPSAobmV3U2NoZW1hLmdldFF1ZXJ5VHlwZSgpIHx8IHt9KS5uYW1lKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBkZWZhdWx0TmFtZXMucXVlcnksXG4gICAgICAgIG11dGF0aW9uOiAoX2UgPSAobmV3U2NoZW1hLmdldE11dGF0aW9uVHlwZSgpIHx8IHt9KS5uYW1lKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBkZWZhdWx0TmFtZXMubXV0YXRpb24sXG4gICAgICAgIHN1YnNjcmlwdGlvbjogKF9mID0gKG5ld1NjaGVtYS5nZXRTdWJzY3JpcHRpb25UeXBlKCkgfHwge30pLm5hbWUpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IGRlZmF1bHROYW1lcy5zdWJzY3JpcHRpb24sXG4gICAgfTtcbiAgICBpZiAoaXNOb3RFcXVhbChvbGRSb290LnF1ZXJ5LCBuZXdSb290LnF1ZXJ5KSkge1xuICAgICAgICBhZGRDaGFuZ2Uoc2NoZW1hUXVlcnlUeXBlQ2hhbmdlZChvbGRTY2hlbWEsIG5ld1NjaGVtYSkpO1xuICAgIH1cbiAgICBpZiAoaXNOb3RFcXVhbChvbGRSb290Lm11dGF0aW9uLCBuZXdSb290Lm11dGF0aW9uKSkge1xuICAgICAgICBhZGRDaGFuZ2Uoc2NoZW1hTXV0YXRpb25UeXBlQ2hhbmdlZChvbGRTY2hlbWEsIG5ld1NjaGVtYSkpO1xuICAgIH1cbiAgICBpZiAoaXNOb3RFcXVhbChvbGRSb290LnN1YnNjcmlwdGlvbiwgbmV3Um9vdC5zdWJzY3JpcHRpb24pKSB7XG4gICAgICAgIGFkZENoYW5nZShzY2hlbWFTdWJzY3JpcHRpb25UeXBlQ2hhbmdlZChvbGRTY2hlbWEsIG5ld1NjaGVtYSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoYW5nZXNJblR5cGUob2xkVHlwZSwgbmV3VHlwZSwgYWRkQ2hhbmdlKSB7XG4gICAgaWYgKGlzRW51bVR5cGUob2xkVHlwZSkgJiYgaXNFbnVtVHlwZShuZXdUeXBlKSkge1xuICAgICAgICBjaGFuZ2VzSW5FbnVtKG9sZFR5cGUsIG5ld1R5cGUsIGFkZENoYW5nZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzVW5pb25UeXBlKG9sZFR5cGUpICYmIGlzVW5pb25UeXBlKG5ld1R5cGUpKSB7XG4gICAgICAgIGNoYW5nZXNJblVuaW9uKG9sZFR5cGUsIG5ld1R5cGUsIGFkZENoYW5nZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzSW5wdXRPYmplY3RUeXBlKG9sZFR5cGUpICYmIGlzSW5wdXRPYmplY3RUeXBlKG5ld1R5cGUpKSB7XG4gICAgICAgIGNoYW5nZXNJbklucHV0T2JqZWN0KG9sZFR5cGUsIG5ld1R5cGUsIGFkZENoYW5nZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0VHlwZShvbGRUeXBlKSAmJiBpc09iamVjdFR5cGUobmV3VHlwZSkpIHtcbiAgICAgICAgY2hhbmdlc0luT2JqZWN0KG9sZFR5cGUsIG5ld1R5cGUsIGFkZENoYW5nZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzSW50ZXJmYWNlVHlwZShvbGRUeXBlKSAmJiBpc0ludGVyZmFjZVR5cGUobmV3VHlwZSkpIHtcbiAgICAgICAgY2hhbmdlc0luSW50ZXJmYWNlKG9sZFR5cGUsIG5ld1R5cGUsIGFkZENoYW5nZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2NhbGFyVHlwZShvbGRUeXBlKSAmJiBpc1NjYWxhclR5cGUobmV3VHlwZSkpIDtcbiAgICBlbHNlIHtcbiAgICAgICAgYWRkQ2hhbmdlKHR5cGVLaW5kQ2hhbmdlZChvbGRUeXBlLCBuZXdUeXBlKSk7XG4gICAgfVxuICAgIGlmIChpc05vdEVxdWFsKG9sZFR5cGUuZGVzY3JpcHRpb24sIG5ld1R5cGUuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIGlmIChpc1ZvaWQob2xkVHlwZS5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgIGFkZENoYW5nZSh0eXBlRGVzY3JpcHRpb25BZGRlZChuZXdUeXBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNWb2lkKG5ld1R5cGUuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UodHlwZURlc2NyaXB0aW9uUmVtb3ZlZChvbGRUeXBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhZGRDaGFuZ2UodHlwZURlc2NyaXB0aW9uQ2hhbmdlZChvbGRUeXBlLCBuZXdUeXBlKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IGRhbmdlcm91c0JyZWFraW5nID0gKHsgY2hhbmdlcyB9KSA9PiB7XG4gICAgcmV0dXJuIGNoYW5nZXMubWFwKChjaGFuZ2UpID0+IHtcbiAgICAgICAgaWYgKGNoYW5nZS5jcml0aWNhbGl0eS5sZXZlbCA9PT0gQ3JpdGljYWxpdHlMZXZlbC5EYW5nZXJvdXMpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoYW5nZSksIHsgY3JpdGljYWxpdHk6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY2hhbmdlLmNyaXRpY2FsaXR5KSwgeyBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyB9KSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5zcGxpdCgnLicpO1xufVxuXG5jb25zdCBzdXBwcmVzc1JlbW92YWxPZkRlcHJlY2F0ZWRGaWVsZCA9ICh7IGNoYW5nZXMsIG9sZFNjaGVtYSwgfSkgPT4ge1xuICAgIHJldHVybiBjaGFuZ2VzLm1hcCgoY2hhbmdlKSA9PiB7XG4gICAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5GaWVsZFJlbW92ZWQgJiZcbiAgICAgICAgICAgIGNoYW5nZS5jcml0aWNhbGl0eS5sZXZlbCA9PT0gQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyAmJlxuICAgICAgICAgICAgY2hhbmdlLnBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IFt0eXBlTmFtZSwgZmllbGROYW1lXSA9IHBhcnNlUGF0aChjaGFuZ2UucGF0aCk7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gb2xkU2NoZW1hLmdldFR5cGUodHlwZU5hbWUpO1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0VHlwZSh0eXBlKSB8fCBpc0ludGVyZmFjZVR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IHR5cGUuZ2V0RmllbGRzKClbZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoaXNEZXByZWNhdGVkKGZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjaGFuZ2UpLCB7IGNyaXRpY2FsaXR5OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoYW5nZS5jcml0aWNhbGl0eSksIHsgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuRGFuZ2Vyb3VzIH0pIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuRW51bVZhbHVlUmVtb3ZlZCAmJlxuICAgICAgICAgICAgY2hhbmdlLmNyaXRpY2FsaXR5LmxldmVsID09PSBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nICYmXG4gICAgICAgICAgICBjaGFuZ2UucGF0aCkge1xuICAgICAgICAgICAgY29uc3QgW2VudW1OYW1lLCBlbnVtSXRlbV0gPSBwYXJzZVBhdGgoY2hhbmdlLnBhdGgpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IG9sZFNjaGVtYS5nZXRUeXBlKGVudW1OYW1lKTtcbiAgICAgICAgICAgIGlmIChpc0VudW1UeXBlKHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHR5cGUuZ2V0VmFsdWUoZW51bUl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIGlzRGVwcmVjYXRlZChpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjaGFuZ2UpLCB7IGNyaXRpY2FsaXR5OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoYW5nZS5jcml0aWNhbGl0eSksIHsgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuRGFuZ2Vyb3VzIH0pIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuSW5wdXRGaWVsZFJlbW92ZWQgJiZcbiAgICAgICAgICAgIGNoYW5nZS5jcml0aWNhbGl0eS5sZXZlbCA9PT0gQ3JpdGljYWxpdHlMZXZlbC5CcmVha2luZyAmJlxuICAgICAgICAgICAgY2hhbmdlLnBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IFtpbnB1dE5hbWUsIGlucHV0SXRlbV0gPSBwYXJzZVBhdGgoY2hhbmdlLnBhdGgpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IG9sZFNjaGVtYS5nZXRUeXBlKGlucHV0TmFtZSk7XG4gICAgICAgICAgICBpZiAoaXNJbnB1dE9iamVjdFR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gdHlwZS5nZXRGaWVsZHMoKVtpbnB1dEl0ZW1dO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIGlzRGVwcmVjYXRlZChpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjaGFuZ2UpLCB7IGNyaXRpY2FsaXR5OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoYW5nZS5jcml0aWNhbGl0eSksIHsgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuRGFuZ2Vyb3VzIH0pIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlO1xuICAgIH0pO1xufTtcblxuY29uc3QgZGVzY3JpcHRpb25DaGFuZ2VUeXBlcyA9IFtcbiAgICBDaGFuZ2VUeXBlLkZpZWxkQXJndW1lbnREZXNjcmlwdGlvbkNoYW5nZWQsXG4gICAgQ2hhbmdlVHlwZS5EaXJlY3RpdmVEZXNjcmlwdGlvbkNoYW5nZWQsXG4gICAgQ2hhbmdlVHlwZS5EaXJlY3RpdmVBcmd1bWVudERlc2NyaXB0aW9uQ2hhbmdlZCxcbiAgICBDaGFuZ2VUeXBlLkVudW1WYWx1ZURlc2NyaXB0aW9uQ2hhbmdlZCxcbiAgICBDaGFuZ2VUeXBlLkZpZWxkRGVzY3JpcHRpb25DaGFuZ2VkLFxuICAgIENoYW5nZVR5cGUuRmllbGREZXNjcmlwdGlvbkFkZGVkLFxuICAgIENoYW5nZVR5cGUuRmllbGREZXNjcmlwdGlvblJlbW92ZWQsXG4gICAgQ2hhbmdlVHlwZS5JbnB1dEZpZWxkRGVzY3JpcHRpb25BZGRlZCxcbiAgICBDaGFuZ2VUeXBlLklucHV0RmllbGREZXNjcmlwdGlvblJlbW92ZWQsXG4gICAgQ2hhbmdlVHlwZS5JbnB1dEZpZWxkRGVzY3JpcHRpb25DaGFuZ2VkLFxuICAgIENoYW5nZVR5cGUuVHlwZURlc2NyaXB0aW9uQ2hhbmdlZCxcbl07XG5jb25zdCBpZ25vcmVEZXNjcmlwdGlvbkNoYW5nZXMgPSAoeyBjaGFuZ2VzIH0pID0+IHtcbiAgICByZXR1cm4gY2hhbmdlcy5maWx0ZXIoKGNoYW5nZSkgPT4gZGVzY3JpcHRpb25DaGFuZ2VUeXBlcy5pbmRleE9mKGNoYW5nZS50eXBlKSA9PT0gLTEpO1xufTtcblxuY29uc3QgY29uc2lkZXJVc2FnZSA9ICh7IGNoYW5nZXMsIGNvbmZpZywgfSkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjb25zaWRlclVzYWdlIHJ1bGUgaXMgbWlzc2luZyBjb25maWdgKTtcbiAgICB9XG4gICAgY29uc3QgY29sbGVjdGVkQnJlYWtpbmdGaWVsZCA9IFtdO1xuICAgIGNoYW5nZXMuZm9yRWFjaCgoY2hhbmdlKSA9PiB7XG4gICAgICAgIGlmIChjaGFuZ2UuY3JpdGljYWxpdHkubGV2ZWwgPT09IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcgJiYgY2hhbmdlLnBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IFt0eXBlTmFtZSwgZmllbGROYW1lLCBhcmd1bWVudE5hbWVdID0gcGFyc2VQYXRoKGNoYW5nZS5wYXRoKTtcbiAgICAgICAgICAgIGNvbGxlY3RlZEJyZWFraW5nRmllbGQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZU5hbWUsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudDogYXJndW1lbnROYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBUcnVlIGlmIHNhZmUgdG8gYnJlYWssIGZhbHNlIG90aGVyd2lzZVxuICAgIGNvbnN0IHVzYWdlTGlzdCA9IHlpZWxkIGNvbmZpZy5jaGVja1VzYWdlKGNvbGxlY3RlZEJyZWFraW5nRmllbGQpO1xuICAgIC8vIHR1cm5zIGFuIGFycmF5IG9mIGJvb2xlYW5zIGludG8gYW4gYXJyYXkgb2YgYFR5cGUuRmllbGRgIHN0cmluZ3NcbiAgICAvLyBpbmNsdWRlcyBvbmx5IHRob3NlIHRoYXQgYXJlIHNhZmUgdG8gYnJlYWsgdGhlIGFwaVxuICAgIGNvbnN0IHN1cHByZXNzZWRQYXRocyA9IGNvbGxlY3RlZEJyZWFraW5nRmllbGRcbiAgICAgICAgLmZpbHRlcigoXywgaSkgPT4gdXNhZ2VMaXN0W2ldID09PSB0cnVlKVxuICAgICAgICAubWFwKCh7IHR5cGUsIGZpZWxkLCBhcmd1bWVudCB9KSA9PiBbdHlwZSwgZmllbGQsIGFyZ3VtZW50XS5maWx0ZXIoQm9vbGVhbikuam9pbignLicpKTtcbiAgICByZXR1cm4gY2hhbmdlcy5tYXAoKGNoYW5nZSkgPT4ge1xuICAgICAgICAvLyBUdXJucyB0aG9zZSBcInNhZmUgdG8gYnJlYWtcIiBjaGFuZ2VzIGludG8gXCJkYW5nZXJvdXNcIlxuICAgICAgICBpZiAoY2hhbmdlLmNyaXRpY2FsaXR5LmxldmVsID09PSBDcml0aWNhbGl0eUxldmVsLkJyZWFraW5nICYmXG4gICAgICAgICAgICBjaGFuZ2UucGF0aCAmJlxuICAgICAgICAgICAgc3VwcHJlc3NlZFBhdGhzLnNvbWUoKHApID0+IGNoYW5nZS5wYXRoLnN0YXJ0c1dpdGgocCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjaGFuZ2UpLCB7IGNyaXRpY2FsaXR5OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoYW5nZS5jcml0aWNhbGl0eSksIHsgbGV2ZWw6IENyaXRpY2FsaXR5TGV2ZWwuRGFuZ2Vyb3VzIH0pLCBtZXNzYWdlOiBgJHtjaGFuZ2UubWVzc2FnZX0gKG5vbi1icmVha2luZyBiYXNlZCBvbiB1c2FnZSlgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfSk7XG59KTtcblxuY29uc3Qgc2FmZVVucmVhY2hhYmxlID0gKHsgY2hhbmdlcywgb2xkU2NoZW1hIH0pID0+IHtcbiAgICBjb25zdCByZWFjaGFibGUgPSBnZXRSZWFjaGFibGVUeXBlcyhvbGRTY2hlbWEpO1xuICAgIHJldHVybiBjaGFuZ2VzLm1hcCgoY2hhbmdlKSA9PiB7XG4gICAgICAgIGlmIChjaGFuZ2UuY3JpdGljYWxpdHkubGV2ZWwgPT09IENyaXRpY2FsaXR5TGV2ZWwuQnJlYWtpbmcgJiYgY2hhbmdlLnBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IFt0eXBlTmFtZV0gPSBwYXJzZVBhdGgoY2hhbmdlLnBhdGgpO1xuICAgICAgICAgICAgaWYgKCFyZWFjaGFibGUuaGFzKHR5cGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNoYW5nZSksIHsgY3JpdGljYWxpdHk6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY2hhbmdlLmNyaXRpY2FsaXR5KSwgeyBsZXZlbDogQ3JpdGljYWxpdHlMZXZlbC5Ob25CcmVha2luZyB9KSwgbWVzc2FnZTogJ1VucmVhY2hhYmxlIGZyb20gcm9vdCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IHJ1bGVzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBkYW5nZXJvdXNCcmVha2luZzogZGFuZ2Vyb3VzQnJlYWtpbmcsXG4gICAgc3VwcHJlc3NSZW1vdmFsT2ZEZXByZWNhdGVkRmllbGQ6IHN1cHByZXNzUmVtb3ZhbE9mRGVwcmVjYXRlZEZpZWxkLFxuICAgIGlnbm9yZURlc2NyaXB0aW9uQ2hhbmdlczogaWdub3JlRGVzY3JpcHRpb25DaGFuZ2VzLFxuICAgIGNvbnNpZGVyVXNhZ2U6IGNvbnNpZGVyVXNhZ2UsXG4gICAgc2FmZVVucmVhY2hhYmxlOiBzYWZlVW5yZWFjaGFibGVcbn0pO1xuXG5jb25zdCBEaWZmUnVsZSA9IHJ1bGVzO1xuZnVuY3Rpb24gZGlmZihvbGRTY2hlbWEsIG5ld1NjaGVtYSwgcnVsZXMgPSBbXSwgY29uZmlnKSB7XG4gICAgY29uc3QgY2hhbmdlcyA9IGRpZmZTY2hlbWEob2xkU2NoZW1hLCBuZXdTY2hlbWEpO1xuICAgIHJldHVybiBydWxlcy5yZWR1Y2UoKHByZXYsIHJ1bGUpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgcHJldkNoYW5nZXMgPSB5aWVsZCBwcmV2O1xuICAgICAgICByZXR1cm4gcnVsZSh7XG4gICAgICAgICAgICBjaGFuZ2VzOiBwcmV2Q2hhbmdlcyxcbiAgICAgICAgICAgIG9sZFNjaGVtYSxcbiAgICAgICAgICAgIG5ld1NjaGVtYSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfSksIFByb21pc2UucmVzb2x2ZShjaGFuZ2VzKSk7XG59XG5cbmZ1bmN0aW9uIHJlYWREb2N1bWVudChzb3VyY2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgZnJhZ21lbnRzOiBbXSxcbiAgICAgICAgb3BlcmF0aW9uczogW10sXG4gICAgICAgIGhhc0ZyYWdtZW50czogZmFsc2UsXG4gICAgICAgIGhhc09wZXJhdGlvbnM6IGZhbHNlLFxuICAgIH07XG4gICAgY29uc3QgZG9jdW1lbnROb2RlID0gcGFyc2Uoc291cmNlLmJvZHkpO1xuICAgIGNvbnN0IGZpbGVwYXRoID0gc291cmNlLm5hbWU7XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSBkb2N1bWVudE5vZGUuZGVmaW5pdGlvbnMgfHwgW107XG4gICAgZGVmaW5pdGlvbnMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAoaXNPcGVyYXRpb24obm9kZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5vcGVyYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgc291cmNlOiBmaWxlcGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRnJhZ21lbnQobm9kZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5mcmFnbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGZpbGVwYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXN1bHQuaGFzRnJhZ21lbnRzID0gcmVzdWx0LmZyYWdtZW50cy5sZW5ndGggPiAwO1xuICAgIHJlc3VsdC5oYXNPcGVyYXRpb25zID0gcmVzdWx0Lm9wZXJhdGlvbnMubGVuZ3RoID4gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaXNPcGVyYXRpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlLmtpbmQgPT09IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT047XG59XG5mdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT047XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUXVlcnlEZXB0aCh7IHNvdXJjZSwgZG9jLCBtYXhEZXB0aCwgZnJhZ21lbnRHcmFwaCwgfSkge1xuICAgIHRyeSB7XG4gICAgICAgIGNhbGN1bGF0ZURlcHRoKHtcbiAgICAgICAgICAgIG5vZGU6IGRvYyxcbiAgICAgICAgICAgIGN1cnJlbnREZXB0aDogMCxcbiAgICAgICAgICAgIG1heERlcHRoLFxuICAgICAgICAgICAgZ2V0RnJhZ21lbnQobmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcmFnbWVudEdyYXBoLmdldE5vZGVEYXRhKG5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvck9yTm9kZSkge1xuICAgICAgICBpZiAoZXJyb3JPck5vZGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JPck5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZSA9IGVycm9yT3JOb2RlO1xuICAgICAgICByZXR1cm4gbmV3IEdyYXBoUUxFcnJvcihgUXVlcnkgZXhjZWVkcyBtYXhpbXVtIGRlcHRoIG9mICR7bWF4RGVwdGh9YCwgbm9kZSwgc291cmNlLCBub2RlLmxvYyAmJiBub2RlLmxvYy5zdGFydCA/IFtub2RlLmxvYy5zdGFydF0gOiB1bmRlZmluZWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZURlcHRoKHsgbm9kZSwgY3VycmVudERlcHRoLCBtYXhEZXB0aCwgZ2V0RnJhZ21lbnQsIH0pIHtcbiAgICBpZiAobWF4RGVwdGggJiYgY3VycmVudERlcHRoID4gbWF4RGVwdGgpIHtcbiAgICAgICAgdGhyb3cgbm9kZTtcbiAgICB9XG4gICAgc3dpdGNoIChub2RlLmtpbmQpIHtcbiAgICAgICAgY2FzZSBLaW5kLkZJRUxEOiB7XG4gICAgICAgICAgICBpZiAobm9kZS5uYW1lLnZhbHVlLnN0YXJ0c1dpdGgoJ19fJykgfHwgIW5vZGUuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtYXhJbm5lckRlcHRoID0gY2FsY3VsYXRlRGVwdGgoe1xuICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUuc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgICAgIGN1cnJlbnREZXB0aDogY3VycmVudERlcHRoICsgMSxcbiAgICAgICAgICAgICAgICBtYXhEZXB0aCxcbiAgICAgICAgICAgICAgICBnZXRGcmFnbWVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIDEgKyBtYXhJbm5lckRlcHRoO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgS2luZC5TRUxFQ1RJT05fU0VUOiB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoLi4ubm9kZS5zZWxlY3Rpb25zLm1hcCgoc2VsZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZURlcHRoKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVwdGg6IGN1cnJlbnREZXB0aCxcbiAgICAgICAgICAgICAgICAgICAgbWF4RGVwdGgsXG4gICAgICAgICAgICAgICAgICAgIGdldEZyYWdtZW50LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgS2luZC5ET0NVTUVOVDoge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KC4uLm5vZGUuZGVmaW5pdGlvbnMubWFwKChkZWYpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlRGVwdGgoe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiBkZWYsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXB0aDogY3VycmVudERlcHRoLFxuICAgICAgICAgICAgICAgICAgICBtYXhEZXB0aCxcbiAgICAgICAgICAgICAgICAgICAgZ2V0RnJhZ21lbnQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OOlxuICAgICAgICBjYXNlIEtpbmQuSU5MSU5FX0ZSQUdNRU5UOlxuICAgICAgICBjYXNlIEtpbmQuRlJBR01FTlRfREVGSU5JVElPTjoge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KC4uLm5vZGUuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMubWFwKChzZWxlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlRGVwdGgoe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXB0aCxcbiAgICAgICAgICAgICAgICAgICAgbWF4RGVwdGgsXG4gICAgICAgICAgICAgICAgICAgIGdldEZyYWdtZW50LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgS2luZC5GUkFHTUVOVF9TUFJFQUQ6XG4gICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlRGVwdGgoe1xuICAgICAgICAgICAgICAgIG5vZGU6IGdldEZyYWdtZW50KG5vZGUubmFtZS52YWx1ZSksXG4gICAgICAgICAgICAgICAgY3VycmVudERlcHRoLFxuICAgICAgICAgICAgICAgIG1heERlcHRoLFxuICAgICAgICAgICAgICAgIGdldEZyYWdtZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGRuJ3QgaGFuZGxlICR7bm9kZS5raW5kfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Eb2N1bWVudFdpdGhBcG9sbG8oZG9jLCB7IGtlZXBDbGllbnRGaWVsZHMgfSkge1xuICAgIHJldHVybiB2aXNpdChkb2MsIHtcbiAgICAgICAgRmllbGQobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGtlZXBDbGllbnRGaWVsZHNcbiAgICAgICAgICAgICAgICA/IHJlbW92ZURpcmVjdGl2ZXMobm9kZSwgWydjbGllbnQnXSlcbiAgICAgICAgICAgICAgICA6IHJlbW92ZUZpZWxkSWZEaXJlY3RpdmVzKG5vZGUsIFsnY2xpZW50J10pO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtU2NoZW1hV2l0aEFwb2xsbyhzY2hlbWEpIHtcbiAgICByZXR1cm4gZXh0ZW5kU2NoZW1hKHNjaGVtYSwgcGFyc2UoLyogR3JhcGhRTCAqLyBgXG4gICAgICBkaXJlY3RpdmUgQGNvbm5lY3Rpb24oa2V5OiBTdHJpbmchLCBmaWx0ZXI6IFtTdHJpbmddKSBvbiBGSUVMRFxuICAgIGApKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGUoc2NoZW1hLCBzb3VyY2VzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IHN0cmljdERlcHJlY2F0ZWQ6IHRydWUsIHN0cmljdEZyYWdtZW50czogdHJ1ZSwga2VlcENsaWVudEZpZWxkczogZmFsc2UsIGFwb2xsbzogZmFsc2UgfSwgb3B0aW9ucyk7XG4gICAgY29uc3QgaW52YWxpZERvY3VtZW50cyA9IFtdO1xuICAgIC8vIHJlYWQgZG9jdW1lbnRzXG4gICAgY29uc3QgZG9jdW1lbnRzID0gc291cmNlcy5tYXAocmVhZERvY3VtZW50KTtcbiAgICAvLyBrZWVwIGFsbCBuYW1lZCBmcmFnbWVudHNcbiAgICBjb25zdCBmcmFnbWVudHMgPSBbXTtcbiAgICBjb25zdCBmcmFnbWVudE5hbWVzID0gW107XG4gICAgY29uc3QgZ3JhcGggPSBuZXcgRGVwR3JhcGgoeyBjaXJjdWxhcjogdHJ1ZSB9KTtcbiAgICBkb2N1bWVudHMuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGRvYy5mcmFnbWVudHMuZm9yRWFjaCgoZnJhZ21lbnQpID0+IHtcbiAgICAgICAgICAgIGZyYWdtZW50TmFtZXMucHVzaChmcmFnbWVudC5ub2RlLm5hbWUudmFsdWUpO1xuICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2goZnJhZ21lbnQpO1xuICAgICAgICAgICAgZ3JhcGguYWRkTm9kZShmcmFnbWVudC5ub2RlLm5hbWUudmFsdWUsIGZyYWdtZW50Lm5vZGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBmcmFnbWVudHMuZm9yRWFjaCgoZnJhZ21lbnQpID0+IHtcbiAgICAgICAgY29uc3QgZGVwZW5kcyA9IGV4dHJhY3RGcmFnbWVudHMocHJpbnQoZnJhZ21lbnQubm9kZSkpO1xuICAgICAgICBpZiAoZGVwZW5kcykge1xuICAgICAgICAgICAgZGVwZW5kcy5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgZ3JhcGguYWRkRGVwZW5kZW5jeShmcmFnbWVudC5ub2RlLm5hbWUudmFsdWUsIG5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBkb2N1bWVudHNcbiAgICAgICAgLy8gc2luY2Ugd2UgaW5jbHVkZSBmcmFnbWVudHMsIHZhbGlkYXRlIG9ubHkgb3BlcmF0aW9uc1xuICAgICAgICAuZmlsdGVyKChkb2MpID0+IGRvYy5oYXNPcGVyYXRpb25zKVxuICAgICAgICAuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvY1dpdGhPcGVyYXRpb25zID0ge1xuICAgICAgICAgICAga2luZDogS2luZC5ET0NVTUVOVCxcbiAgICAgICAgICAgIGRlZmluaXRpb25zOiBkb2Mub3BlcmF0aW9ucy5tYXAoKGQpID0+IGQubm9kZSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZEZyYWdtZW50cyA9IChleHRyYWN0RnJhZ21lbnRzKHByaW50KGRvY1dpdGhPcGVyYXRpb25zKSkgfHwgW10pXG4gICAgICAgICAgICAvLyByZXNvbHZlIGFsbCBuZXN0ZWQgZnJhZ21lbnRzXG4gICAgICAgICAgICAubWFwKChmcmFnbWVudE5hbWUpID0+IHJlc29sdmVGcmFnbWVudChncmFwaC5nZXROb2RlRGF0YShmcmFnbWVudE5hbWUpLCBncmFwaCkpXG4gICAgICAgICAgICAvLyBmbGF0dGVuIGFycmF5c1xuICAgICAgICAgICAgLnJlZHVjZSgobGlzdCwgY3VycmVudCkgPT4gbGlzdC5jb25jYXQoY3VycmVudCksIFtdKVxuICAgICAgICAgICAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKGRlZiwgaSwgYWxsKSA9PiBhbGwuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLm5hbWUudmFsdWUgPT09IGRlZi5uYW1lLnZhbHVlKSA9PT0gaSk7XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IHtcbiAgICAgICAgICAgIGtpbmQ6IEtpbmQuRE9DVU1FTlQsXG4gICAgICAgICAgICBkZWZpbml0aW9uczogWy4uLmRvY1dpdGhPcGVyYXRpb25zLmRlZmluaXRpb25zLCAuLi5leHRyYWN0ZWRGcmFnbWVudHNdLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRTY2hlbWEgPSBjb25maWcuYXBvbGxvXG4gICAgICAgICAgICA/IHRyYW5zZm9ybVNjaGVtYVdpdGhBcG9sbG8oc2NoZW1hKVxuICAgICAgICAgICAgOiBzY2hlbWE7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRG9jID0gY29uZmlnLmFwb2xsb1xuICAgICAgICAgICAgPyB0cmFuc2Zvcm1Eb2N1bWVudFdpdGhBcG9sbG8obWVyZ2VkLCB7XG4gICAgICAgICAgICAgICAga2VlcENsaWVudEZpZWxkczogY29uZmlnLmtlZXBDbGllbnRGaWVsZHMsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiBtZXJnZWQ7XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRlJDEodHJhbnNmb3JtZWRTY2hlbWEsIHRyYW5zZm9ybWVkRG9jKSB8fCBbXTtcbiAgICAgICAgaWYgKGNvbmZpZy5tYXhEZXB0aCkge1xuICAgICAgICAgICAgY29uc3QgZGVwdGhFcnJvciA9IHZhbGlkYXRlUXVlcnlEZXB0aCh7XG4gICAgICAgICAgICAgICAgc291cmNlOiBkb2Muc291cmNlLFxuICAgICAgICAgICAgICAgIGRvYzogdHJhbnNmb3JtZWREb2MsXG4gICAgICAgICAgICAgICAgbWF4RGVwdGg6IGNvbmZpZy5tYXhEZXB0aCxcbiAgICAgICAgICAgICAgICBmcmFnbWVudEdyYXBoOiBncmFwaCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGRlcHRoRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChkZXB0aEVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXByZWNhdGVkID0gY29uZmlnLnN0cmljdERlcHJlY2F0ZWRcbiAgICAgICAgICAgID8gZmluZERlcHJlY2F0ZWRVc2FnZXModHJhbnNmb3JtZWRTY2hlbWEsIHRyYW5zZm9ybWVkRG9jKVxuICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgY29uc3QgZHVwbGljYXRlZEZyYWdtZW50cyA9IGNvbmZpZy5zdHJpY3RGcmFnbWVudHNcbiAgICAgICAgICAgID8gZmluZER1cGxpY2F0ZWRGcmFnbWVudHMoZnJhZ21lbnROYW1lcylcbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGlmIChzdW1MZW5ndGhzKGVycm9ycywgZHVwbGljYXRlZEZyYWdtZW50cywgZGVwcmVjYXRlZCkgPiAwKSB7XG4gICAgICAgICAgICBpbnZhbGlkRG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogZG9jLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBlcnJvcnM6IFsuLi5lcnJvcnMsIC4uLmR1cGxpY2F0ZWRGcmFnbWVudHNdLFxuICAgICAgICAgICAgICAgIGRlcHJlY2F0ZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpbnZhbGlkRG9jdW1lbnRzO1xufVxuZnVuY3Rpb24gZmluZER1cGxpY2F0ZWRGcmFnbWVudHMoZnJhZ21lbnROYW1lcykge1xuICAgIHJldHVybiBmcmFnbWVudE5hbWVzXG4gICAgICAgIC5maWx0ZXIoKG5hbWUsIGksIGFsbCkgPT4gYWxsLmluZGV4T2YobmFtZSkgIT09IGkpXG4gICAgICAgIC5tYXAoKG5hbWUpID0+IG5ldyBHcmFwaFFMRXJyb3IoYE5hbWUgb2YgJyR7bmFtZX0nIGZyYWdtZW50IGlzIG5vdCB1bmlxdWVgKSk7XG59XG4vL1xuLy8gUG9zdEluZm8gLT4gQXV0aG9ySW5mb1xuLy8gQXV0aG9ySW5mbyAtPiBOb25lXG4vL1xuZnVuY3Rpb24gcmVzb2x2ZUZyYWdtZW50KGZyYWdtZW50LCBncmFwaCkge1xuICAgIHJldHVybiBncmFwaFxuICAgICAgICAuZGVwZW5kZW5jaWVzT2YoZnJhZ21lbnQubmFtZS52YWx1ZSlcbiAgICAgICAgLnJlZHVjZSgobGlzdCwgY3VycmVudCkgPT4gW1xuICAgICAgICAuLi5saXN0LFxuICAgICAgICAuLi5yZXNvbHZlRnJhZ21lbnQoZ3JhcGguZ2V0Tm9kZURhdGEoY3VycmVudCksIGdyYXBoKSxcbiAgICBdLCBbZnJhZ21lbnRdKTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudHMoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gKGRvY3VtZW50Lm1hdGNoKC9bXFwuXXszfVthLXowLTlcXF9dK1xcYi9naSkgfHwgW10pLm1hcCgobmFtZSkgPT4gbmFtZS5yZXBsYWNlKCcuLi4nLCAnJykpO1xufVxuZnVuY3Rpb24gc3VtTGVuZ3RocyguLi5hcnJheXMpIHtcbiAgICByZXR1cm4gYXJyYXlzLnJlZHVjZSgoc3VtLCB7IGxlbmd0aCB9KSA9PiBzdW0gKyBsZW5ndGgsIDApO1xufVxuXG5mdW5jdGlvbiBzaW1pbGFyKHNjaGVtYSwgdHlwZU5hbWUsIHRocmVzaG9sZCA9IDAuNCkge1xuICAgIGNvbnN0IHR5cGVNYXAgPSBzY2hlbWEuZ2V0VHlwZU1hcCgpO1xuICAgIGNvbnN0IHRhcmdldHMgPSBPYmplY3Qua2V5cyhzY2hlbWEuZ2V0VHlwZU1hcCgpKVxuICAgICAgICAuZmlsdGVyKChuYW1lKSA9PiAhaXNQcmltaXRpdmUobmFtZSkgJiYgIWlzRm9ySW50cm9zcGVjdGlvbihuYW1lKSlcbiAgICAgICAgLm1hcCgobmFtZSkgPT4gKHtcbiAgICAgICAgdHlwZUlkOiBuYW1lLFxuICAgICAgICB2YWx1ZTogc3RyaXBUeXBlKHR5cGVNYXBbbmFtZV0pLFxuICAgIH0pKTtcbiAgICBjb25zdCByZXN1bHRzID0ge307XG4gICAgaWYgKHR5cGVvZiB0eXBlTmFtZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgIXRhcmdldHMuc29tZSgodCkgPT4gdC50eXBlSWQgPT09IHR5cGVOYW1lKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFR5cGUgJyR7dHlwZU5hbWV9JyBkb2Vzbid0IGV4aXN0YCk7XG4gICAgfVxuICAgICh0eXBlTmFtZSA/IFt7IHR5cGVJZDogdHlwZU5hbWUsIHZhbHVlOiAnJyB9XSA6IHRhcmdldHMpLmZvckVhY2goKHNvdXJjZSkgPT4ge1xuICAgICAgICBjb25zdCBzb3VyY2VUeXBlID0gc2NoZW1hLmdldFR5cGUoc291cmNlLnR5cGVJZCk7XG4gICAgICAgIGNvbnN0IG1hdGNoV2l0aCA9IHRhcmdldHMuZmlsdGVyKCh0YXJnZXQpID0+IHNjaGVtYS5nZXRUeXBlKHRhcmdldC50eXBlSWQpLmFzdE5vZGUua2luZCA9PT1cbiAgICAgICAgICAgIHNvdXJjZVR5cGUuYXN0Tm9kZS5raW5kICYmIHRhcmdldC50eXBlSWQgIT09IHNvdXJjZS50eXBlSWQpO1xuICAgICAgICBpZiAobWF0Y2hXaXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gc2ltaWxhclRvKHNvdXJjZVR5cGUsIG1hdGNoV2l0aCwgdGhyZXNob2xkKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbc291cmNlLnR5cGVJZF0gPSBmb3VuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuZnVuY3Rpb24gc2ltaWxhclRvKHR5cGUsIHRhcmdldHMsIHRocmVzaG9sZCkge1xuICAgIGNvbnN0IHR5cGVzID0gdGFyZ2V0cy5maWx0ZXIoKHRhcmdldCkgPT4gdGFyZ2V0LnR5cGVJZCAhPT0gdHlwZS5uYW1lKTtcbiAgICBjb25zdCByZXN1bHQgPSBmaW5kQmVzdE1hdGNoKHN0cmlwVHlwZSh0eXBlKSwgdHlwZXMpO1xuICAgIGlmIChyZXN1bHQuYmVzdE1hdGNoLnJhdGluZyA8IHRocmVzaG9sZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGJlc3RNYXRjaDogcmVzdWx0LmJlc3RNYXRjaCxcbiAgICAgICAgcmF0aW5nczogcmVzdWx0LnJhdGluZ3NcbiAgICAgICAgICAgIC5maWx0ZXIoKHIpID0+IHIucmF0aW5nID49IHRocmVzaG9sZCAmJiByLnRhcmdldCAhPT0gcmVzdWx0LmJlc3RNYXRjaC50YXJnZXQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5yYXRpbmcgLSBiLnJhdGluZylcbiAgICAgICAgICAgIC5yZXZlcnNlKCksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0cmlwVHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuIHByaW50VHlwZSh0eXBlKVxuICAgICAgICAudHJpbSgpXG4gICAgICAgIC5yZXBsYWNlKC9eW2Etel0rIFteXFx7XStcXHsvZywgJycpXG4gICAgICAgIC5yZXBsYWNlKC9cXH0kL2csICcnKVxuICAgICAgICAudHJpbSgpXG4gICAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgICAgLm1hcCgocykgPT4gcy50cmltKCkpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpXG4gICAgICAgIC5qb2luKCcgJyk7XG59XG5cbmZ1bmN0aW9uIGNvdmVyYWdlKHNjaGVtYSwgc291cmNlcykge1xuICAgIGNvbnN0IGNvdmVyYWdlID0ge1xuICAgICAgICBzb3VyY2VzLFxuICAgICAgICB0eXBlczoge30sXG4gICAgfTtcbiAgICBjb25zdCB0eXBlTWFwID0gc2NoZW1hLmdldFR5cGVNYXAoKTtcbiAgICBjb25zdCB0eXBlSW5mbyA9IG5ldyBUeXBlSW5mbyhzY2hlbWEpO1xuICAgIGNvbnN0IHZpc2l0b3IgPSAoc291cmNlKSA9PiAoe1xuICAgICAgICBGaWVsZChub2RlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZERlZiA9IHR5cGVJbmZvLmdldEZpZWxkRGVmKCk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0eXBlSW5mby5nZXRQYXJlbnRUeXBlKCk7XG4gICAgICAgICAgICBpZiAocGFyZW50ICYmXG4gICAgICAgICAgICAgICAgcGFyZW50Lm5hbWUgJiZcbiAgICAgICAgICAgICAgICAhaXNGb3JJbnRyb3NwZWN0aW9uKHBhcmVudC5uYW1lKSAmJlxuICAgICAgICAgICAgICAgIGZpZWxkRGVmICYmXG4gICAgICAgICAgICAgICAgZmllbGREZWYubmFtZSAmJlxuICAgICAgICAgICAgICAgIGZpZWxkRGVmLm5hbWUgIT09ICdfX3R5cGVuYW1lJyAmJlxuICAgICAgICAgICAgICAgIGZpZWxkRGVmLm5hbWUgIT09ICdfX3NjaGVtYScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VOYW1lID0gc291cmNlLm5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUNvdmVyYWdlID0gY292ZXJhZ2UudHlwZXNbcGFyZW50Lm5hbWVdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkQ292ZXJhZ2UgPSB0eXBlQ292ZXJhZ2UuY2hpbGRyZW5bZmllbGREZWYubmFtZV07XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb25zID0gZmllbGRDb3ZlcmFnZS5sb2NhdGlvbnNbc291cmNlTmFtZV07XG4gICAgICAgICAgICAgICAgdHlwZUNvdmVyYWdlLmhpdHMrKztcbiAgICAgICAgICAgICAgICBmaWVsZENvdmVyYWdlLmhpdHMrKztcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5sb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRDb3ZlcmFnZS5sb2NhdGlvbnNbc291cmNlTmFtZV0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmxvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihsb2NhdGlvbnMgfHwgW10pLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZS5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhcmdOb2RlIG9mIG5vZGUuYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdDb3ZlcmFnZSA9IGZpZWxkQ292ZXJhZ2UuY2hpbGRyZW5bYXJnTm9kZS5uYW1lLnZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ0NvdmVyYWdlLmhpdHMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdOb2RlLmxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ0NvdmVyYWdlLmxvY2F0aW9uc1tzb3VyY2VOYW1lXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnTm9kZS5sb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihhcmdDb3ZlcmFnZS5sb2NhdGlvbnNbc291cmNlTmFtZV0gfHwgW10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgZm9yIChjb25zdCB0eXBlbmFtZSBpbiB0eXBlTWFwKSB7XG4gICAgICAgIGlmICghaXNGb3JJbnRyb3NwZWN0aW9uKHR5cGVuYW1lKSAmJiAhaXNQcmltaXRpdmUodHlwZW5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZU1hcFt0eXBlbmFtZV07XG4gICAgICAgICAgICBpZiAoaXNPYmplY3RUeXBlKHR5cGUpIHx8IGlzSW50ZXJmYWNlVHlwZSh0eXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVDb3ZlcmFnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGl0czogMCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHt9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRNYXAgPSB0eXBlLmdldEZpZWxkcygpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGRuYW1lIGluIGZpZWxkTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gZmllbGRNYXBbZmllbGRuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgdHlwZUNvdmVyYWdlLmNoaWxkcmVuW2ZpZWxkLm5hbWVdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGl0czogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjoge30sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXJnIG9mIGZpZWxkLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb3ZlcmFnZS5jaGlsZHJlbltmaWVsZC5uYW1lXS5jaGlsZHJlblthcmcubmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0czogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnM6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb3ZlcmFnZS50eXBlc1t0eXBlLm5hbWVdID0gdHlwZUNvdmVyYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGRvY3VtZW50cyA9IGNvdmVyYWdlLnNvdXJjZXMubWFwKHJlYWREb2N1bWVudCk7XG4gICAgZG9jdW1lbnRzLmZvckVhY2goKGRvYywgaSkgPT4ge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBjb3ZlcmFnZS5zb3VyY2VzW2ldO1xuICAgICAgICBkb2Mub3BlcmF0aW9ucy5mb3JFYWNoKChvcCkgPT4ge1xuICAgICAgICAgICAgdmlzaXQob3Aubm9kZSwgdmlzaXRXaXRoVHlwZUluZm8odHlwZUluZm8sIHZpc2l0b3Ioc291cmNlKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgZG9jLmZyYWdtZW50cy5mb3JFYWNoKChmcikgPT4ge1xuICAgICAgICAgICAgdmlzaXQoZnIubm9kZSwgdmlzaXRXaXRoVHlwZUluZm8odHlwZUluZm8sIHZpc2l0b3Ioc291cmNlKSkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gY292ZXJhZ2U7XG59XG5cbmV4cG9ydCB7IENoYW5nZVR5cGUsIENyaXRpY2FsaXR5TGV2ZWwsIERpZmZSdWxlLCBjb3ZlcmFnZSwgZGlmZiwgZ2V0VHlwZVByZWZpeCwgc2ltaWxhciwgdmFsaWRhdGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/@graphql-inspector/core/index.mjs\n");

/***/ })

};
;